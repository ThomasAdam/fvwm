.\" t
.\" @(#)@PACKAGE@-@VERSION@ @RELDATELONG@
.de EX		\"Begin example
.ne 5
.if n .sp 1
.if t .sp .5
.nf
.in +.5i
..
.de EE
.fi
.in -.5i
.if n .sp 1
.if t .sp .5
..
.ta .3i .6i .9i 1.2i 1.5i 1.8i
.TH fvwm-menu-desktop 1 "@RELDATELONG@ (@VERSION@)" Fvwm "Fvwm Modules"
.UC
.SH NAME
fvwm-menu-desktop \- Reads XDG menu files and creates Fvwm menus

.SH SYNOPSIS

fvwm-menu-desktop
[ \fB\-\-help\fR|\fB\-h\fR|\fB\-?\fR ]
[ \fB\-\-verbose\fR|\fB\-v\fR ]
[ \fB\-\-install\-prefix\fR \fIDIR\fR ]
[ \fB\-\-desktop\fR \fINAME\fR ]
[ \fB\-\-title\fR \fINAME\fR ]
[ \fB\-\-enable\-mini\-icons\fR ]

.SH DESCRIPTION
This is a python script which parses XDG menus definitions to build
corresponding fvwm menus.

.SH USAGE
To add the XDG "application" menu to the "Utilities" menu
add the following to your fvwm config file (.fvwm/config):
.EX
 ...
AddToMenu Utilities "Application Menu" Popup FvwmMenu
PipeRead 'fvwm-menu-desktop'
.EE

By default fvwm-menu-desktop
builds the "applications" menu
and the menu is named FvwmMenu.

.EX
AddToMenu Utilities "KDE User Menu" Popup kde\-user
AddToMenu kde\-user
+ DynamicPopupAction PipeRead 'fvwm-menu-desktop --desktop kde-user --enable-mini-icons [other options]'
.EE

If you think that fvwm-menu-desktop slows your startup too much do
not use PipeRead.  Instead run  fvwm-menu-desktop
and
redirect the menu to a file and Read that file in
your .fvwm2rc file.
Another possibility is to use DynamicPopupAction
(with fvwm menu), the menu will be built only if
you pop up the menu. The
following menu creates a "kde\-all" menu which contains the user menu
which is built each time you pop up "kde\-all" and contains a pop up
to the system menu which is built only the first time you pop it up.
.EX
AddToMenu kde\-all
+ DynamicPopupAction FuncRecreateKdeAll

AddToMenu kde\-sys
+ DynamicPopupAction PipeRead 'fvwm-menu-desktop \\
\-\-desktop kde\-sys [options, but \-\-destroy-type d* or n*]'

AddToFunc FuncRecreateKdeAll \\
I PipeRead 'fvwm-menu-desktop \\
\-\-desktop kde\-user \-\-enable\-mini\-icons \-\-name kde\-all \\
\-\-destroy-type dynamic [options you like]'
+ I AddToMenu "kde\-all" "" Nop
+ I AddToMenu "kde\-all" "Kde System%mini/mini\-k.xpm%" Popup kde\-sys
.EE

.SH OPTIONS

.IP "Main Options"

.IP "\fB\-\-help\fR"
Show the help and exit.
.IP "\fB\-\-verbose\fR"
Run verbosely.
.IP "\fB\-\-install-prefix\fR \fIDIR\fR"
Optional parameter to override the default location
for XDG menu definitions.  The default location is /etc/xdg/menus.
.IP "\fB\-\-desktop\fR \fINAME\fR"
The name of the menus you want to generate.
The default is "application".
.IP "\fB\-\-title\fR \fINAME\fR"
Define the menu title of the top menu. Default
is "Gnome System Menu" for gnome\-sys, "Gnome User Menu" for
gnome\-user, "Gnome Red Hat Menu" for gnome\-redhat,
"Gnome Mandriva Menu" for gnome\-mandriva. For KDE the
default is given by KDE itself (or are similar to GNOME title).
.IP "\fB\-\-name\fR \fINAME\fR"
Define the menu name of the top menu. Default is the \-\-desktop
name if you use one above.

.IP "Icons Options"

By default, fvwm-menu-desktop  builds mini\-icon free menus. To enable
mini\-icons use:

.IP "\fB\-\-enable\-mini\-icons\fR"


.SH BUGS



.SH AUTHORS

This script is based on fvwm-xdg-menu.py
written by 
Piotr Zielinski (http://www.cl.cam.ac.uk/~pz215/)
who assigned Licence: GPL 2
Date: 03.12.2005.

The script was reworked to replace the existing
fvwm-menu-desktop perl script by the fvwm-workers.


.SH COPYING
The script is distributed by the same terms as fvwm itself.
See GNU General Public License for details.
