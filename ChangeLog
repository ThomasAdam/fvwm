1998-12-12  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/add_window.c:
	* fvwm/resize.c:
	* fvwm/events.c: added massive debug information

	* libs/debug.c: corrected typo: HAVE_VPRINTF -> HAVE_VFPRINTF

	* fvwm/Makefile.am (fvwm2_SOURCES):
	* fvwm/fvwm.h:
	* fvwm/fvwmdebug.h:
	* fvwm/fvwmdebug.c: added debug stuff (for main module only)

	* fvwm/FAQ: corrected some typos, added FAQ for the
	click-in-a-window-to-raise-it question.

	* fvwm/fvwm2.1:
	* BUGS: documented problem with keyboard shortcuts in Xnest

1998-12-11  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/fvwm2.1: Documented menu hotkeys

1998-12-11  Tim Phipps  <tim@quadrics.com>

	* modules/FvwmWinList/*: Without mini-icons text is centred by default.
	Fixed Focus colouring.  Added DontDepressFocus config variable.
	Fixed relief drawing.

1998-12-11  Bob Woodside <proteus@pcnet.com>

	* fvwm/events.c:  Fixed "window under mouse at startup doesn't
	get focus" bug - suppressed stashing the event time if an old
	LeaveNotify was found on the queue.

1998-12-10  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/move.c (et al.): Applied updated SnapAttraction patch but put
	the SnapAttration stuff in a new function called DoSnapAttract to save
	us duplicate code.

1998-12-09  Paul D. Smith  <psmith@gnu.org>

	* fvwm/fvwm2.1: Clarify the uses and abuses of the Exec function.

1998-12-09  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/builtins.c (ReadButtonFace): Removed MiniIcons memory leak fix.
	No chance to get this stable without a rewrite of large parts of code.

	* libs/ColorUtils.c (color_mult): applied fix by Adam Rice that caused
	some colours to be wrong

1998-12-09  Bob Woodside  <proteus@pcnet.com>

	* fvwm/virtual.c (GetDeskNumber): changed parsing to restore old
	behavior of Desk cmd with a single arg, fixed handling of 4 args.

	* fvwm/functions.c: removed WindowsDesk command.

	* modules/FvwmPager/x_pager.c: changed to use MoveToDesk
	instead of WindowsDesk command.

	* fvwm/fvwm2.1: clarified description of Desk cmd, documented
	WindowsDesk as obsolete.

1998-12-09  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/builtins.c (add_item_to_decor): a little clean up
	(SetBorderStyle): fix for MiniIcon coredump
	(SetBorderStyle): fix for MiniIcon coredump

	* fvwm/resize.c: don't wait for buttons up before resizing a window
	when initially placing it

	* fvwm/move.c (moveLoop): a little clean up
	(DisplayPosition): a little clean up
	(Keyboard_shortcuts): patch to make cursor key work when placing
	windows invoked from a menu
	(Keyboard_shortcuts): removed old reference to menu code (not called
	anymore from there).

	* fvwm/misc.h:
	* fvwm/builtins.c (DeferExecution):
	* fvwm/resize.c (resize_window):
	* fvwm/move.c (Keyboard_shortcuts):
	(moveLoop): patch to Keyboard_shortcut (was used for other things than
	move/resize which didn't work well).

1998-12-08  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/menus.c (menuShortcuts): fixed coredump with isgraph

	* fvwm/resize.c:
	Removed globals constrainx/constrainy. Calculate them in ConstrainSize
	when needed. This fixes the growing windows bug. Had to change the
	signature of ConstrainSize.

	* fvwm/misc.h:
	* fvwm/resize.c (resize_window):
	(DoResize):
	(ConstrainSize):
	* fvwm/add_window.c (AddWindow):
	(AddWindow):
	* fvwm/builtins.c (Maximize):
	* fvwm/events.c (HandlePropertyNotify):
	(HandleConfigureRequest):
	added new parameter fNoConstrain to ConstrainSize function

1998-12-05  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/builtins.c (ReadButtonFace): fixed memory leak (?)
	(SetEnv): fixed memory leak

	* fvwm/windows.c (do_windowList): DestroyMenu called as soon as
	possible (might cause problems with WindowList as doubleclick action).

1998-12-02  Paul D. Smith  <psmith@gnu.org>

	* fvwm/fvwm.c (main): Add FVWM_MODULEDIR to the environment
	containing the default module directory.
	* fvwm/fvwm2.1: Document it.

	* archive/purify/purify.fvwm2rc: Comment out things that cause
	heap corruption, until they can be fixed.

	* fvwm/icons.c (Iconify): Initialize winattrs to empty to avoid
	possible uninitialized memory reads in your_event_mask.

	* fvwm/colors.c (AllocLinearGradient): Added an error message for
	invalid npixels.

1998-12-01  Paul D. Smith  <psmith@gnu.org>

	* fvwm/builtins.c (AddTitleStyle): Free the parm string each time
	through the loop.

	* fvwm/menus.c (DestroyMenu): Free the menu name string.

	* fvwm/builtins.c (set_animation): Free the first option string.

	* fvwm/bindings.c (remove_binding): Free the key_name and Action
	strings when deleting the binding.

	* fvwm/windows.c (do_windowList): Make sure to free func, if not
	already freed.  Use tfunc to contain the menu title, not tlabel
	(which is fixed-size).

	* libs/Parse.c (GetOnePercentArgument): Free the token returned
	from GetNextToken().

	* fvwm/builtins.c (ReadButtonFace): Free the perc array.

	* fvwm/fvwm.c (DestroyFvwmDecor): Free the Decor font if one was
	allocated.

	* fvwm/builtins.c (SetMenuStyle): Free the StdFont before
	resetting it.

	* libs/Parse.c (DoGetNextToken): Cast chars to unsigned before
	using the is*() functions on them, to handle 8-bit chars
	correctly.
	(PeekToken): Ditto.

1998-11-30  Paul D. Smith  <psmith@gnu.org>

	* fvwm/colors.c (nocolor): Make sure we don't call fvwm_msg with a
	NULL ptr for a string.

1998-11-30  Paul D. Smith  <psmith@gnu.org>

	* configure.in: Changed version to 2.1.4.
	* NEWS: Ditto.

	Released fvwm 2.1.3 beta (CVS tag version-2_1_3).

1998-11-30  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/fvwm.c (main): removed unused option -outfile

	* fvwm/fvwm2.1: added description for undocumented options -blackout
	and -h. Fixed type (ame -> same)

	* fvwm/fvwm.c (StartupStuff): removed old ClickTime patch (the new one
	is more rigorous).

1998-11-29  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/builtins.c (SetClick):
	* fvwm/fvwm.c (InitVariables):
	(main):
	More speedup with ClickTime during startup. A negative value will
	becone positive when the event loop is entered (before that the user
	cannot give input anyway).

	* fvwm/fvwm.h:
	* fvwm/fvwm.c: added global flag fFvwmInStartup. This is set to False
	when the event loop is entered.

1998-11-28  Dominik Vogt  <dominik_vogt@hp.com>

	* TODO: updated

	* fvwm/events.c: reindented some code
	(HandleConfigureRequest): Phew, after a 10 hour debug session I was
	finally able to surround and bag the xterm/active icon/resize bug.
	Xterm sends a configure request to resize the icon pixmap window, but
	HandleConfigureRequest dealt with the icon window only. Now what was
	this fuzz about growing windows bugs? Bring 'em on :-[
	(HandleEnterNotify): removed garbage (old ifdef).
	(GetContext): a little speedup

1998-11-27  Bob Woodside  <proteus@pcnet.com>

	* fvwm/fvwm.c, fvwm/fvwm2.1: changed GlobalOpts default from
	ActivePlacementIgnoresStartsOnPage to ActivePlacementHonorsStartsOnPage.

1998-11-27  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/fvwm2.1: entry for 'Direction'

	* fvwm/events.c (HandleMapNotify): changed logic for new
	click-to-focus windows to receive focus (as hinted at by Tim Phipps).

1998-11-26  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/builtins.c (DirectionFunc): implemented ne, se, sw, nw; based
	scoring function of window centers.

	* libs/Parse.c (GetTokenIndex): fixed a coredump with an empty list
	or token

	* fvmw/**: applied patches by Tim Phipps (see below)

	* fvwm/builtins.c (focus_func): cleaned up
	(flip_focus_func): cleaned up

	* fvwm/fvwm2.1: changes on FlipFocus/Focus/WindowList

	* fvwm/focus.c (SetFocus): fixed SetFocus so that calling Focus from a
	function moves the windowlist around to make the target window appears
	at the top of the windowlist.

	* fvwm/windows.c (do_windowList): Applied alt-tab/unsort windowlist fix

	* fvwm/builtins.c (DirectionFunc): fixed coredump (empty direction)

1998-11-24  Dominik Vogt  <dominik_vogt@hp.com>

        * fvwm/windows.c (do_windowList): applied alt-tab patch by Tim Phipps

1998-11-24  Paul D. Smith  <psmith@gnu.org>

	* fvwm/functions.c (FindBuiltinFunction): Cast the return value
	for systems where bsearch() isn't declared to return void*.

	* acconfig.h: Include malloc.h if it's found, and we don't have
	STDC_HEADERS (just in case).

	* libs/ModParse.h (LFindToken):  Remove this macro.  It's not
	used, and it uses a non-standard function lfind().  Best to not
	use it at all.
	(search.h): Removed #include.

1998-11-24  Dan Espen  <dane@mk.bellcore.com>

	*   fvwm/builtins.c  (SetColorLimit):  Check    return  code  from
 	GetIntegerArguments not equal 1 for arg parse failure test.

1998-11-24  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/virtual.c (checkPanFrames): made sure appropriate pan frames
	are visible (Tim Phipps)

	* fvwm/fvwm.h: cleaned up some pan frame stuff (Tim Phipps)

	* fvwm/add_window.c (AddWindow):
	applied border width patch by Tim Phipps

	* fvwm/builtins.c (SetDeskSize):
	replaced GetTwoArguments with GetIntegerArguments and
	GetRectangleArguments, some cleanup
	(movecursor): rewrote function to get consistent behaviour.

	* fvwm/builtins.c (SetEdgeResistance):
	* fvwm/virtual.c (goto_page_func):
	* fvwm/move.c (move_window_doit):
	replaced GetTwoArguments with GetIntegerArguments

	* fvwm/misc.c:
	* fvwm/misc.h:
	* libs/Parse.c:
	* libs/fvwmlib.h:
	moved GetOneArgument and GetTwoArguments to libs/Parse.c and renamed
	them to Get...PercentArgument(s). GetTwoArguments remains as a wrapper
	to GetTwoPercentArguments. Added GetRectangleArguments function.

1998-11-23  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/misc.c (GetOneArgument): rewrote function to do something
	useful

	* fvwm/builtins.c (DirectionFunc): applied patch for better scoring
	funtion.

	* fvwm/builtins.c (iconify_function):
	(SetClick):
	(SetColorLimit):
	(SetSnapAttraction):
	(SetOpaque):
	* fvwm/module.c (set_mask_function):
	replaced GetOneArgument with GetIntegerArguments

1998-11-22  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/builtins.c: Fixed broken string (contained a newline)

	* extras/FvwmCommand/FvwmCommand.c: fixed >= comparison on pointer

	* modules/FvwmButtons/FvwmButtons.c: fixed pager breakage bug

	* fvwm/bindings.c (Parse...Entry): fixed compile error (void returned)

1998-11-23  Dan Espen  <dane@mk.bellcore.com>

	* NEWS: Moved stuff from end of old ChangeLog into the NEWS file.

1998-11-22  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/**:
	* libs/**: removed trailing spaces from the files I touched since 11-20

	* fvwm/fvwm.c (StartupStuff): Added call to checkPanFrames to make
	page flipping via EdgeScroll work with FvwmCpp too.

	* fvwm/misc.c (Destroy): remove window from window list before doing
	anything else. Should fix race condition coredump with
	Close/Delete/Destroy.

	* TODO: updated

	* FAQ (44): added section for FvwmButtons/Swallow

1998-11-21  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/menus.c (AddToMenu): fixed uninitialised memory read in item2
	and s.

	* fvwm/builtins.c (DirectionFunc):
	(Circulate): fixed free of possible NULL pointer.

	* fvwm/style.c (ProcessNewStyle): fixed uninitialised memory read:
	'BUTTON'/'NOBUTTON' with invalid button number

	* fvwm/add_window.c (AddWindow): fixed uninitialised memory read:
	attributes.background_pixmap not set.

	* libs/Parse.c (DoGetNextToken): cleaned up a bit because of the
	array bounds violation in SetGlobalOptions, but I don't believe that
	fixes it. Reformatted for further debugging.

	* fvwm/functions.c (find_func_type): a little speedup

1998-11-20  Bob Woodside  <proteus@pcnet.com>

	* add_window.c
	* placement.c
	* style.c
	Fixed StartsOnDesk/StartsOnPage bug that prevented a desk or page
	specification of -1 from working.

	* AUTHORS:  added entry.

1998-11-20  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/complex.c (expand): a little speedup

	* fvwm/functions.c (ExecuteFunction): a little speedup

	* fvwm/menus.c (NewMenuRoot):
	(FMenuMapped):
	fixed uninitialised memory reads

	* fvwm/menus.c (NewMenuRoot):
	put parentheses around macro parameters

	* fvwm/menus.c (NewMenuRoot):
	(MakeMenu):
	* fvwm/windows.c (do_windowList):
	* fvwm/misc.h:
	* fvwm/builtins.c (add_item_to_func):
	(add_item_to_menu):
	changed NewMenuRoot signature

	* configure.in: Version 2.1.2 released (CVS tag = version-2_1_2)
	and current version bumped to 2.1.3.

1998-11-19  Dominik Vogt  <dominik_vogt@hp.com>

	* libs/envvar.c (strIns): fixed array bounds read viaolation

	* fvwm/menus.c (AddToMenu): multiple tabs allowed between left and
	right part of menu item name; all other tabs are replaced by spaced

	* fvwm/fvwm2.1: updated AddToMenu/AddToFunc syntax

	* fvwm/builtins.c (CreateFlagString):
	(FreeConditionMask):
	(DefaultConditionMask):
	(CreateConditionMask):
	(MatchesContitionMask):
	(Circulate):
	(DirectionFunc):
 	Applied 'Direction' patch (added and modified some functions).

	* fvwm/builtins.c (SetMenuStyle): fixed coredump (NULL action
	referenced with NEXT style).

1998-11-18  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/move.c (moveLoop): Applied SnapAttraction update patch

	* fvwm/resize.c (resize_window):  fixed bug that prevented moving from
	a mouse button from working with ClickToFocus

	* fvwm/move.c (moveLoop): Applied SnapAttraction patch.
	(moveLoop): fixed bug that prevented moving from a mouse button from
	working with ClickToFocus

	* fvwm/builtins.c (SetMenuStyle1): fixed memory leak

	* fvwm/menus.c (MakeMenu): bugfix: Titles in newmenu patch drawn too
	far right.

	* fvwm/**: Applied newmenu patch by German Gomez Garcia.

1998-11-18  Paul D. Smith  <psmith@gnu.org>

	* fvwm/menus.c (NewMenuRoot): Initialize the in_use flag.

	* fvwm/builtins.c (ReadButtonFace): Don't free() NULL pointers.
	(CursorStyle): Message was printing already-freed memory; don't
	free until afterwards.

1998-11-17  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/misc.c (Destroy): applied mini-icon compile patch by Tim Phipps

Mon Nov 16 20:30:16 1998  DanEspen  <dje@blue>

	* libs/ColorUtils.c (BRIGHTNESS_FACTOR): Set adjustment factors
	to fvwm2 defaults instead of scwm numbers.

Sun Nov 15 12:24:12 1998  DanEspen  <dje@blue>

	* NEWS: Document shadow/hilite change.

1998-11-15  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/builtins.c (wait_func): Wait builtin can be aborted with
	Control-Escape.
	(movecursor): fixed bugs: cursor move didn't work on edge of screen;
	didn't compile if NON_VIRTUAL is defined

1998-11-14  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/builtins.c (CursorStyle): fixed coredump
	(echo_func): empty line is ok now
	(set_animation): rewrote parser to fix coredump (empty config line)
	(SetMenuStyle): fixed 'exit' if no font is given
	(add_item_to_func): fixed coredump (empty config line)
	(add_item_to_menu): empty name not allowed

Sat Nov 14 19:56:11 1998  DanEspen  <dje@blue>

	* libs/Picture.c: Made  PictureCMap and PictureSaveDisplay globals
 	so ColorUtils.c can see the result of calling InitPictureCMap.

	* libs/fvwmlib.h:  moved   GetShadow,  GetHilite  prototypes  from
 	fvwm/misc.h

	* fvwm/misc.h:  moved    GetShadow,   GetHilite  prototypes  to
 	libs/fvwmlib.h

	* fvwm/builtins.c: Removed  funny use of  externs  for the strings
 	"black" and "white".

	* libs/Makefile.am (libfvwm_a_SOURCES): Added ColorUtils.c,
	got automake, now generating Makefile.in.

	* fvwm/colors.c: moved GetShadow, GetHilite to libs/ColorUtil.c.

1998-11-13  Bob Woodside  <proteus@pcnet.com>

	* Upgraded FvwmCommand to 1.5.1 and FvwmConsole to 1.3 - the latest
	versions from Toshi Isogai.

	* Added the StackingOrder rewrite

1998-11-12  Dan Espen  <dane@mk.bellcore.com>

	* Under the sample.fvwmrc directory, removed everything in the
	BradyMontz directory.  This kind of "theme" stuff will be distributed
	separatly.

1998-11-12  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/misc.c (free_window_names): simplified code
	(Destroy): fixed memory leaks: icon_maskPixmap and mini_icon were
 	not free'd

	* fvwm/add_window.c (AddWindow): removed stripcpy patch. Old stuff was
	ok.

	* fvwm/menus.c (AddToMenu): fixed memory leak (freeing menu items)

	* fvwm/read.c (ReadSubFunc): coredump fix and a little cleanup

1998-11-11  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/menus.c (menuShortcuts): removed call of Keyboard_shortcuts
	(dosn't make sense).

	* fvwm/move.c (Keyboard_shortcuts): fixed coredump when no window
	has the focus (e.g. possible with menus and MouseFocus policy).

	* fvwm/bindings.c (ParseKeyEntry): Speedup for Key binding parsing
	(ParseBindEntry): Merged ParseMouseEntry and ParseKeyEntry.

	* fvwm/menus.c (FreeMenuItem): function added

1998-11-10  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/menus.c (MakeMenu): Border size fix by Ryomi Murai
	(PaintEntry): Drawing fixes by Ryomi Murai

	* fvwm/move.c (move_window_doit):
	* fvwm/misc.c:
	* fvwm/misc.h:
	* fvwm/fvwm2.1:
	Applied Warp option patch for Move by Tim Phipps (see below).

	* fvwm/misc.{c,h}: changed GetPositionArguments to GetMoveArguments
	and added parsing for optional Warp flag for Move/AnimatedMove

	* fvwm/move.c: Added optional Warp flag for Move/AnimatedMove

	* fvwm/fvwm2.1: Documented optional Warp flag for Move/AnimatedMove

1998-11-10  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/builtins.c (SetMenuStyle): fixed memory leak.
	(SetXOR): fixed memory leak
	(ReadButtonFace): fixed memory leak.

	* fvwm/menus.c (MakeMenu): fixed memory leak.

	* fvwm/add_window.c (AddWindow): fixed XGetCommand memory leak.

	* fvwm/add_window.c (AddWindow): I think I fixed the XGetWMName
	memory leak. The manpage doesn't say that the name storage must be
	free'd, but it does not coredump and is hinted at by other manpages(?)

1998-11-09  Dominik Vogt  <dominik_vogt@hp.com>

	* FvwmButtons/parse.c (seekright): switched to new syntax of
	DoGetNextToken.

	* modules/FvwmIconMan/readconfig.c: Fixed bug that prevented function
	lists from working if they contained a comma. Fixed a memory leak too.

	* libs/Parse.c (DoGetNextToken): Added parameter to return the
	character that ended the string.

Mon Nov  9 18:51:19 1998  Steve Robbins  <steve@nyongwa.montreal.qc.ca>

	* Makefile.am (EXTRA_SUBDIRS): Removed textures from list of SUBDIRS.

1998-11-09  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/move.c: Applied the bugfix for the move-lagging-behind
	problem.

	* modules/FvwmRearrange: new module added (merged FvwmTile and
	FvwmCascade).

	* fvwm/fvwm2.1: updated and cleaned up the manpage, reformatted
	examples to a consistent style

1998-11-08  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/resize.c (resize_window):
	* fvwm/move.c (moveLoop):
	Cleaned up aborting with a mouse button:
	If the move/resize started with a button down, pressing any button
	aborts the operation. If no button was down, pressing button 1 confirms
	the operation, any other button aborts.

	* fvwm/builtins.c (SetClick):
	* fvwm/modconf.c (SendDataToModule):
	* fvwm/fvwm.c (StartupStuff): Patch to speed up (re)starting fvwm.
	Scr.ClickTime is set to -Scr.Clicktime so functions that use this
	value do not wait for user input. Saves some seconds during startup,
	depending on the ClickTime value in the startup file.

	* libs/Picture.c (CachePicture):
	* fvwm/modules.c (executeModule):
	fixed bugs introduced during the merge on saturday

1998-11-08  Paul D. Smith  <psmith@gnu.org>

	* fvwm/icons.c (GetXPMFile): Free pixmap after use.

1998-11-07  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/menus.c (MenuInteraction): fixed bug with non-animated
	fvwm-menus and <left> in a submenu

	* fvwm/windows.c: removed obsolete code, added safety checks

	* libs/Picture.c (GetPicture):
	(CachePicture):
	(findIconFile):
	fixed memory leak

	* fvwm/move.c (moveLoop): fixed move from button menu

	* fvwm/resize.c (resize_window): fixed resize from button menu

	* fvwm/bindings.c:
	* fvwm/builtins.c:
	* fvwm/complex.c:
	* fvwm/functions.c:
	* fvwm/menus.c:
	* fvwm/misc.c:
	* fvwm/modconf.c:
	* fvwm/module.c:
	* fvwm/read.c:
	* fvwm/style.c:
	* modules/FvwmIconMan/readconfig.c:
	* libs/Parse.c:
	Changed behaviour of GetNextToken() to fix memory leaks.
	Some parsing stuff may be instable now (coredumps!)

1998-11-06  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/module.c (executeModule): fixed memory leaks

	* fvwm/modconf.c (DestroyModConfig): fixed memory leaks

	* fvwm/menus.c (MrPopupForMi): some optimizing and cleanup
	(GetPopupOptions): some optimizing, fixed memory leak

	* libs/Parse.c (CmpToken): removed old code: GetToken() and old
	version of GetNextToken.
	(SkipNTokens): Added for smoother parsing.

	* fvwm/functions.c (ExecuteFunction): Cleanup for mem-leakage
	fixes.

Sat Nov  7 02:01:41 1998  Steve Robbins  <steve@nyongwa.montreal.qc.ca>

	* configure.in: Version 2.1.1 released (CVS tag = version-2_1_1)
	and current version bumped to 2.1.2.

1998-11-06  Paul D. Smith  <psmith@gnu.org>

	* fvwm/Makefile.am (fvwm2_DEPENDENCIES): Add a dependency on libfvwm.a.

	* libs/Picture.c (CachePicture): Free the pathname returned by
	findIconFile().

	* libs/fvwmlib.h (DB): New debugging/logging definitions.

	* libs/debug.c: New file for a uniform debugging library.
	* libs/Makefile.am (libfvwm_a_SOURCES): Build it.

	* fvwm/fvwm.c (ResetAllButtons): Rewrote to be a bit faster.  Make
	sure we reset the button flags in addition to the rest of the button.

	* configure.in: Add missing checks for memmove(), memcpy(), and
	strchr().  Check also for malloc.h vs. stdlib.h headers, and
	change to positive check for string.h instead of strings.h--we
	want to use the former where possible.  Check for vfprintf().

	* acconfig.h: Rework definitions for memmove() and memcpy() (note
	that some systems (SunOS) have memcpy() but not memmove(), so
	check them separately).  Rework header inclusion based on
	tried-and-true methods from GNU make's configuration.

	* fvwm/menus.c (scanForPixmap): Don't define or malloc()
	save_instring unless we're going to use it
	(UGLY_WHEN_PIXMAPS_MISSING is defined).  Also, make sure to always
	free it (we had a bad memory leak here).

1998-11-05  Bob Woodside  <proteus@pcnet.com>

	* folded in StartsOnPage style modifications.

1998-11-05  Paul D. Smith  <psmith@gnu.org>

	* configure.in: Check for the div() function (for extras/FvwmScript).
	Remove check for stdarg.h; we'd need a lot fancier config to allow
	the use of varargs.h or something else; for now assume we have it.

	* fvwm/module.c (make_vpacket): New function: creates a module
	packet from a va_list.  This is the most basic function: all
	packet creating functions will eventually call this one to (at
	least) fill in the header information.  This is the only place
	that's done, now.
	(make_packet): A variadic function that uses make_vpacket() to
	construct the packet.
	(SendPacket): A generic function to send a packet to a module.
	Rewrite to be variadic instead of taking a set number of
	arguments. Use make_vpacket() to construct the packet.
	(BroadcastPacket): Renamed from Broadcast(), and removed
	Broadcase_v() which is now redundant.  A variadic function to
	broadcast a packet to all modules.  Use make_vpacket() to
	construct the packet.  Rewrote to construct the packet first, then
	send the same one to all modules, rather than calling SendPacket()
	multiple times (each time reconstructing the same packet).
	(CONFIGARGS): New macro to provide the arguments for the Config
	packet.
	(SendConfig): Rewrote to invoke SendPacket() passing the proper
	config arguments (uses CONFIGARGS).
	(BroadcastConfig): Rewrote to invoke BroadcastPacket() passing the
	proper config arguments (uses CONFIGARGS).
	(make_named_packet): A generic function to construct a packet
	where the last item is a name (variable length string).  Takes a
	name and a variable number of arguments.  Uses make_vpacket().
	(SendName): Use make_named_packet() to construct the packet to
	send.
	(BroadcastName): Use make_named_packet() to construct the packet
	to send.  Only construct it once, then send that same data to each
	module, rather than reconstructing it each time.
	(SendMiniIcon): Use make_named_packet() to construct the packet to
	send.
	(BroadcastMiniIcon): Use make_named_packet() to construct the packet
	to send.  Only construct it once, then send that same data to each
	module, rather than reconstructing it each time.
	(send_list_func): Remove padding arguments from SendPacket()
	invocations.

	* fvwm/virtual.c (MoveViewport): Call new BroadcastPacket().
	(changeDesks): Call new BroadcastPacket().

	* fvwm/move.c (move_window_doit): Call new BroadcastPacket().

	* fvwm/misc.c (Destroy): Call new BroadcastPacket().
	(RaiseWindow): Call new BroadcastPacket().

	* fvwm/icons.c (AutoPlace): Call new BroadcastPacket().
	(DeIconify): Call new BroadcastPacket().
	(Iconify): Call new BroadcastPacket().

	* fvwm/events.c (HandleFocusIn): Call new BroadcastPacket().
	(HandlePropertyNotify): Call new BroadcastPacket().
	(HandleMapNotify): Call new BroadcastPacket().
	(HandleConfigureRequest): Call new BroadcastPacket().

	* fvwm/builtins.c (WindowShade): Call new BroadcastPacket().
	(SetDeskSize): Call new BroadcastPacket().

	Fix errors found by Purify:

	* fvwm/module.c (SendName): Zero out the end of the message to
	avoid uninitialized memory reads.

	* fvwm/decorations.c (GetOlHints): Don't free(NULL).  This is OK
	in ANSI C, but it's not completely portable.

	* libs/Picture.c (CachePicture): Don't look past the end of
	allocated memory.
	(LoadPicture): Free pixmaps when we're done with them.

	* fvwm/builtins.c (SetMenuStyle): Free a previous font if it exists.
	(LoadIconFont): Same.
	(LoadWindowFont): Same.

	* fvwm/fvwm.c (InitVariables): Initialize Scr.IconFont.
	(InitFvwmDecor): Set TitleHeight and the font pointer since
	otherwise they might be used uninitialized (in LoadWindowFont).

1998-11-05  Steven Michael ROBBINS  <stever@jeff.cs.mcgill.ca>

	* libs/XResource.c (MergeCmdLineResources): DEC's compiler claims
	that a '&' in front of the array "default_opts" is ignored, so I
	removed it.

	* libs/System.h: Removed.
	* libs/System.c: Removed mygethostname(), replaced with
	gethostname.c from some GNU utils package.  Renamed mygetostype()
	to just getostype(), in parallel with gethostname().

	* libs/Strings.c: Pulled out mystrcasecmp() and mystrncasecmp() to
	their own files.

	* libs/Parse.c (PeekToken): Add const qualifier to variable 'p' to
	stop pstr from losing its constness.

	* fvwm/style.c: Cast arguments to memcpy() to placate gcc on DEC
	alpha.

	* fvwm/module.c: Explicit checks for the presence of <stdarg.h> or
	<varargs.h>.  If using <stdarg.h>, use the two-argument form of
	va_start(), otherwise the single-argument form.

	* fvwm/menus.c (menuShortcuts): Fixed parameters in call to
	XLookupString().

	* fvwm/fvwm2.1: Replace references to Fvwm.tmpl with current
	equivalents.  Other fixes from Austin Donelly.

	* fvwm/functions.c (func_comp): Put const qualifiers on the
	arguments, to match requirements for bsearch().

	* fvwm/builtins.c: Moved strerror() function to libs/strerror.c.

	* libs/sleep.c: Removed and globally changed sleep_a_little() to
	usleep().

	* libs/gethostname.c:
	* libs/strerror.c:
	* libs/usleep.c:
	* libs/strcasecmp.c:
	* libs/strncasecmp.c:

	* libs/Makefile.am: Added the above files.  Each file is compiled
	into libfvwm only if the system libraries are missing the
	corresponding function.  Globally replaced the "my"-version of
	these functions with the standard one.

	* include config.h: Moved #include to the top of the file in some
	but not yet all the files that include config.h.

	* main: All main() functions return int rather than void.

	* symbols: Changed the ifdefs around header includes to read
	#if HAVE_FOO_H, rather than a maze of machine-type symbols.

	* sun_headers.h:
	* sunos_headers.h:
	* alpha_header.h: Removed all traces of these.  Removed
	declarations of system functions when a conflict noticed.

	* configure.in: Require autoconf 2.12 as prerequisite.  Changed
	version string to 2.1.1.  Added more checks.

	* acconfig.h: Code to define str[r]chr and mem{cpy,move} if not
	available.  Removed obsolete FVWM_INLINE and globally replaced
	with "inline".

	* Makefile.am (AUTOMAKE_OPTIONS): Set to 1.3b, so that automake
	complains if it is too old.

	* utils/xpm-reduce.c
	* utils/xpm-reduced-rgb.txt: removed; obsoleted by a runtime
	colour reduction scheme.

1998-11-04  Paul D. Smith  <psmith@gnu.org>

	* Fix problems discovered by Purify:

	* fvwm/menus.c (MenuInteraction): Don't try to call
	GetPopupOptions() until we know we're looking at a popup menu.

	* fvwm/misc.c (GetOneMenuPositionArgument): If the returned token
	is an empty string, don't try to parse it.

1998-11-04  Dominik Vogt <dominik_vogt@hp.com>

	* fvwm/fvwm2.1:
	* fvwm/builtins.c (stick_function):
	* fvwm/move.c (move_window_doit):
	Change for 'Stick' to allow to make windows sticky that are on
	a different screen.

	* modules/FvwmAudio/FvwmAudio.c:
	* modules/FvwmEvent/FvwmEvent.c: Fixed rplay build problem

	* modules/FvwmEvent/Makefile.in (mkinstalldirs):
	Added missing rplay library to link options

	* fvwm/menus.c (FPopupMenu):
	Fixed broken left menus with mwm/noanimation style when near the
	right edge of screen.

1998-11-04  Dan Espen  <dane@mk.bellcore.com>

	* TODO: Renamed TO-DO to standard name TODO

	* NEWS: Added web docs.html to end of NEWS file.

Wed Nov  4 11:09:11 1998  Steve Robbins  <steve@nyongwa.montreal.qc.ca>

	* added some files to cvs: modules/ChangeLog, extras/ChangeLog,
	NEWS, and AUTHORS.

	* DEVELOPERS: replaces README.autoconf.

1998-11-04  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/events.c (HandlePropertyNotify): Fixed the fix
	for TransientFor Bug

	* extras/fvwmperl/*: Added correct copyright notices.

1998-11-03  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/events.c (HandlePropertyNotify):
	Added bugfix for TransientFor problem by Duane Guingrich.

	* TO-DO (Cleanups): Updated the TO-DO list

	* fvwm/misc.c (GetPositionArguments):
	Added MkLinux fix from Mike Tilstra

Tue Nov  2 00:35:30 1998  Dominik Vogt  <dominik_vogt@hp.com>

	* fvwm/builtins.c:
	* fvwm/complex.c:
	* fvwm/menus.c:
	* fvwm/move.c:
	* fvwm/placement.c:
	* fvwm/resize.c:
	fixed XBell bug

	* modules/FvwmButtons/CHANGES:
	* modules/FvwmButtons/FvwmButtons.h:
	* modules/FvwmButtons/FvwmButtons.1:
	* modules/FvwmButtons/TODO:
	* modules/FvwmButtons/button.c:
	* modules/FvwmButtons/draw.c:
	* modules/FvwmButtons/parse.c:
	Left/Right/Center option for buttons, did some cleanup

	* ...:
	cleaned up lots of files for lclint

Sun Nov  1 12:52:59 1998  Steve Robbins  <steve@nyongwa.montreal.qc.ca>

	* sample.fvwmrc/system.fvwm2rc*: Removed the lines setting
	ModulePath, IconPath, and PixmapPath, since the compiled-in
	defaults can be set using configure.

Sun Nov  1 12:26:01 1998  Steve Robbins  <steve@nyongwa.montreal.qc.ca>

	* modules/FvwmM4/FvwmM4.c (m4_defs):
	* modules/FvwmCpp/FvwmCpp.c (cpp_defs): Split FVWMDIR definition
	into FVWM_MODULEDIR and FVWM_CONFIGDIR.

Sun Nov  1 09:54:14 1998  Steve Robbins  <steve@nyongwa.montreal.qc.ca>

	* extras/FvwmTaskBar/Goodies.c: Restored Goodies.c from -r 1.1 of
	the repository.

	* libs/Picture.c (GetPicture): Removed the #ifdef NotUsed from
	around this function.  Appended "int color_limit" to the list of
	parameters.  Restored GetPicture() declaration to fvwmlib.h.

	* extras/FvwmTaskBar/Start.c: Fixed call to GetPicture function,
	using "-1" as the color_limit (i.e., no color limit).

Sun Nov  1 09:19:08 1998  Steve Robbins  <steve@nyongwa.montreal.qc.ca>

	* configure.in: Set VERSION to 2.1.0.

Sat Oct 31 06:44:50 1998  Steve Robbins  <steve@nyongwa.montreal.qc.ca>

	* Basic autoconfiguration support added.

Sat Oct 31 06:02:37 1998  Steve Robbins  <steve@nyongwa.montreal.qc.ca>

	* modules/FvwmCpp:
	* modules/FvwmM4: Changed FVWMDIR to FVWM_MODULEDIR.

