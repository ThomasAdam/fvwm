2002-08-19  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/style.c (merge_styles):
	fixed style defaults getting stuck to on once set

	* configure.in:
	fixed a number of non portable uses of the "test" command and unified
	the used syntax of all calls to reduce chance of copy-and-paste
	problems

2002-08-17  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	* fvwm/fvwm.1.in:
	minor typos and improvements;
	better string quotings and detection of fribidi for autoconf-2.53

	* fvwm/Makefile.am:
	don't include *.in in EXTRA_DIST, they are auto-included


2002-08-17  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleConfigureRequest):
	(HandlePropertyNotify):
	(is_resizing_event_pending):
	fixed uninitialised return code of test_resizing_event

2002-08-16  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/decorations.c (SelectDecor):
	* fvwm/style.h:
	* fvwm/window_flags.h:
	* fvwm/fvwm.h:
	moved common.s.has_no_border window flag to common.has_no_border to
	fix windows getting stuck without a border once the HandleWidth or
	BorderWidth was set to 0 and then increased again

	* fvwm/fvwm.1.in:
	removed reference to BUGS and TODO

	* configure.in:
	moved a lot of constant definitions to configure.in; the fvwm.lsm and
	fvwm.1 files don't have to be updated for a release anymore; the release
	number and date are set by configure

	* fvwm/fvwm.c (setVersionInfo):
	fixed output of "fvwm -version"

2002-08-15  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/style.c (style_parse_one_style_option):
	Old focus styles override less of the behaviour specified with the
	FP... styles; use defaults instead without setting the mask
	(style_parse_one_style_option):
	removed the styles MouseFocusClickIgnoreMotion and
	MouseFocusClickIgnoreMotionOff, use the corresponfing FP... styles
	instead
	(style_parse_one_style_option):
	ClickToFocusRaises now works only on the client window, not on the
	decorations
	(style_parse_one_style_option):
	fixed FocusFollowsMouse style
	(style_set_old_focus_policy):
	moved old default focus settings to a separate function, simplified code

2002-08-14  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm.1: Add hot-spot is an offset information,
	fix spelling, "hot-spot", not "hotspot" (too bad its wrong in
	the xpm docs).

2002-08-14  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/style.c (style_parse_focus_policy_style):
	fixed parsing of FPFocusClickButtons and FocusClickModifiers

	* libs/Makefile.am:
	added missing files

	* fvwm/events.c (HandleConfigureRequest):
	fixed ConfigureRequest race condition

2002-08-13  Dominik Vogt  <dominik.vogt@gmx.de>

	* configure.in:
	quote environment variables

2002-08-13  olicha  <olivier.chapuis@free.fr>

	* NEWS:
	Color limit and dithering news

	* fvwm/fvwm.1:
	Added a minimal doc for the -color-limit option

	* fvwm/builtins.c (CMD_ColorLimit):
	ColorLimit is obsolete

	* fvwm/builtins.c (ReadDecorFace):
	* libs/PictureUtils.c (my_dither_depth_15_16_init):
	(PictureAllocColorAllProp):
	Implemented dithering for depth 16 and 15. This is off by default
	in colorset (use the dither colorset option) and on by default
	for window title gradient. Gradient are visibly more smooth.

	* libs/PictureUtils.c (*):
	Some cleanup

2002-08-13  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/fvwm.1:
	corrected the pixmap cursor description, added an example

2002-08-13  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menus.c (select_menu_item):
	(paint_menu_gradient_background):
	fixed a redrawing problem with H/Vgradient menu faces
	(MenuInteraction):
	fixed a minor problem w/ entering submenus via keyboard

2002-08-12  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/move_resize.c (CMD_ResizeMove):
	(CMD_Resize):
	(CMD_Maximize):
	(CMD_ResizeMaximize):
	(CMD_ResizeMoveMaximize):
	commands can be used on iconified windows again

	* ONEWS:
	* NEWS:
	moved pre-2.2 NEWS to ONEWS

	* libs/strdup.c:
	* libs/safemalloc.c:
	* libs/envvar.c:
	* libs/alloca.c:
	* libs/Target.c:
	* libs/Parse.c:
	* libs/Bindings.c:
	* fvwm/menustyle.c:
	* fvwm/menus.c:
	* fvwm/menuitem.c:
	* fvwm/menucmd.c:
	* fvwm/frame.c:
	* fvwm/events.c:
	* fvwm/borders.c:
	let config.h include strinh.h or strings.h

	* fvwm/style.c (style_parse_one_style_option):
	(style_parse_one_style_option):
	fixed icon box crash

	* fvwm/bindings.c (update_nr_buttons):
	fixed extra buttons on window decorations

	* fvwm/style.c (style_parse_one_style_option):
	fixed parsing of the FP... and !FP... styles

2002-08-12  Bob Woodside  <dumbledore@woodsway.com>

	* fvwm/style.c (style_parse_one_style_option):
	Fixed a typo so that ClickToFocusRaisesOff actually turns
	the option off instead of on.

2002-08-12  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/focus.c (focus_grab_buttons):
	only grab necessary buttons on the client window

2002-08-11  olicha  <olivier.chapuis@free.fr>

	* libs/PictureUtils.c (PICTURE_DEBUG_COLORS_ALLOC_FAILURE):
	Removed some debug code

	* fvwm/fvwm.c (main):
	(usage):
	Added -color-limit to fvwm usage

2002-08-11  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/style.c (style_parse_one_style_option):
	(style_parse_focus_policy_style):
	added style options "FP..." to control focus policy
	removed OverrideGrabFocus and AllowGrabFocus styles

	* fvwm/style.c (merge_styles):
	fixed style defaults != 0

	* fvwm/focus.c (__restore_focus_after_unmap):
	fixed a bug w/ reverting the focus from transients to the parent

	* fvwm/ewmh.c (ewmh_HandleDesktop):
	* fvwm/style.c (style_parse_one_style_option):
	fixed defaults for various focus styles

	* NEWS:
	updated for 2.4.9

	* fvwm/frame.c (frame_mrs_resize_move_windows):
	backed out anti-flicker patch that slowed down command processing

	* fvwm/bindings.c (update_nr_buttons):
	(ParseBinding):
	fixed sluggish processing of mouse bindings

	* fvwm/events.c (__handle_bpress_action):
	fixed drawing of pressed decorations w/o bindings

	* fvwm/frame.c (frame_move_resize):
	removed debug code that broke focus handling

	* fvwm/style.c (style_parse_one_style_option):
	fixed passing the focus click to the app by default

	* fvwm/events.c (__handle_click_to_focus):
	* fvwm/focus.c (set_focus_to_fwin):
	(__set_focus_to_fwin):
	removed drawing code that broke as many places as it fixed; plus it
	cause unnecessary redraws

	* fvwm/events.c (HandleConfigureRequest):
	send a synthetical ConfigureNotify if an application is not granted its
	wishes from a ConfigureRequest; this is necessary for FixedPPosition
	and FixedPSize to work properly; also to be ICCCM compliant
	always force border_width 0 in these events
	in the experimental cr merging code, send a number of cn events equal
	to the number of merged events

	* libs/Parse.c:
	* fvwm/style.c:
	reformatted

	* fvwm/style.c (style_parse_focus_policy_style):
	(style_parse_icon_size_style):
	(style_parse_icon_box_style):
	(style_parse_icon_grid_style):
	(style_parse_icon_fill_style):
	(style_parse_one_style_option):
	(parse_and_set_window_style):
	split into separate functions
	(style_parse_one_style_option):
	simplified and cleaned up

	* fvwm/events.h:
	* fvwm/decorations.c:
	* fvwm/cursor.h:
	* fvwm/cursor.c:
	* fvwm/conditional.h:
	* fvwm/conditional.c:
	* fvwm/colorset.h:
	* fvwm/colors.h:
	* fvwm/colors.c:
	* fvwm/colormaps.c:
	* fvwm/bindings.h:
	* fvwm/bindings.c:
	reformatted and cleaned up

2002-08-11  olicha  <olivier.chapuis@free.fr>

	* libs/PictureUtils.c (*):
	* libs/PictureUtils.h:
	* libs/PictureDitherMatrice.h (new file):
	* libs/PictureImageLoader.c (*):
	* libs/PictureImageLoader.h:
	* libs/PictureGraphics.c  (PGraphicsCreateDitherPixmap):
	(PCreateDitherPixmap):
	(PCreateTintedPixmap):
	* libs/PictureGraphics.h:
	* libs/PictureBase.c (PictureInitCMap):
	* libs/PictureBase.h:
	* libs/Picture.c (*):
	* libs/Picture.h:
	* libs/Fxpm.h:
	* libs/Colorset.c (DumpColorset):
	(LoadColorset):
	* libs/Colorset.h:
	* libs/Graphics.c (all gradient functions):
	* libs/fvwmlib.h:
	* fvwm/screen.h:
	* fvwm/move_resize.c (CMD_XorPixmap):
	* fvwm/colors.c (FreeColors):
	* fvwm/builtins.c (CMD_DefaultColors):
	* fvwm/ewmh_icons.c (EWMH_SetIconFromWMIcon):
	* fvwm/builtins.c (FreeDecorFace):
	(ReadDecorFace):
	* fvwm/menus.c (pop_menu_down):
	(paint_menu_gradient_background):
	(scanForPixmap):
	* fvwm/menus.h:
	* fvwm/menustyle.c (menustyle_free_face):
	(menustyle_parse_face):
	(menustyle_free):
	(menustyle_update):
	(menustyle_parse_style):
	(CMD_CopyMenuStyle):
	* fvwm/menustyle.h:
	* fvwm/icons.c (GetIconFromFile):
	* fvwm/builtins.c (ReadMultiPixmapDecor):
	(ReadDecorFace):
	* fvwm/borders.c (border_draw_decor_to_pixmap):
	* fvwm/add_window.c (setup_mini_icon):
	* fvwm/fvwm.c (main):
	* fvwm/colorset.c (free_colorset_background):
	(parse_pixmap):
	(parse_shape):
	(parse_colorset):
	New color limit method and implement dithering in depth <= 8.
	Added a "fvwm picture attributes" structure for loading image.
	Some colors leaks fix. Add some (weak) color leaks. New option
	-color-limit for fvwm. 257 fix. Some prepartion for tint and
	alpha in colorset.

2002-08-11  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Flocale.c (FlocaleRotateDrawString):
	fixed a crash

2002-08-10  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/style.c (parse_and_set_window_style):
	fixed the default for passing the click-to-raise click for mousey
	focus

	* fvwm/events.c (__handle_click_to_focus):
	removed redundant code
	(WaitForButtonsUp):
	fixed sluggish motion event handling when waiting for buttons to be
	released

	* fvwm/focus.c (__set_focus_to_fwin):
	(set_focus_to_fwin):
	fixed redrawing the border w/ mousey focus when the window was entered,
	then the border was clicked before the FocusIn event arrived

	* fvwm/events.c (__handle_bpress_on_managed):
	* fvwm/style.c (parse_and_set_window_style):
	fixed some small focus problems

	* fvwm/fvwm.c:
	reformatted and cleaned up

	* fvwm/fvwm.1:
	formatting fixes

	* fvwm/focus.c (focus_query_click_to_raise):
	(focus_query_click_to_focus):
	* fvwm/style.c (parse_and_set_window_style):
	* fvwm/events.c (__test_for_motion):
	(__check_click_to_focus_or_raise):
	(__handle_focus_raise_click):
	(__is_bpress_window_handled):
	(__handle_click_to_focus):
	(__handle_click_to_raise):
	(__handle_bpress_stroke):
	(__handle_bpress_action):
	(__handle_bpress_on_root):
	(__handle_bpress_on_unmanaged):
	(__handle_bpress_on_managed):
	(HandleButtonPress):
	GFPR: completely rewrote ButtonPress handler, thus finishing the core
	of the new focus code; only the parsing for the new styles is missing

	* fvwm/virtual.c (is_pan_frame):
	new function

2002-08-09  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/add_window.c (AddWindow):
	fixed compile error

	* fvwm/events.c (__handle_focus_raise_click):
	(HandleButtonPress):
	clean up

	* fvwm/events.c (__handle_focus_raise_click):
	* fvwm/fvwm.h (struct):
	* fvwm/style.c (check_window_style_change):
	(parse_and_set_window_style):
	* fvwm/session.c (MatchWinToSM):
	* fvwm/window_flags.h:
	eliminated parts of the old focus code

	* fvwm/focus.c (__set_focus_to_fwin):
	(set_focus_to_fwin):
	* fvwm/fvwm.c (InitVariables):
	* fvwm/add_window.c (destroy_window):
	* fvwm/events.c (__handle_focus_raise_click):
	* fvwm/screen.h (ScreenInfo):
	eliminated Scr.Ungrabbed global

	* fvwm/update.c (apply_window_updates):
	(flush_window_updates):
	* fvwm/icons.c (DeIconify):
	(Iconify):
	* fvwm/move_resize.c (CMD_Maximize):
	(__move_window):
	(handle_stick):
	* fvwm/frame.c (frame_free_move_resize_args):
	(__frame_setup_window):
	* fvwm/virtual.c (do_move_window_to_desk):
	(CMD_GotoDeskAndPage):
	(goto_desk):
	(MoveViewport):
	* fvwm/stack.c (LowerWindow):
	* fvwm/events.c (HandleMapNotify):
	(HandleVisibilityNotify):
	(DispatchEvent):
	(HandleFocusIn):
	(__handle_focus_raise_click):
	(HandleEnterNotify):
	(HandleMapRequestKeepRaised):
	* fvwm/add_window.c (setup_key_and_button_grabs):
	(setup_focus_policy):
	(destroy_window):
	* fvwm/focus.c (__try_other_screen_focus):
	(__set_focus_to_fwin):
	(set_focus_to_fwin):
	(focus_grab_buttons_on_pointer_window):
	(focus_grab_buttons_on_layer):
	(focus_grab_buttons_new):
	cleaned up focus grab handling.

	* fvwm/focus.c (focus_grab_buttons_on_pointer_window):
	clean up

2002-08-08  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/add_window.c (setup_window_structure):
	(AddWindow):
	discarded unused return code

	* fvwm/focus.c (focus_grab_buttons):
	split into two fucntions and fixed a bug with ungrabbing buttons

	* fvwm/focus_policy.c (fpol_query_allow_set_focus):
	* fvwm/style.c (parse_and_set_window_style):
	* fvwm/icons.c (DeIconify):
	(DeIconify):
	* fvwm/events.c (HandleButtonPress):
	(HandleEnterNotify):
	(HandleLeaveNotify):
	(HandleMapNotify):
	(HandleMapRequestKeepRaised):
	* fvwm/add_window.c (CaptureAllWindows):
	* fvwm/virtual.c (UnmapDesk):
	(MapDesk):
	(do_move_window_to_desk):
	* fvwm/update.c (flush_window_updates):
	* fvwm/focus.c (set_focus_model):
	(DeleteFocus):
	(__restore_focus_after_unmap):
	much more GFPR work; these patches may break lots of things

	* fvwm/focus.c (set_focus_to_fwin):
	(__activate_window_by_command):
	(SetFocusWindow):
	(ReturnFocusWindow):
	(DeleteFocus):
	(ForceDeleteFocus):
	renamed MoveFocus to set_focus_to_fwin

2002-08-07  Mikhael Goikhman  <migo@homemail.com>

	* libs/Fft.c (FftDrawString):
	removed redudant and buggy code that called DrawStringFunc before
	this pointer gets initialized

	* fvwm/focus.c (focus_query_click_to_raise):
	fixed possibly-uninitialized variable warning

	* fvwm/Makefile.am:
	specify stroke includes before Xft includes, may improve some cases

2002-08-07  Dominik Vogt  <dominik.vogt@gmx.de>

	* configure.in:
	fixed sys/time.h detection

	* fvwm/events.c (HandleMappingNotify):
	* libs/Bindings.c (AddBinding):
	added MappingNotify event handler

	* fvwm/events.c (HandleMapRequest):
	removed debug code

	* fvwm/events.c (InitEventHandlerJumpTable):
	another attempt at handling "unknown" modifiers in key bindings

2002-08-06  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/stack.c (is_on_top_of_layer_ignore_rom):
	* fvwm/add_window.c (destroy_window):
	* fvwm/focus.c (focus_grab_buttons):
	fixed core dump

2002-08-05  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/focus.c (focus_force_refresh_focus):
	* fvwm/events.c (HandleEnterNotify):
	(HandlePropertyNotify):
	(HandleButtonPress):
	* fvwm/icons.c (DeIconify):
	* fvwm/virtual.c (MapDesk):
	* fvwm/focus_policy.c (fpol_query_allow_user_focus):
	* fvwm/update.c (apply_window_updates):
	* fvwm/module_interface.c:
	* fvwm/conditional.c (MatchesConditionMask):
	more GFPR work

	* fvwm/icons.c (Iconify):
	removed "#if 0"ed code

	* fvwm/module_interface.c:
	disabled the old ConfigureWindow module interface

	* vms/vms.c:
	* libs/fvwmsignal.h:
	* libs/Picture.c:
	* fvwm/ewmh_intern.h:
	* fvwm/events.c:
	* fvwm/module_interface.c:
	* fvwm/misc.c:
	use ftime.h

	* libs/ftime.h:
	new file to encapsulate time.h and sys/time.h inclusion

	* fvwm/stack.c:
	re-indented
	(mark_transient_subtree):
	(__mark_group_member):
	cleaned up and split into two functions

	* fvwm/focus.c (CMD_Focus):
	(CMD_FlipFocus):
	* fvwm/icons.c (DeIconify):
	clean up
	(FocusOn)
	(__activate_window_by_command):
	renamed function

	* fvwm/focus_policy.c (fpol_query_allow_set_focus):
	* fvwm/focus_policy.h: (fpol_set_focus_by_t):
	* fvwm/style.c (parse_and_set_window_style):
	(parse_and_set_window_style):
	began implementing new focus control styles

	* fvwm/focus.c (DoSetFocus):
	(__restore_focus_after_unmap):
	(MoveFocus):
	(refresh_focus):
	more GFPR work
	(DoSetFocus):
	(__set_focus_to_fwin):
	function renamed

	* fvwm/conditional.c (MatchesConditionMask):
	* fvwm/focus.c (focus_query_open_grab_focus):
	(focus_query_close_restore_focus):
	(focus_does_accept_input_focus):
	(MoveFocus):
	* fvwm/events.c (HandleUnmapNotify):
	(HandleEnterNotify):
	(HandleMapNotify):
	(HandleMapRequestKeepRaised):
	renamed some functions

	* libs/defaults.h:
	* fvwm/focus_policy.c:
	* fvwm/focus_policy.h:
	prepared some future focus policy flags

	* configure.in:
	enable error message when png or xpm test compilation fails

	* fvwm/style.h:
	* fvwm/window_flags.h:
	* fvwm/ewmh.c (ewmh_HandleDesktop):
	* fvwm/style.c (parse_and_set_window_style):
	(check_window_style_change):
	* fvwm/events.c (HandleButtonPress):
	(HandleVisibilityNotify):
	began GFPR migration of *raises* focus policy flags

	* fvwm/focus.c (focus_is_focusd):
	new function

	* libs/Bindings.c (AddBinding):
	fixed handling of "unknown" modifiers in key bindings

	* fvwm/focus.c (focus_grab_buttons):
	(focus_query_grab_buttons):
	moved focus policy code into separate function

2002-08-02  Mikhael Goikhman  <migo@homemail.com>

	* Makefile.am:
	DESTDIR fix

2002-08-01  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/style.c (parse_and_set_window_style):
	* fvwm/focus.c (focus_query_grab_focus):
	* fvwm/events.c (HandleMapNotify):
	(HandlePropertyNotify):
	* fvwm/focus_policy.c (fpol_init_default_fp):
	* libs/defaults.h:
	new styles OverrideGrabFocus and AllowGrabFocus
	cleaned up focus grabbing code and moved to focus.c

2002-07-30  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/focus.c (CMD_WarpToWindow):
	fixed negative arguments for unmanaged windows

	* fvwm/conditional.c (CMD_Direction):
	use PeekToken instead of GetNextToken
	cleaned up
	new direction "center"

2002-07-29  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (addkbsubinstoarray):
	disabled experimental pointer warping code

	* fvwm/menus.c:
	removed menu crash debug code

2002-07-26  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menus.c:
	added tons of crash debug code

	* fvwm/add_window.c:
	made a lot of internal functions static

	* fvwm/add_window.c (setup_button_windows):
	(destroy_title_window):
	(destroy_button_windows):
	(destroy_resize_handle_windows):
	(destroy_auxiliary_windows):
	(destroy_icon):
	(destroy_window):
	* fvwm/icons.c (CreateIconWindow):
	safety patches w/ XDeleteContext

	* fvwm/menus.c (DestroyMenu):
	fixed a crash w/ accessing already deleted menus

2002-07-25  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menus.c (get_menu_options):
	fixed menu context rectangle "icon" if the icon was not just a pixmap

2002-07-24  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleMapNotify):
	(HandleMapRequestKeepRaised):
	(HandleUnmapNotify):
	* fvwm/ewmh_events.c (ewmh_WMStateModal):
	* fvwm/ewmh.c (ewmh_HandleDesktop):
	* fvwm/style.c (parse_and_set_window_style):
	removed old do_grab_focus_when_created and *_when_transient_* flags

2002-07-23  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/conditional.c (MatchesConditionMask):
	* fvwm/focus.c (DoSetFocus):
	* fvwm/session.c (MatchWinToSM):
	* fvwm/module_interface.c (SETOLDFLAGS):
	removed old is_lenient flag

	* fvwm/bindings.c:
	* fvwm/style.c (__simplify_style_list):
	(simplify_style_list):
	reformatted

	* fvwm/window_flags.h:
	* fvwm/style.h:
	access macros for focus policy flags structures
	reformatted

	* fvwm/focus_policy.c:
	* fvwm/focus_policy.h:
	new files, begin great focus policy rewrite aka GFPR

2002-07-22  Bob Woodside  <dumbledore@woodsway.com>

	* fvwm/placement.c (PlaceWindow):
	Fixed interaction between CascadePlacement and StartsOnPage

2002-07-22  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/fvwmsignal.c (fvwmSelect):
	call alloca(0) in fvwmSelect to make sure the memory is not leaked in
	modules

2002-07-21  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/add_window.c (CaptureOneWindow):
	fixed a core dump w/ windows being destroyed during a recapture
	(AddWindow):
	removed duplicate check if new windows still exist

	* fvwm/placement.c (CMD_PlaceAgain):
	* fvwm/move_resize.c (move_window_doit):
	(__move_icon):
	* fvwm/virtual.c (MapDesk):
	(MoveViewport):
	(do_move_window_to_desk):
	* fvwm/icons.c (AutoPlaceIcon):
	(ChangeIconPixmap):
	(Iconify):
	some cleanup in movement code
	new option "Icon" to PlaceAgain command
	adapted documentation accordingly

	* fvwm/move_resize.c (move_window_doit):
	(__move_window):
	renamed function

2002-07-20  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Flocale.c (FlocaleRotateDrawString):
	create gcs only once

	* fvwm/fvwm.1:
	removed some references to Recapture
	UseDecor, UseStyle, AddToDecor, ChangeDecor, DestroyDecor, UpdateDecor,
	ButtonStyle, BorderStyle and TitleStyle are planned to be removed in 3.0

	* libs/gravity.c (gravity_parse_multi_dir_argument):
	fixed "all" multidir selecting "center" too

	* libs/Fft.c (FftDrawString):
	* libs/Flocale.c (FlocaleRotateDrawString):
	(FlocaleFontStructDrawString):
	(FlocaleDrawString):
	fixed some text placement bugs w/ shadow text
	(FlocaleGetShadowTextPosition):
	implemented "center" shadows

2002-07-20  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.c (FlocaleRotateDrawString):
	Removed some static declarations

2002-07-19  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/gravity.c (gravity_multi_dir_to_dir):
	* libs/gravity.h (enum):
	new function, cleaned up
	(enum):
	* fvwm/fvwm.h (FvwmWindow):
	* libs/Fft.c:
	* fvwm/geometry.c:
	* fvwm/borders.c:
	moved text_rotation_type to gravity.h and renamed to rotation_type

	* libs/Flocale.h:
	fixed several bugs in the access macros

	* libs/Flocale.c:
	removed unused static FlocaleSeted
	(FlocaleFontStructDrawString):
	simplified function

	* fvwm/virtual.c (CMD_EdgeCommand):
	* fvwm/windowshade.c (CMD_WindowShade):
	* fvwm/conditional.c (CMD_Direction):
	adapted to changes in ParseDirectionArgument

	* libs/gravity.h:
	* libs/gravity.c (ParseDirectionArgument):
	new direction "Center"

	* fvwm/virtual.c (CMD_EdgeCommand):
	reformatted

2002-07-18  olicha  <olivier.chapuis@free.fr>

	* libs/PictureUtils.c (PictureRGBtoPixel):
	(decompose_mask):
	Fixed(??) color allocation for some visuals

2002-07-18  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Flocale.c (FlocaleFontStructDrawString):
	a little code cleanup

	* fvwm/events.c (HandleEnterNotify):
	removed debug code
	anothe click+drag fix

	* libs/Pointer.c (GetLocationFromEventOrQuery):
	* fvwm/focus.c (SetPointerEventPosition):
	* fvwm/functions.c (CheckActionType):
	* fvwm/builtins.c (CMD_StrokeFunc):
	* fvwm/move_resize.c (moveLoop):
	(resize_window):
	fixed some bugs w/ pointer on wrong screen

2002-07-17  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleLeaveNotify):
	fixed problem w/ click+drag and mousey focus

	* fvwm/menus.c (size_menu_horizontally):
	fixed menu style SubmenusLeft w/ icons in menu items

2002-07-14  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menuitem.c (menuitem_paint):
	* fvwm/menus.h:
	* fvwm/menus.c (paint_menu_gradient_background):
	(get_menu_paint_item_parameters):
	removed circular dependency of menus.c and menuitem.c by using callback
	functions

2002-07-17  olicha  <olivier.chapuis@free.fr>

	* fvwm/menuitem.c:
	A -Wall fix

	* fvwm/fvwm.c (InitVariables):
	(main):
	* fvwm/colorset.c (parse_colorset):
	(alloc_colorset):
	(CMD_ReadWriteColors):
	* fvwm/builtins.c (CMD_ColorLimit):
	* libs/PictureUtils.h:
	* libs/PictureUtils.c (PictureReduceColor):
	(PictureReduceRGBColor):
	(PictureRGBtoPixel):
	(PictureAllocColor):
	(PictureFreeColors):
	(PictureGetNextColor):
	(colors_alloc_fail):
	(my_alloc_color):
	(AllocColors*):
	(AllocColorTable):
	(PictureAllocColorTable):
	* libs/PictureImageLoader.c (PImageXpmAllocColor):
	(PImageXpmFreeColor):
	(PImageLoadXpm):
	* libs/PictureBase.c (PictureInitCMap):
	* libs/Graphics.c (AllocLinearGradient):
	* libs/ColorUtils.c (GetShadow):
	(GetHilite):
	(GetForeShadow):
	(GetTintedPixel):
	(GetSimpleColor):
	(GetColor):
	(fvwmlib_clone_color):
	* libs/PictureGraphics.c (PGraphicsTintRectangle):
	Implemented a new color limit method

2002-07-17  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/move_resize.c (moveLoop):
	fixed problem moving the pointer off screen while moving a window
	(AnimatedMoveAnyWindow):
	fixed pointer warping w/ multiple screens and animated window motion

2002-07-12  olicha  <olivier.chapuis@free.fr>

	* fvwm/menus.c (get_menu_paint_item_parameters):
	(paint_menu_gradient_background):
	* fvwm/menuitem.c (menuitem_paint):
	* fvwm/menuitem.h:
	* fvwm/menus.h:
	Fixed B/DGradient with Xft fonts

	* libs/Colorset.h:
	* libs/ColorUtils.c (GetTintedColor):
	(GetTintedPixel):
	* fvwm/colorset.c (parse_simple_tint):
	(parse_colorset):
	(alloc_colorset):
	Implemented fgTint colorset option

	* libs/PictureImageLoader.c:
	* libs/PictureUtils.c:
	* libs/PictureUtils.h:
	* libs/Makefile.am:
	Moved color limitation and some rgb to pixel functions from
	PictureImageLoader to new files PictureUtils.{c,h}

	* fvwm/colorset.c (parse_colorset):
	* libs/PictureGraphics.c (PCreateTintedPixmap):
	(PGraphicsTintRectangle):
	Implemented tinting for X server without Xrender support and
	did color limitation when tinting


2002-07-10  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (WaitForButtonsUp):
	fixed handling of button release events

2002-07-10  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menus.c (MenuInteraction):
	fixed core dump w/ dynamic popdown action destroying a menu
	(paint_menu_gradient_background):
	fixed hang and/or incorrect drawing of b and d gradients in menus

	* fvwm/events.c (HandleEnterNotify):
	(HandleLeaveNotify):
	improved LEAVE_WINDOW/ENTER_WINDOW handling

2002-07-09  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Colorset.c (SetWindowBackground):
	(SetWindowBackgroundWithOffset):
	(ScrollPixmap):
	implemented new functions to allow pixmap backgrounds with an offset

2002-07-07  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleMapRequestKeepRaised):
	send Map/UnmapNotify before iconyfying, not after

2002-07-06  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleMapRequestKeepRaised):
	fake a MapNotify and then an UnmapNotify when a window is created iconic

	* fvwm/add_window.c (AddWindow):
	workaround for buggy TK menu positioning

	* fvwm/module_interface.c (FlushMessageQueue):
	(PositiveWrite):
	(get_pipe_name):
	tried to fix module communication deadlock w/ sync mask and a full write
	pipe

	* libs/Strings.c:
	re-indented file

	* libs/defaults.h:
2002-07-06  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.c (FlocaleGetFontSet):
	Removed some unwanted code

2002-07-06  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleLeaveNotify):
	(HandleEnterNotify):
	reduced the number of MX_LEAVE/ENTER_WINDOW messages

	* fvwm/events.c (CMD_XSync):
	very experimental patch to cycle through subwindows accepting keyboard
	input; call Xsync command repeatedly to test; crashes fvwm if more than
	1000 subwindows are used;

	* fvwm/focus.c (CMD_WarpToWindow):
	fixed a bug in warpttowindow command with subwindows of unmanaged
	windows

2002-07-05  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandlePropertyNotify):
	* fvwm/events.h:
	handle changes in the size_inc and base_size hints during opaque
	resizing.

	* fvwm/events.c (HandleButtonPress):
	ClickToFocus + ClickToFocusPassesClickOff now blocks event handling
	until the button is released again; this restores the old behaviour
	from 2.3.23 and before with click+drag and rxvt/aterm

2002-06-30  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/update.c (apply_window_updates):
	fixed applying neverfocus to currently focused window; decorations
	partially drawn hilighted

2002-07-05  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menucmd.c (menu_func):
	another module/menu/context window fix
	do not use global Fw anymore

2002-07-05  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.c (FlocaleStringToString2b):
	Fixed crash with big5-0 FontStruct

2002-07-04  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menucmd.c (menu_func):
	fixed context window of menus invoked by a module
	(menu_func):
	fixed context menus on windows

	* libs/vpacket.h (ConfigWinPacket):
	* fvwm/module_interface.c (CONFIGARGSNEW):
	* fvwm/fvwm.h (FvwmWindow):
	fixed bugs in type conversions for transmitting certain information to
	modules

	* fvwm/functions.c (CheckActionType):
	fixed window selection problem w/ menus invoked from modules

2002-07-03  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/gnome.c (GNOME_HandlePropRequest):
	-Wall fixes

	* fvwm/module_interface.c (ExecuteCommandQueue):
	fixed compile bug w/ --enable-debug-msgs

2002-06-30  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleButtonPress):
	(HandleKeyPress):
	* fvwm/menus.c (MenuInteraction):
	(do_menu):
	* fvwm/windowlist.c (CMD_WindowList):
	* fvwm/menucmd.c (menu_func):
	* fvwm/module_interface.c (ExecuteModuleCommand):
	* fvwm/add_window.c (adjust_fvwm_internal_windows):
	go away, evil globals! [removed the useless global variable
	"ButtonWindow"]

	* fvwm/events.c (HandleUnmapNotify):
	(HandleMapNotify):
	* fvwm/icons.c (Iconify):
	* fvwm/window_flags.h (IS_ICONIFY_PENDING):
	* fvwm/fvwm.h (struct):
	renamed is_deiconify_pending to is_iconify_pending
	some re-indenting

2002-06-29  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menus.c (MenuInteraction):
	(pop_menu_down):
	(menu_enter_tear_off_menu):
	(do_menu):
	* fvwm/events.c (HandleButtonPress):
	(HandleButtonRelease):
	(HandleKeyPress):
	(GetContext):
	* fvwm/menucmd.c (menu_func):
	(menu_func):
	* fvwm/module_interface.c (ExecuteModuleCommand):
	go away, evil globals! [removed the useless global variable "Context"]
	removed is_menu_from_frame_or_window_or_titlebar flag

	* fvwm/module_interface.c:
	* fvwm/windowlist.c:
	re-indented files

2002-06-28  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/menuitem.c (menuitem_paint):
	fixed fg color of the inactive disabled menu item

	* NEWS:
	old typo
	* fvwm/fvwm.1:
	removed a mention of RedHat (I don't think it is correct),
	reworded a mention of fvwm95

2002-06-26  Mikhael Goikhman  <migo@homemail.com>

	* **/*.c:
	tabify only the leading spaces, untabify the middle of line

2002-06-25  David Fries  <dfries@mail.win.org>

	* fvwm/fvwm.1:
	* fvwm/windowlist.c:
	Added code to sort based on the class name of a window for
	the WindowList function.

2002-06-25  olicha  <olivier.chapuis@free.fr>

	* acinclude.m4:
	A minor fix

2002-06-25  Mikhael Goikhman  <migo@homemail.com>

	* AUTHORS:
	add Anders Andersson (spelling fixes in all man pages) and Steve Talley

2002-06-24  Steve Talley  <stephen.talley@sun.com>

	* fvwm/add_window.c:
	* fvwm/add_window.h:
	* fvwm/fvwm.1:
	* fvwm/fvwm.h:
	* fvwm/icons.c:
	* fvwm/icons.h:
	* fvwm/style.c:
	* fvwm/style.h:
	* libs/defaults.h:
	New Style option IconSize

2002-06-24  Mikhael Goikhman  <migo@homemail.com>

	* NEWS, configure.in:
	changed version to 2.5.3

2002-06-24  Mikhael Goikhman  <migo@homemail.com>

	* INSTALL.fvwm:
	removed C++ section

	* fvwm/fvwm.1:
	* libs/FlocaleCharset.c:
	small fixes

2002-06-23  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (WaitForButtonsUp):
	use the wait cursot only after the 20th pass through the loop

2002-06-21  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm.1 (Examples): Language check.
	PipeRead as synchronous Exec.
	Better example for PipeRead.

2002-06-21  olicha  <olivier.chapuis@free.fr>

	* fvwm/fvwm.1:
	* NEWS:
	Documented StringEncoding= in font name

	* INSTALL.fvwm
	Removed --disable-compound-text doc

2002-06-20  olicha  <olivier.chapuis@free.fr>

	* libs/FBidi.h (FBidiConvert):
	Fixed compile if !HAVE_BIDI

2002-06-19  olicha  <olivier.chapuis@free.fr>

	* fvwm/fvwm.c (InitVariables):
	(StartupStuff):
	Allocate colorset 0 in InitVariable in the place of StartupStuff.
	This fix a "null expression" at init in menustyle.c (menustyle_update)

2002-06-19  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	reworded supported feature listing, fixed the default xft detection
	* INSTALL.fvwm:
	added the "Supported Features" section

2002-06-19  olicha  <olivier.chapuis@free.fr>

	* fvwm/colorset.h:
	Removed not useful #define/#undef FVWM_COLORSET_PRIVATE

	* INSTALL.fvwm:
	Removed --enable-mulibyte and --disable-compound-text config option
	documentation. s/enable-xft/disable-xft/ and document --disable-xrender

	* configure.in:
	Xft is on by default no

	* libs/FlocaleCharset.c (*):
	* libs/FlocaleCharset.h:
	* libs/Ficonv.c (*):
	* libs/Ficonv.h:
	* libs/Flocale.c (*):
	* libs/Flocale.h:
	* libs/Fft.c (*):
	* libs/FftInterface.h:
	* libs/FBidi.c:
	* libs/FBidi.h:
	* fvwm/ewmh_names.c ():
	Some cleanup. Implemented StringEncoding= in font names. Fixed
	string encoding for xft fonts. Try to be more cleaver about defaults
	charsets. Improvement in the locale charset table.

	* fvwm/fvwm.1:
	Some documentation cleanup regarding Xft

2002-06-19  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/functions.c (find_func_type):
	fixed bug i introduced w/ last commit

	* fvwm/fvwm.c (Done):
	(StartupStuff):
	* fvwm/functions.c (functions_is_complex_function):
	* fvwm/builtins.c (CMD_DestroyFunc):
	(CMD_AddToFunc):
	(CMD_Plus):
	moved functions to functions.c
	general cleanup

	* fvwm/functable.c:
	* fvwm/functable.h:
	* fvwm/functions.h:
	* fvwm/commands.h:
	* fvwm/functions.c:
	moved some types and functions to other/new files

	* fvwm/functions.c:
	* fvwm/expand.c (expand_vars_extended):
	(expand_vars):
	functions moved to new file

	* fvwm/functions.c:
	reindented file

2002-06-18  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (CoerceEnterNotifyOnCurrentWindow):
	fixed colorurmap focus problem

	* **/*.[ch]:
	tabified all files and removed all trailing spaces

	* fvwm/move_resize.c (move_window_doit):
	* fvwm/virtual.c (CMD_MoveToDesk):
	MoveToPage and MoveToDesk no longer unstick windows

2002-06-17  Mikhael Goikhman  <migo@homemail.com>

	* INSTALL.fvwm:
	small improvements

	* configure.in:
	reworded some names of supported features

2002-06-17  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/update.c (apply_window_updates):
	* fvwm/session.c (MatchWinToSM):
	* fvwm/add_window.c (setup_window_structure):
	* fvwm/windowshade.c (CMD_WindowShade):
	* fvwm/window_flags.h:
	fixed a problem w/ shaded windows changind the title direction

	* fvwm/geometry.c (get_shaded_geometry):
	fixed shading window to 0 width or height

	* fvwm/add_window.c (AddWindow):
	fixed a memory leak and an initial window placement bug

2002-06-15  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	minor improvements in output, added bin/fvwm-perllib

2002-06-12  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/menustyle.c (CMD_CopyMenuStyle):
	fixed copying PopupOffset values in CopyMenuStyle

	* NEWS:
	Copied 2.4.8 NEWS

2002-06-10  Mikhael Goikhman  <migo@homemail.com>

	* libs/Strings.[ch]:
	added CopyStringWithQuotes, not perfect, but works for now

2002-06-08  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/functions.h:
	* fvwm/commands.h:
	* fvwm/functions.c (func_config):
	* libs/FScreen.c (FScreenConfigureSLSScreens):
	(FScreenConfigureModule):
	* fvwm/virtual.c (CMD_XineramaSlsScreens):
	new command XineramaSLSScreens

	* libs/FScreen.c:
	cleaned up Xinerama ifdefs

2002-06-07  Dan Espen  <dane@mk.telcordia.com>

	* NEWS:
	* fvwm/fvwm.1 (FONT SHADOW EFFECTS): Reword.

2002-06-07  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.h:
	* libs/Flocale.c (FlocaleGetShadowTextPosition):
	Some shadow text position fixes

2002-06-06  olicha  <olivier.chapuis@free.fr>

	* fvwm/update.c (apply_window_updates):
	Fixed the position of shaded windows after certain style update

	* acinclude.m4:
	Fixed some options names

2002-06-06  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/module_interface.c (CMD_SendToModule):
	fixed SendToModule when the first parameter contains quotes

2002-06-06  olicha  <olivier.chapuis@free.fr>

	* fvwm/fvwm.c (main):
	* fvwm/ewmh.c (EWMH_Init):
	Init the EWMH before reading the config. Always setup the working
	area.

2002-06-05  olicha  <olivier.chapuis@free.fr>

	* fvwm/update.c (apply_window_updates):
	Fixed the position of a shaded window during a style update
	(do_redecorate)

	* libs/Flocale.c (FlocaleRotateDrawString):
	(FlocaleGetShadowTextPosition):
	Fixed side title text position if the font has no shadow

	* acconfig.h:
	* libs/Ficonv.c (FiconvInit):
	* libs/FlocaleCharset.c (FlocaleInit_X_Charset):
	* libs/Flocale.c (FlocaleInit):
	(FlocaleRotateDrawString):
	(FlocaleGetFontSet):
	(FlocaleGetFontOrFontSet):
	(FlocaleLoadFont):
	(FlocaleDrawString):
	(FlocaleTextWidth):
	(FlocaleFreeNameProperty):
	(FlocaleGetNameProperty):
	(FlocaleTextListToTextProperty):
	Finish to remove the multibyte patch. This gives a more clean code
	and can only prevent bugs

2002-06-05  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/placement.c (PlaceWindow):
	fixed CascadePlacement with huge windows (xterm -g 240x100),
	that were aligned to bottom-right instead of top-left;
	small adjustments (removed border_width from calculations,
	don't place normal windows at 0, commented out some strange code)

2002-06-04  Mikhael Goikhman  <migo@homemail.com>

	* NEWS:
	document CascadePlacement and FvwmIconMan improvements

	* fvwm/fvwm.1:
	typo

2002-06-03  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/add_window.c (adjust_fvwm_internal_windows):
	* fvwm/fvwm.c (InitVariables):
	* fvwm/placement.c (PlaceWindow):
	* fvwm/screen.h (struct ScreenInfo):
	improved *CascadePlacement, if the last placed window does not exist
	any more, reuse the last used position instead of adding a new cascade

2002-06-03  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleEnterNotify):
	* fvwm/fvwm.c (InitVariables):
	* fvwm/events.h:
	Fixed colormap handling over decorative parts of a window

2002-06-03  olicha  <olivier.chapuis@free.fr>

	* fvwm/module_interface.c (make_named_packet):
	Fixed an write out of memory bug. This complete Mikhail Kruk patch
	related to named module packet

2002-06-03  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/focus.c (focus_grab_buttons):
	* fvwm/events.c (HandleButtonPress):
	fixed a problem w/ ClickToFocus + ClickToFocusRaisesOff

2002-06-03  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/bindings.c (ParseBinding):
	replaced an error "Illegal mouse button" with a descriptive warning
	when a button number is greater than NUMBER_OF_MOUSE_BUTTONS

2002-05-31  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (GetContext):
	fixed key bindings on decorations

	* fvwm/events.h:
	removed XEVMASK_DECORW

2002-05-31  olicha  <olivier.chapuis@free.fr>

	* NEWS:
	* fvwm/fvwm.1:
	Documented shadow effect in a new section FONT EFFECTS

2002-05-31  olicha  <olivier.chapuis@free.fr>

	* libs/Fft.c (FftDrawString):
	* libs/Colorset.c (DumpColorset):
	(LoadColorset):
	* libs/Colorset.h:
	* fvwm/colorset.c (parse_colorset):
	New colorset option fg_alpha which defines an alpha for rendering
	text with Xft

2002-05-29  olicha  <olivier.chapuis@free.fr>

	* libs/Fft.c (FftSetupEncoding):
	* libs/Fft.h:
	* libs/FRender.h:
	Added Xft2 support

	* acinclude.m4:
	* configure.in:
	Added detection for fontconfig and Xft2. Added FT2 CFLAGS and LIBS
	to Xft FLAGS and LIBS

	* fvwm/Makefile.am:
	* libs/Makefile.am:
	Put $(Xft_CFLAGS) before $(X_CFLAGS) to be able to use an independent
	Xft2 library. Removed FT2 CFLAGS and LIBS

2002-05-27  olicha  <olivier.chapuis@free.fr>

	* acinclude.m4:
	* acconfig.h:
	* configure.in:
	Some Xft2 and fontconfig preparation

	* libs/Flocale.h:
	* libs/Flocale.c (FlocaleParseShadow):
	(FlocaleLoadFont):
	(FlocaleGetShadowTextPosition):
	Added offset to shadow text

	* libs/Flocale.h:
	Fixed the position of ne shadow text and remove some unused #define

2002-05-27  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/colorset.c (parse_colorset):
	fixed integer overflow in average colour calculation

2002-05-27  olicha  <olivier.chapuis@free.fr>

	* libs/gravity.c (GetNextMultiDirection):
	(ParseMultiDirectionArgument):
	* libs/gravity.h:
	Added a multi direction type which is a "<<" version of direction
	type. Added a parse and a next functions

	* libs/Flocale.h:
	* libs/Flocale.c (FlocaleParseShadow):
	(FlocaleGetNextShadowDirection):
	(FlocaleGetShadowTextPosition):
	Used gravity multi direction type and functions. Removed
	FlocaleGetNextShadowDirection

2002-05-27  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/focus.c (restore_focus_after_unmap):
	fixed a problem w/ colormap transition when transient window died

	* fvwm/add_window.c (AddWindow):
	clean up

	* fvwm/session.c (getUniqueStateFilename):
	applied security patch by Jan Echternach

	* fvwm/fvwm.c (InitVariables):
	Properly initialise Scr.flags.is_pointer_on_this_screen

	* libs/fvwmlib.h (FvwmFont):
	* fvwm/fvwm.c (setVersionInfo):
	* configure.in:
	* config.h.in:
	* acconfig.h (MULTIBYTE):
	removed MULTIBYTE option (unconditionally on)

2002-05-26  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/gravity.c (ParseDirectionArgument):
	allow "t", "u", ... shortcuts as direction arguments

	* fvwm/style.c (check_window_style_change):
	(parse_and_set_window_style):
	* fvwm/frame.c (frame_setup_border):
	(frame_get_shading_laziness):
	(frame_get_sidebar_geometry):
	* fvwm/decorations.c (SelectDecor):
	* fvwm/add_window.c (setup_style_and_decor):
	(setup_resize_handle_cursors):
	(setup_resize_handle_windows):
	(change_resize_handle_windows):
	(destroy_auxiliary_windows):
	* fvwm/borders.c (border_get_border_gcs):
	(border_draw_border_parts):
	* fvwm/style.h (SCSET_HAS_BORDER):
	* fvwm/fvwm.h (FvwmWindow):
	* fvwm/window_flags.h (SET_HAS_BORDER):
	new styles NoBorder/Border

2002-05-26  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.h:
	* libs/Flocale.c (FlocaleParseShadow):
	(FlocaleGetNextShadowDirection):
	(FlocaleGetShadowTextPosition):
	(FlocaleLoadFont):
	Implemented multidirectional shadow text rendering

	* libs/Flocale.h:
	* libs/Flocale.c
	(FlocaleFontStructDrawString):
	(FlocaleRotateDrawString):
	(FlocaleLoadFont):
	(FlocaleDrawString):
	(FlocaleTextWidth):
	* libs/FlocaleCharset.c (FlocaleCharsetSetFlocaleCharset):
	* libs/Fft.c (FftDrawString):
	Cleanup the FlocaleFont structure by addings some flags

2002-05-26  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleFocusIn):
	* fvwm/add_window.c (adjust_fvwm_internal_windows):
	* fvwm/screen.h (ScreenInfo):
	* fvwm/focus.c (FocusOn):
	ignore EnterNotify events while a window is waiting to receive focus
	from the Focus or FlipFocus commands; should prevent plenty of race
	contidions caused by executing complex functions by a key press, button
	press or from a menu; fixes Alt-Tab problem

	* fvwm/events.c (HandleMapNotify):
	immediately draw window decorations when window is mapped; the new frame
	drawing code takes care of suppressing unnecessary redraws
	(HandleLeaveNotify):
	fixed a bug w/ LeaveNotify event with NotifyGrab

2002-05-22  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.h:
	* libs/Fft.c (FftDrawString):
	* libs/Flocale.c (FlocaleFontStructDrawString):
	(FlocaleRotateDrawString):
	(FlocaleLoadFont):
	(FlocaleGetShadowTextPosition):
	(FlocaleDrawString):
	(FlocaleDrawUnderline):
	(FlocaleTextWidth):
	Implemented negative shadow text

2002-05-22  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menucmd.c (CMD_AddToMenu):
	* fvwm/windowlist.c (CMD_WindowList):
	* fvwm/menus.h:
	* fvwm/menus.c
	changed signature of AddToMenu

	* fvwm/menus.c (clone_menu_root_static):
	fixed problem w/ menu style usage count and tear off menus
	fixed core dump w/ not copying the missing sub menu function in tear
	off menus
	(clone_menu_item_list):
	(AddToMenu):
	(add_another_menu_item):
	(size_menu_vertically):
	fixed additional "More..." items in sub menus of torn off menus

2002-05-22  Mikhael Goikhman  <migo@homemail.com>

	* libs/colorset.h:
	fixed #endif warning
	* fvwm/ConfigFvwmDefaults:
	added CirculateSkip to tear off menus
	* fvwm.1:
	fixed ShadeAgain quoting

2002-05-21  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleButtonPress):
	allow to pass the focus click to applications and have a function bound
	to it at the same time

	* fvwm/fvwm.c:
	* fvwm/colorset.h:
	fixed compilation problem

2002-05-20  olicha  <olivier.chapuis@free.fr>

	* libs/PictureImageLoader.c (PImageRGBtoPixel):
	Fixed blue colour in png image and ewmh icons

	* libs/Flocale.c (FlocaleLoadFont):
	Removed some debug code

	* fvwm/colorset.c (parse_colorset):
	* libs/fvwmlib.h:
	* libs/ColorUtils.c (GetForeShadowColor):
	Added Mikhael algo to compute the default fgsh

2002-05-18  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/functions.c (expand_extended_var):
	expand $[fgsh.csN], use constants instead of numbers

2002-05-17  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.c (FlocaleDrawString):
	(FlocaleDrawUnderline):
	* libs/Flocale.h:
	Removed some unused and debug code

2002-05-17  olicha  <olivier.chapuis@free.fr>

	* fvwm/menuitem.c (draw_underline):
	* libs/Flocale.h:
	* libs/Flocale.c (FlocaleDrawUnderline):
	Move draw_underline into Flocale.c and fix underline position with
	shadow rendering

2002-05-17  olicha  <olivier.chapuis@free.fr>

	* fvwm/style.c (update_window_color_style):
	(update_window_color_hi_style):
	* fvwm/move_resize.c (DisplayPosition):
	(DisplaySize):
	* fvwm/menuitem.c (menuitem_paint):
	* fvwm/borders.c (get_common_decorations):
	(border_get_titlebar_draw_descr):
	* fvwm/fvwm.h:
	* fvwm/icons.c (DrawIconWindow):
	Pass the colorset to text drawing via the FlocaleWinString structure

	* libs/fvwmlib.h:
	* libs/ColorUtils.c (GetForeShadowColor):
	(GetForeShadow):
	* fvwm/colorset.c (parse_colorset):
	* libs/Colorset.h:
	* libs/Colorset.c (DumpColorset):
	(LoadColorset):
	Added fgsh colorset and two new functions GetForeShadowColor and
	GetForeShadow which should be modified

	* libs/Makefile.am:
	* libs/Fft.h:
	* libs/FftInterface.h (new file):
	* libs/Fft.c (FftDrawString):
	* libs/Flocale.h:
	* libs/Flocale.c (FlocaleFontStructDrawString):
	(FlocaleRotateDrawString):
	(FlocaleDrawString):
	(FlocaleTextWidth):
	(FlocaleLoadFont):
	Implemented text shadow rendering

2002-05-11  olicha  <olivier.chapuis@free.fr>

	* fvwm/builtins.h:
	* fvwm/builtins.c (refresh_window):
	* fvwm/update.c (apply_window_updates):
	* fvwm/update.h:
	* fvwm/style.c (check_window_style_change):
	ParentalRelativity style is now dynamic

2002-05-10  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menuitem.c (menuitem_paint):
	fixed menu item hilight area

2002-05-09  olicha  <olivier.chapuis@free.fr>

	* libs/Makefile.am:
	* libs/XError.c (request_name):
	* libs/PictureImageLoader.c (PImageLoadPng):
	(PImageCreatePixmapFromArgbData):
	* libs/PictureGraphics.c (PGraphicsTintRectangle):
	(PGraphicsTileRectangle):
	(PGraphicsCopyFvwmPicture):
	* libs/FRenderInit.c (new file):
	* libs/FRenderInit.h (new file):
	* libs/FRenderInterface.h:
	* libs/FRender.c (*):
	* fvwm/colorset.c (parse_tint):
	(parse_colorset):
	* fvwm/fvwm.c (main):
	* fvwm/events.c (HandlePropertyNotify):
	Change the design of the previous commit. Now a module should call
	FRenderInit when it wants to use a function which depends on XRender.

2002-05-09  olicha  <olivier.chapuis@free.fr>

	* fvwm/colorset.c:
	A -Wall fix

	* libs/Flocale.h:
	* libs/Fft.h:
	Fixed Compilation
	Include Fft.h include FRender.h as Xft.h include Xrender.h

	* libs/FRenderInterface.h:
	* libs/FRender.h:
	* libs/FRender.c (FRenderInit):
	(FRenderGetErrorCodeBase):
	(FRenderGetMajorOpCode):
	(FRenderGetExtensionSupported):
	(FRenderGetErrorText):
	Improve XRender initialization, check if the XRender extension is
	enabled and get the error code base and the major op code.
	Add error functions for the X error handler.

	* libs/XError.c (PrintXErrorAndCoredump):
	(request_name):
	Really enable USE_GET_ERROR_TEXT and take in account XRender error code
	and major op code

	* fvwm/ewmh_icons.c (EWMH_SetIconFromWMIcon):
	* fvwm/events.c (HandlePropertyNotify):
	* fvwm/colorset.c (parse_tint):
	(parse_colorset):
	* libs/PictureImageLoader.c (PImageLoadPng):
	(PImageCreatePixmapFromArgbData):
	* libs/PictureGraphics.c (PGraphicsCopyPixmaps):
	(PGraphicsCopyFvwmPicture):
	(PGraphicsTileRectangle):
	* libs/FRender.c (FRenderCopyArea):
	(FRenderTintRectangle):
	Check if the XRender extension is enabled on the display before
	performing XRender operations

2002-05-09  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menuitem.c (menuitem_paint):
	fixed item hilighting problems

2002-05-07  olicha  <olivier.chapuis@free.fr>

	* fvwm/colorset.c (parse_colorset):
	More coloset fixes

2002-05-07  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandlePropertyNotify):
	workaround for xterm resize problem

	* fvwm/colorset.c (parse_colorset):
	(free_colorset_background):
	(parse_pixmap):
	(parse_tint):
	fixed various bugs and core dumps w/ the cs->picture structure;
	note: it's a pointer, so compare with NULL, not with None

	* fvwm/frame.c (frame_setup_window):
	(frame_setup_window_app_request):
	(frame_force_setup_window):
	(frame_setup_window_internal):
	(frame_create_move_resize_args):
	(frame_free_move_resize_args):
	* fvwm/add_window.c (setup_window_attr):
	* fvwm/events.c (HandleConfigureRequest):
	(HandlePropertyNotify):
	fixed [?] bit_gravity/resize problem

	* fvwm/events.c (HandleEnterNotify):
	reformatted EdgeCommand code

2002-05-06  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh_icons.c (EWMH_SetIconFromWMIcon):
	Resize an ewmh icon to the wanted size if it is to big

	* fvwm/ewmh.c (EWMH_WindowDestroyed):
	Set also the stacking list when a window is destroyed

2002-05-03  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm.1: Finish language check.
	Fix typo in Mouse section, context should be on new line.

2002-05-02  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm.1 (file): Restore icons and images text with some
	improvement.
	Started on lang check, not done yet.

2002-05-02  Mikhail Kruk  <meshko@cs.brandeis.edu>

	* fvwm/module_interface.c (make_named_packet):
	Applied Mikhail Kruk patch

2002-05-02  olicha  <olivier.chapuis@free.fr>

	* libs/FlocaleCharset.h:
	* libs/Ficonv.c (FiconvSetupConversion):
	* libs/FlocaleCharset.c (FlocaleCharsetSetFlocaleCharset):
	* libs/Flocale.h:
	* libs/Flocale.c (FlocaleGetFftFont):
	(FlocaleGetFontSet):
	(FlocaleGetFont):
	(FlocaleLoadFont):
	(FlocaleUnloadFont):
	* fvwm/fvwm.1:
	Implemented charset/iconv hints in font name

2002-04-29  Stian Sletner  <stian@sletner.com>

	* fvwm/windowlist.c (CMD_WindowList):
	Added new Windowlist option IconifiedAtEnd

2002-04-30  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/module_interface.c:
	* libs/Module.c:
	* libs/Module.h:
	moved two constant strings to Module.h, so they may be used by perllib

2002-04-29  olicha  <olivier.chapuis@free.fr>

	* libs/FlocaleCharset.c (FlocaleCharsetSetFlocaleCharset):
	Fixed a core dump if the charset is not found

	* libs/Flocale.c (FlocaleStringToString2b):
	Removed some debug code

2002-04-29  olicha  <olivier.chapuis@free.fr>

	* libs/Fft.c (FftGetFontWidths):
	(FftGetFontWidths):
	* libs/Fft.h
	* libs/Flocale.h:
	* libs/Flocale.c (FlocaleGetFont):
	(FlocaleGetFontSet):
	(FlocaleGetFftFont):
	Removed min_char_offset member of the FlocaleFont as it is not use
	since we rotate string for side title

	* libs/Ficonv.c (FiconvSetupConversion):
	* libs/FlocaleCharset.c (FlocaleGetBidiCharset):
	(FlocaleCharsetSetFlocaleCharset):
	* libs/Flocale.h:
	* libs/Flocale.c (FlocaleTextWidth):
	(FlocaleDrawString):
	(FlocaleUtf8ToUnicodeStr2b):
	(FlocaleLoadFont):
	(FlocaleStringToString2b):
	(FlocaleRotateDrawString):
	(FlocaleFontStructDrawString):
	Added support for drawing string with 10646-1 fonts without an utf8
	locale. Also, drawing strings with a multibyte font now work not so
	bad even if the locale have nothing to do with the font.

	* libs/Fft.c (FftUtf8ToFftString16):
	(FftDrawString):
	(FftTextWidth):
	Added utf8 rendering with iso10646-1 fonts on system without
	Xft Utf8 functions

	* fvwm/colorset.c (reset_cs_pixmap):
	(parse_pixmap):
	(parse_shape):
	(parse_tint):
	(parse_colorset):
	Colorset now accept bitmaps. Split a bit parse_colorset for readability

2002-04-28  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/menus.c:
	fixed core dump on default Alt-Tab (Alt released when mouse is outside)

2002-04-27  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/move_resize.c:
	don't start Move with snap disabled if Alt is initially pressed

2002-04-26  Mikhael Goikhman  <migo@homemail.com>

	* NEWS, configure.in:
	changed version to 2.5.2

2002-04-25  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/fvwm.1:
	improved main headers, added new COLORSETS section;
	documented State condition

	* NEWS:
	documented Tint in colorsets and utility renaming

	* libs/Flocale.c:
	corrected several error reporting problems

2002-04-25  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.h:
	fixed leaving tear off menus

2002-04-24  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/borders.c (border_draw_part_relief):
	(border_set_button_pixmap):
	(border_draw_title_stick_lines):
	(border_draw_title_mono):
	(border_draw_title_relief):
	* libs/fvwmlib.h (RelieveRectangle2):
	(RelieveRectangle):
	replaced functions by macros

	* libs/Graphics.c (do_relieve_rectangle):
	applied performance patch by Dave Trollope

2002-04-24  Mikhael Goikhman  <migo@homemail.com>

	* libs/FBidi.c:
	* libs/FBidi.h:
	* libs/Flocale.c:
	* libs/Flocale.h:
	* libs/FlocaleCharset.c:
	FBidi is now independent from Flocale* again;
	iso8859-6.8x fonts recognized now as bidi-enabled

2002-04-23  Mikhael Goikhman  <migo@homemail.com>

	* libs/Flocale.c:
	fixed --disable-multibyte

2002-04-23  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/borders.c (border_draw_title_deep):
	(border_set_title_pixmap):
	(border_set_button_pixmap):
	fixed SolidButton title and button style

2002-04-23  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/fvwm.1:
	* NEWS:
	* AUTHORS:
	added new entry about CurrentAtEnd

	* colorset.c:
	minor reformatting and spell checking

2002-04-23  Jochen Klenner  <jochen.klenner@gmx.net>

	* fvwm/windowlist.c (CMD_WindowList):
	Added new Windowlist option CurrentAtEnd

2002-04-22  olicha  <olivier.chapuis@free.fr>

	* fvwm/colorset.c (parse_colorset):
	* libs/Colorset.h:
	Fixed an enormous core dump which comes from a cvs merging problem

	* fvwm/Makefile.am:
	* acconfig.h:
	* configure.in:
	Added Xrender detection and link fvwm if needed

	* libs/PictureGraphics.{c,h}:
	* libs/FRender.{c,h}:
	* libs/FRenderInterface.h:
	* libs/PictureGrpahics.c (*):
	* libs/PictureGrpahics.h:
	New libs files to acheive alpha-blend rendering and better XBM
	support. PictureGraphics contains elaborated version and also
	simplified version of XFillRectangle, XCopyPlan and XCopyArea
	Xlib functions.

	* fvwm/fvwm.h:
	* fvwm/icons.c (clear_icon):
	(GetIconPicture):
	(DrawIconWindow):
	(GetIconFromFile):
	* fvwm/events.c (HandlePropertyNotify):
	* fvwm/borders.c (border_fill_pixmap_background):
	(border_get_border_background):
	(border_draw_decor_to_pixmap):
	* fvwm/menuitem.c (menuitem_paint):
	* fvwm/add_window.c (destroy_icon):
	* fvwm/ewmh_icons.c (EWMH_SetIconFromWMIcon):
	* fvwm/geometry.c (move_icon_to_position):
	* fvwm/colorset.c (free_colorset_background):
	(parse_colorset):
	* libs/Colorset.h:
	Implemented alpha-blend rendering with the new libs function

	* fvwm/colorset.c (free_colorset_background):
	(parse_colorset):
	* libs/Colorset.h:
	Implemented tinting of a Pixmap background colorset

	* fvwm/colorset.c (parse_colorset):
	Use the Scr.NoFocusWin as main window in the place of the
	Scr.SizeWindow, this fix a lot of X errors in my machine.

	* fvwm/ewmh_icons.c (ewmh_SetWmIconFromPixmap):
	Donated our alpha channel

	* libs/vpacket.h:
	* fvwm/module_interface.h:
	* fvwm/module_interface.c (SendFvwmPicture):
	(BroadcastMiniIcon):
	(SendMiniIcon):
	(BroadcastFvwmPicture):
	(CMD_Send_WindowList):
	* fvwm/add_window.c (change_mini_icon):
	(broadcast_mini_icon):
	* fvwm/ewmh_icons.c:
	Replace BroadcastMiniIcon and SendMiniIcon by BroadcastFvwmPicture and
	SendFvwmPicture which send the alpha. Add a MiniIconPacket structure

	* libs/Makefile.am:
	* libs/PictureBase.{c,h} (*):
	* libs/Picture.{c,h} (*):
	* libs/PictureImageLoader.{c,h} (*):
	* fvwm/*:
	Rename some libs file InitPicture -> PictureBase, FImageLoader ->
	PictureImageLoader.
	Rename some libs function: InitPictureCMap -> PictureInitCMap,
	UseDefaultVisual -> PictureUseDefaultVisual, UseFvwmVisual ->
	PictureUseFvwmVisual, PictureSaveFvwmVisual -> SaveFvwmVisual,
	SetImagePath -> PictureSetImagePath, findImageFile ->
	PictureFindImageFile, PictureList -> FvwmPictureList,
	LoadFvwmPicture removed now  PImageLoadFvwmPictureFromFile replace it,
	GetPicture -> PGetFvwmPicture, CachePicture -> PCacheFvwmPicture,
	DestroyPicture -> PDestroyFvwmPicture, LoadPictureFromPixmap ->
	PLoadFvwmPictureFromPixmap, CachePictureFromPixmap ->
	PCacheFvwmPictureFromPixmap, fvwm_clone_picture -> PCloneFvwmPicture.
	Also renamed more recent functions in PictureImageLoader.

	* fvwm/borders.c (border_draw_one_border_part):
	(border_draw_decor_to_pixmap):
	Fixed drawing of a TiledPixmap borded and fixed position of buttons
	pixmap

	* fvwm/menus.c (pop_menu_up):
	(animated_move_back):
	(ParentalMenuRePaint):
	* fvwm/move_resize.h (resize_geometry_window):
	* fvwm/move_resize.c (move_window_doit):
	(AnimatedMoveAnyWindow):
	(AnimatedMoveOfWindow):
	(AnimatedMoveFvwmWindow):
	Fixed transparent animated menu

2002-04-21  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/fvwm.1:
	fixed two places

2002-04-19  Hippo

	* fvwm/colorset.c:
	* libs/Colorset.c:
	fixed running out of colors on 8bpp with ReadWriteColors;
	simulate colorsets on monochrome displays using three 1-bit pixmaps

2002-04-19  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	fixed $PERL detection again

2002-04-18  Hippo

	* configure.in:
	added -Wno-implicit-int to -Wall in case of gcc

	* fvwm/colorset.c:
	* fvwm/fvwm.c:
	fixed ReadWriteColors on a PseudoColor display

2002-04-18  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/move_resize.c (move_window_doit):
	set the is_icon_moved too flag if the icon was moved non-interactively

2002-04-16  Hippo

	* fvwm/*.[ch]:
	* NEWS:
	Moved FvwmTheme functionality into fvwm.
	Added new commands Colorset, ReadWriteColors, CleanupColorsets.

2002-04-17  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	fixed $PERL detection

	* fvwm/fvwm.1:
	* fvwm/ConfigFvwmDefaults:
	several fixes and spelling

2002-04-15  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Bindings.c (CheckBinding):
	(MatchBinding):
	(GrabWindowKey):
	(GrabWindowButton):
	(MatchBindingExactly):
	patch by yeti@physics.muni.cz to help with a weird problem w/ czech
	keyboards

2002-04-12  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	configure now uses $PERL if set

	* **:
	all programs installed into ${bindir} have now fvwm- prefix;
	documentation updated

2002-04-11  Mikhael Goikhman  <migo@homemail.com>

	* **:
	renamed fvwm2 executable to fvwm, fvwm2 man page to fvwm;
	documentation updated

2002-04-11  Mikhael Goikhman  <migo@homemail.com>

	* NEWS:
	added 2.4.7 entries

2002-04-10  Dan Espen  <dane@mk.telcordia.com>

	* AUTHORS: New author.

	* NEWS: Edge Command.

2002-04-09  Uwe Pross  <uwe.pross@gmx.net>

	* fvwm/fvwm2.1:
	Added EdgeCommand paragraph.

	* fvwm/events.c (HandleEnterNotify):
	Added execution of Scr.PanFrame*.command if set

	* fvwm/fvwm.c (InitVariables):
	Added init strings for pan frame commands.

	* fvwm/virtual.c:
	* fvwm/virtual.h:
	(checkPanFrames):
	Avoid hiding of pan frames if pan frame command	is set.
	(CMD_EdgeCommand):
	Implementation of the buildin command EdgeCommand. First
	implementation of this function.

	* fvwm/screen.h (struct):
	added char * command in structure Panframe to store the pan frame
	command.

	* fvwm/functions.c:
	added declaration of CMD_ENTRY("edgecommand")

	* fvwm/functions.h:
	added definition of Flag F_EDGE_COMMAND

	* fvwm/commands.h:
	added definition of CMD_EdgeCommand(F_CMD_ARGS)

2002-04-10  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/fvwm2.1:
	added "BI-DIRECTIONAL TEXTS" section

	* libs/System.c:
	added #include <sys/select.h> to fix endless loop on QNX

2002-04-10  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/fvwm2.1:
	changed description of focus models

2002-04-09  olicha  <olivier.chapuis@free.fr>

	* configure.in:
	Check for libpng libpng 1.0.4a or better

2002-04-08  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/add_window.c (setup_title_geometry):
	* fvwm/fvwm.h:
	* fvwm/fvwm2.1:
	* fvwm/geometry.c (get_title_font_size_and_offset):
	* fvwm/geometry.h:
	* fvwm/style.c (parse_and_set_window_style, check_window_style_change):
	* fvwm/style.h:
	* fvwm/window_flags.h:
	* libs/Fft.c (FftGetRotatedFont, FftGetFont, FftDrawString):
	* libs/Fft.h:
	* libs/Flocale.c (FlocaleRotateDrawString, FlocaleDrawString):
	* libs/Flocale.h:
	new Style options TopTitleRotated / TopTitleNotRotated,
	BottomTitleRotated / BottomTitleNotRotated

2002-04-08  olicha  <olivier.chapuis@free.fr>

	* libs/Makefile.am:
	Fixed make dist again

2002-04-07  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm2.1 (ICONS AND IMAGES): Language fix, then rewrite.

2002-04-07  Mikhael Goikhman  <migo@homemail.com>

	* INSTALL.fvwm:
	minor wording fixes

	* NEWS:
	mention a new FvwmIconMan syntax

	* sample.fvwmrc/new-features:
	* sample.fvwmrc/system.fvwm2rc:
	* sample.fvwmrc/system.fvwm2rc-sample-95:
	use a new module syntax

2002-04-06  olicha  <olivier.chapuis@free.fr>

	* fvwm/fvwm2.1:
	* INSTALL.fvwm:
	Forget to save some file

	* libs/FImageLoader.c (c100_init_base_table):
	Allows init even if !XPM

	* libs/Makefile.am:
	Remove a F

	* configure.in:
	Fixed png detection

	* libs/FImageLoader.c (FImageCreatePixmapFromArgbData):
	Fixed a GC memory leaks.

	* fvwm/fvwm.c (setVersionInfo):
	* fvwm/fvwm2.1:
	Updated -version for png, bidi and xft

	* fvwm/fvwm2.1:
	Modified the ICONS section. Rename it ICONS AND IMAGES and
	document PNG file format. Replace "xpm or bitmap file" by
	"image file" in a few place.

	* INSTALL.fvwm:
	* NEWS:
	PNG news and documented libpng in the "Optional libraries used by FVWM"
	section

2002-04-05  olicha  <olivier.chapuis@free.fr>

	* libs/FImageLoader.c (c100_init_base_table):
	(FImageReduceRGBColor):
	(FImageCreatePixmapFromArgbData):
	Speed up color limitation for png image and ewmh icons
	Respect color limit even with DirectColor and TrueColor

	* configure.in:
	* acconfig.h (HAVE_PNG):
	Added test for libpng. Enable FvwmBanner, FvwmScript and xpmroot
	even without XPM support

	* libs/Makefile.am
	* libs/InitPicture.c (new file):
	* libs/InitPicture.h (new file):
	* libs/Picture.c:
	* libs/Picture.h:
	* libs/FImageLoader.c (new file):
	* libs/FImageLoader.h (new file):
	* libs/Fxpm.h (new file):
	* libs/Fpng.h (new file):
	Images are loaded in FImageLoader. PNG image can be loaded, the loader
	come from Imlib2 and the argb loader from fvwm/ewmh_icons.c.
	ColorLimit stuff is applied to PNG image.
	Split Picture.{c,h} into InitPicture.{c,h} and Picture.{c,h}.
	InitPicture contains the Picture structure, initialize the visual,
	depth and color map and contains image path stuff as Picture contains
	Picture manipulations.

	* libs/ColorUtils.c:
	* libs/Picture.h:
	Moved the Picture color utils func to ColorUtils

	* fvwm/Makefile.am:
	links against libpng

	* fvwm/icons.c (GetIconPicture):
	(GetXPMFile):
	(GetBitmapFile):
	(GetIconFromFile):
	Replace GetXPMFile and GetBitmapFile by GetIconFromFile which use
	the libs image loader

	* fvwm/cursor.c (CMD_CursorStyle):
	Use FImageLoadCursorPixmapFromFile (no PNG support here)

	* fvwm/ewmh_icons.c (create_pixmap_from_ewmh_icon):
	(EWMH_SetIconFromWMIcon):
	Use the argb loader of the libs. ColorLimit are now applied to ewmh
	icons

	* fvwm/modconf.c:
	Send the ColorLimit to module in any case

	* libs/fvwmlib.h:
	* libs/Graphics.c:
	* libs/Flocale.c
	* libs/Fft.c:
	* libs/Colorset.c:
	* fvwm/add_window.c:
	* fvwm/builtins.c:
	* fvwm/fvwm.h:
	* fvwm/menus.c:
	* fvwm/menustyle.c:
	* fvwm/move_resize.c:
	include cleanup

2002-04-02  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (test_map_request):
	(test_resizing_event):
	fixed endless loop in HandleConfigureRequest

2002-03-31  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/add_window.c (setup_style_and_decor):
	fixed borderless transients

	* fvwm/events.c (test_resizing_event):
	(HandleConfigureRequest):
	* fvwm/frame.c (frame_create_move_resize_args):
	* fvwm/add_window.c (AddWindow):
	* fvwm/fvwm.h:
	* fvwm/window_flags.h:
	tried to improve ConfigureRequest handling

	* fvwm/events.c (HandlePropertyNotify):
	recalculate window size when the base_width or base_height hint
	changes; fixes some problems with xemacs

	* fvwm/virtual.c (map_window):
	redraw decorations

	* fvwm/borders.c (border_draw_decorations):
	don't redraw windows on a different desk
	keep track of Scr.Hilite

2002-03-31  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/virtual.c (unmap_window):
	* fvwm/move_resize.c (resize_window):
	* fvwm/icons.c (Iconify):
	* fvwm/add_window.c (CaptureOneWindow):
	* fvwm/borders.c (border_undraw_decorations):
	mark window decorations as not drawn whenever the frame is unmapped

2002-03-30  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm2.1: Fixup IconBox geometry examples.

2002-03-29  Mikhael Goikhman  <migo@homemail.com>

	* libs/FBidi.c:
	use safemalloc and alloca instead of malloc

2002-03-29  olicha  <olivier.chapuis@free.fr>

	* libs/FlocaleCharset.c (FlocaleCharsetSetFlocaleCharset):
	Set the X locale charset on system without XOpenOM

2002-03-27  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	fixed multibyte support reporting

2002-03-27  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/fvwmlib.h:
	* fvwm/fvwm.h:
	* config.h.in:
	moved gcc extension __attribute__ handling to config.h

	* fvwm/fvwm.c (main):
	* fvwm/stack.c (add_window_to_stack_ring_after):
	* fvwm/icons.c (GetIconWindow):
	(GetIconBitmap):
	* fvwm/add_window.c:
	fixed core dumps and other bugs in debug messages

2002-03-27  olicha  <olivier.chapuis@free.fr>

	* libs/FlocaleCharset.c (FlocaleInit_X_Charset):
	(FlocaleCharsetSetFlocaleCharset):
	* acconfig.h:
	* configure.in (problem_multibyte):
	Fixed compilation for system without XOpenOM in Xlib.h

	* libs/FlocaleCharset.c (FlocaleInit_X_Charset):
	* libs/Ficonv.c (FiconvInit):
	Be more safe

	* fvwm/fvwm.c:
	include only libs/Flocale.h

2002-03-26  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	fixed detection of fribidi-0.9.0, it is incompatible (not good for us)

	* libs/FBidi.c:
	* libs/FBidi.h:
	* libs/Flocale.c:
	* libs/FlocaleCharset.c:
	minor modifications, like removed #include;
	fixed core dump with bidi and utf-8

2002-03-25  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/frame.c (frame_update_hidden_window_pos):
	fixed shade/maximize/unshade

	* fvwm/builtins.c (FreeDecorFace):
	fixed memory leak

	* fvwm/borders.c (get_common_decorations):
	(border_get_border_style):
	* fvwm/style.c (parse_and_set_window_style):
	* fvwm/style.h:
	* fvwm/window_flags.h:
	* fvwm/fvwm.h (struct):
	* fvwm/frame.c (frame_mrs_setup_draw_decorations):
	(frame_create_move_resize_args):
	(frame_move_resize_step):
	(frame_next_move_resize_args):
	new styles WindowShadeLazy [default], WindowShadeBusy and
	WindowShadeAlwaysLazy

	* fvwm/frame.c (frame_set_decor_gravities):
	fixed window bit gravities
	split into smaller functions
	(frame_move_resize_step):
	fixed a bug w/ the parent gravity
	(frame_hide_changing_window_parts):
	fixed flickering in one of the corners during shade animation
	(frame_mrs_hide_changing_parts):
	renamed function
	(frame_mrs_prepare_vars):
	(frame_mrs_hide_unhide_parent):
	(frame_mrs_setup_draw_decorations):
	(frame_mrs_resize_move_windows):
	new functions

2002-03-25  olicha  <olivier.chapuis@free.fr>

	* libs/Fft.c (FftSetupEncoding):
	Fixed compilation

	* libs/Flocale.c (FlocaleDrawString):
	* libs/FBidi.c (FBidiConvert):
	* libs/FBidi.h:
	Pass the font to FBidiConvert

	* acconfig.h (HAVE_LIBCHARSET):
	* acinclude.m4 (CHECK_LIBCHARSET):
	* configure.in:
	If libiconv is used check for libcharset

	* libs/Makefile.am:
	* libs/FlocaleCharset.h:
	* libs/FlocaleCharset.c:
	* libs/Flocale.h:
	* libs/Flocale.c (*):
	* libs/Fft.c (FftSetupEncoding):
	* libs/Fft.h:
	New structure FlocaleCharset to handle font, iconv and fribidi charsets.
	FlocaleFont has such a member which is set when charset info are needed.
	FlocaleCharset.c contains a big table which associates to an X charset
	various possible locale charsets and the fribidi charset.
	If libiconv is used, libcharset is used to compute the locale charset.
	Various Flocale clean up.

	* fvwm/fvwm.c (main):
	Removed the call to FlocaleInitCharset, it is now done automatically
	when needed

	* libs/Makefile.am:
	* libs/Ficon.h:
	* libs/Ficonv.c:
	* fvwm/ewmh.c (ewmh_atom_property_notify[]):
	* fvwm/ewmh.h:
	* fvwm/ewmh_names.c (EWMH_SetVisibleName):
	(EWMH_WMIconName):
	(EWMH_WMName):
	(EWMH_SetDesktopNames):
	Moved iconv conversions into the library. Try to found the good iconv
	charset with the help of the font and of the FlocaleCharset table.

2002-03-25  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Module.c (SendFvwmPipe):
	* libs/Graphics.c (do_relieve_rectangle):
	* fvwm/menustyle.c (menustyle_parse_old_style):
	* fvwm/add_window.c (setup_window_structure):
	memory management patches by Dave Trollope

	* fvwm/frame.c (frame_get_sidebar_geometry):
	hide the handles when using the NoHandles style

	* fvwm/borders.c (border_redraw_decorations):
	change in title rotation is applied immediately, don't use the value "2"
	to force redrawing

	* fvwm/style.c (parse_and_set_window_style):
	removed "TitleLeft" and "TitleRight" styles; only the "TitleAt..."
	styles can be used
	documented the new title directions
	(parse_and_set_window_style):
	removed the ...TitleRotated[Counter]ClockWise use ...CW and ...CCW
	instead
	documented these styles

	* fvwm/add_window.c (CaptureOneWindow):
	(CaptureAllWindows):
	(AddWindow):
	cleaned up

	* fvwm/icons.c (DeIconify):
	fiexd fucoused window not hilighting after deiconification

2002-03-24  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/update.c (apply_window_updates):
	windows are not unshaded when the decoration layout changes

	* fvwm/frame.c (frame_create_move_resize_args):
	fixed excessive redrawing
	(frame_get_hidden_pos):
	fixed parent geometry when window is hidden

	* fvwm/add_window.c (setup_frame_stacking):
	fixed stacking of right buttons

	* fvwm/frame.c (frame_set_decor_gravities):
	fixed title and button bit gravities

	* fvwm/add_window.c (setup_frame_stacking):
	(change_auxiliary_windows):
	fixed "button" style

	* fvwm/geometry.c (get_title_button_geometry):
	* fvwm/menus.c (pop_menu_up):
	fixed menu placement relative to window titles

	* libs/Flocale.c (FlocaleDrawString):
	fixed compiler warning w/o fribidi

	* fvwm/virtual.c (MoveViewport):
	(MapDesk):
	(do_move_window_to_desk):
	* fvwm/update.c (apply_window_updates):
	* fvwm/icons.c (Iconify):
	(CMD_Iconify):
	* fvwm/module_interface.c (SETOLDFLAGS):
	* fvwm/ewmh_events.c (ewmh_WMStateHidden):
	* fvwm/style.c (parse_and_set_window_style):
	* fvwm/window_flags.h:
	* fvwm/session.c (MatchWinToSM):
	* fvwm/placement.c (PlaceWindow):
	* fvwm/add_window.c (CaptureAllWindows):
	(setup_window_placement):
	(CaptureOneWindow):
	(AddWindow):
	(destroy_window):
	* fvwm/menus.c (menu_tear_off):
	* fvwm/events.c (HandleMapRequestKeepRaised):
	(HandleMapNotify):
	* fvwm/fvwm.h:
	removed some of those pesky globals: PPosOverride, isIconicState and
	isIconifiedByParent; pass round a structure instead
	removed the do_start_iconic window flag
	removed do_delete_icon_moved flag

2002-03-24  Mikhael Goikhman  <migo@homemail.com>

	* acconfig.h:
	* configure.in:
	renamed HAVE_FRIBIDI to HAVE_BIDI

	* libs/FBidi.c:
	* libs/FBidi.h:
	added more comments

	* fvwm/Makefile.am:
	* libs/Flocale.c:
	* libs/Makefile.am:
	added a dummy call to FBidi to test linking against bidi libs

2002-03-24  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/windowshade.c (CMD_WindowShade):
	changed syntax of windowshade with direction
	(CMD_WindowShade):
	update button state after unshading

	* fvwm/add_window.c (AddWindow):
	fixed mini icon update

	* fvwm/events.c (HandleEnterNotify):
	fixed icon picture redrawing
	icon titles are no longer raised and expanded if the icon has only a
	title

	* fvwm/move_resize.c (resize_window):
	fixed core dump

	* libs/gravity.c (gravity_move_resize_parent_child):
	* fvwm/frame.c (frame_get_titlebar_dimensions):
	(frame_prepare_animation_shape):
	(frame_move_resize_step):
	(frame_get_titlebar_dimensions_only):
	(frame_get_hidden_pos):
	(frame_update_hidden_window_pos):
	(frame_free_move_resize_args):
	(frame_create_move_resize_args):
	fixed shading of shaped windows

	* fvwm/borders.c:
	clean up

	* fvwm/fvwm.c (main):
	* fvwm/misc.c (GrabEm):
	fixed a problem with the cursor shape during window shading

	* fvwm/update.c (apply_window_updates):
	fixed drawing of hilighted window after a decoration change

	* fvwm/update.c (apply_window_updates):
	* fvwm/ewmh_icons.c (EWMH_SetIconFromWMIcon):
	* fvwm/borders.c (RedrawDecorations):
	renamed RedrawDecorations()

	* fvwm/move_resize.c (move_window_doit):
	* libs/fvwmrect.c:
	* fvwm/misc.c (move_into_rectangle):
	(intersect_xrectangles):
	functions renamed and moved to fvwmrect.c

	* fvwm/borders.c (border_get_changed_border_parts):
	(frame_get_changed_border_parts):
	reduced border redrawing
	moved fucntion to borders.c

	* fvwm/events.c (HandleButtonPress):
	(DispatchEvent):
	suppress button events on frame windows

	* fvwm/frame.c (frame_setup_border):
	fixed a problem with the border setup

	* fvwm/borders.c (border_draw_decorations):
	* fvwm/events.c (HandleEnterNotify):
	fixed icon title drawing

	* fvwm/misc.c (GrabEm):
	fixed a pointer grab hang with xmag?

	* fvwm/move_resize.c (resize_window):
	use frame_move_resize function to improve performance

	* fvwm/add_window.c (AddWindow):
	fixed recaturing shaded windows

	* fvwm/borders.c:
	suppress unnecessary title redraws

	* fvwm/frame.c:
	window shading works again; there are still some problems with
	recapture, restart, border drawing and shaped windows

2002-03-23  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/geometry.c (get_shaded_geometry_with_dir):
	new function

	* fvwm/frame.c (frame_get_title_bar_dimensions):
	fixed minor button layout bug
	(frame_update_hidden_window_pos):

	* fvwm/ewmh_names.c (EWMH_WMName):
	* fvwm/gnome.c (GNOME_HandlePropRequest):
	* fvwm/focus.c (DoSetFocus):
	* fvwm/stack.c (new_layer):
	* fvwm/icons.c (DeIconify):
	(Iconify):
	* fvwm/events.c (HandleFocusIn):
	(HandlePropertyNotify):
	(HandleExpose):
	(HandleMapNotify):
	(HandleButtonPress):
	(HandleLeaveNotify):
	* fvwm/builtins.c (CMD_ChangeDecor):
	(CMD_UpdateDecor):
	* fvwm/move_resize.c (resize_move_window):
	(resize_window):
	(resize_window):
	(maximize_fvwm_window):
	(handle_stick):
	* fvwm/borders.c (DrawDecorations):
	(RedrawDecorations):
	removed function DrawDecorations()
	(border_draw_decorations):
	renamed draw_decorations_with_geom() to border_draw_decorations()

	* fvwm/events.c (HandleExpose):
	fixed drawing icon titles

	* fvwm/add_window.c (adjust_fvwm_internal_windows):
	* fvwm/events.c (HandleFocusIn):
	(HandleFocusOut):
	* fvwm/screen.h (ScreenInfo):
	return the focus to the window that had the focus before an or window
	stole it and then died.

	* fvwm/menus.c (scanForColor):
	removed duplicate call of strlen
	use alloca instead of safemalloc

	* fvwm/menustyle.c (menustyle_parse_style):
	don't call memset right before memcpy

	* fvwm/module_interface.c (AddToMessageQueue):
	(DeleteMessageQueueBuff):
	removed one safemalloc and inline'd the function
	merged AddToMessageQueue into PositiveWrite

	* fvwm/borders.c (border_draw_decor_to_pixmap):
	fixed pixmap and mini icon buttons
	(border_fill_pixmap_background):
	fixed an X error
	(border_get_tb_parts_to_draw):
	buttons and title background using the border style is updated when the
	buttons moves

	* fvwm/events.c (WaitForButtonsUp):
	don't grab the whole server but merely the pointer to allow applications
	redrawing themselves

	* fvwm/borders.c:
	finished writing title drawing code

	* fvwm/move_resize.c (resize_window):
	(resize_move_window):
	(unmaximize_fvwm_window):
	removed now unnecessary calls to DrawDecorations()

	* fvwm/frame.c (frame_hide_changing_window_parts):
	fixed hiding bottom/right titles

	* fvwm/add_window.c (AddWindow):
	fixed recapturing shaded windows

	* fvwm/misc.c (GrabEm):
	fixed the cursor over the title window while resizing

2002-03-22  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Graphics.c (CreateTiledPixmap):
	improved efficience: let the X server tile a pixmap via the GC settings

	* fvwm/fvwm.c (CreateGCs):
	* fvwm/screen.h (ScreenInfo):
	added new global GC Scr.TileGC

	* fvwm/borders.c (border_fill_pixmap_background):
	* fvwm/ewmh_icons.c (create_pixmap_from_ewmh_icon):
	use already created gcs

	* fvwm/ewmh_icons.c (create_pixmap_from_ewmh_icon):
	* fvwm/menus.c (paint_menu_gradient_background):
	fixed using a randow members in gcs

2002-03-22  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	added compilation test for fribidi

2002-03-22  Dan Espen  <dane@mk.telcordia.com>

	* NEWS: Document FvwmForm timeout.

2002-03-22  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/session.c (MatchWinToSM):
	* fvwm/add_window.c (AddWindow):
	preserve user states over a restart

	* fvwm/add_window.c (setup_window_structure):
	preserve user states over a recapture

	* fvwm/functions.c (execute_function):
	"Silent" suppresses the "No such command ..." message

	* fvwm/frame.c (frame_move_resize):
	* fvwm/misc.c (GrabEm):
	fixed the cursor shape during resizing
	fixed button looks in small windows

2002-03-22  Mikhael Goikhman  <migo@homemail.com>

	* libs/FBidi.{c,h}:
	new files

2002-03-22  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/fvwm.c (LoadDefaultLeftButton):
	(LoadDefaultRightButton):
	* fvwm/borders.c (border_draw_vector_to_pixmap):
	* fvwm/screen.h (DecorFace):
	* fvwm/builtins.c (ReadDecorFace):
	fixed transparent vector line support

	* libs/Graphics.c (CreateGradientPixmap):
	fixed potential core dump with illegal gradients

2002-03-21  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/fvwm.h (FvwmWindow):
	removed button_background_pixmap member

	* fvwm/update.c (apply_window_updates):
	fixed changing the decoration size

	* fvwm/windowshade.c (CMD_WindowShade):
	* fvwm/frame.c (frame_setup_border):
	* fvwm/functions.c (execute_complex_function):
	removed debug code

	* fvwm/move_resize.c (resize_window):
	fixed aboting of a opaque resize w/ maximized windows
	(ParseOneResizeArgument):
	resize arguments don't take the border into account
	(GetResizeArguments):
	implemented new option "Frame" to the Resize and ResizeMove commands

2002-03-20  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/fvwm2.1:
	* fvwm/builtins.c (ReadDecorFace):
	* fvwm/borders.c (DrawLinePattern):
	implemented transparent drawing color in vector buttons: C == 4

	* libs/defaults.h (MAX_TITLE_BUTTON_VECTOR_LINES):
	* fvwm/builtins.c (ReadDecorFace):
	increased allowed number of lines in a vector button to 10000 and moved
	the definition to defaults.h

	* fvwm/virtual.c (MoveViewport):
	don't send useless M_NEW_PAGE packets

	* fvwm/frame.c:
	* fvwm/borders.c:
	started work on new button/title drawing code

	* fvwm/events.c (HandleExpose):
	don't handle expose on the title bar

	* fvwm/borders.c:
	* fvwm/frame.c (frame_get_sidebar_geometry):
	* fvwm/fvwm.h (FvwmWindow):
	replaced border_state with decor_state

	* libs/defaults.h (NR_RIGHT_BUTTONS):
	added a comment

	* fvwm/events.h:
	* fvwm/events.c (HandleExpose):

	* fvwm/frame.c (frame_setup_border):
	hide sidebars if they are too small, i.e. 0 pixels

2002-03-20  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.c (FlocaleFreeNameProperty):
	Fixed random core dump

2002-03-19  olicha  <olivier.chapuis@free.fr>

	* fvwm/ConfigFvwmDefaults:
	RightTitleRotatedCW is a default

2002-03-19  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/frame.c (frame_get_sidebar_geometry):
	window corners are always at least the border width thick

	* fvwm/geometry.c (update_absolute_geometry):
	fixed south/east shading

	* fvwm/frame.c (frame_move_resize_step):
	did the best I could to prevent rxvt from flashing in the background
	colour

	* fvwm/add_window.c (get_default_window_attributes):
	(get_default_window_attributes):
	(setup_resize_handle_windows):
	* fvwm/borders.c (border_get_border_gcs):
	applied -visual fix by Hippo

	* fvwm/cursor.c (CMD_CursorStyle):
	fixed endless loop

	* fvwm/frame.c (frame_get_title_bar_dimensions):
	fixed order of right buttons
	(frame_move_resize_step):
	reduced flashing when maximizing

	* fvwm/geometry.c (update_absolute_geometry):
	adapted for horizontal shading

2002-03-19  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/borders.c:
	* fvwm/builtins.c:
	* fvwm/fvwm.h:
	* fvwm/geometry.c:
	* libs/Fft.c:
	* libs/Flocale.c:
	* libs/Flocale.h:
	several renamings of text_direction to text_rotation

2002-03-19  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/windowshade.c (CMD_WindowShade):
	* fvwm/frame.c (frame_create_move_resize_args):
	(frame_move_resize_step):
	hack to enable non-animated window shading for the time being

	* fvwm/style.c (parse_and_set_window_style):
	(parse_and_set_window_style):
	allow to abbreviate [Counter]ClockWise with [C]CW

	* fvwm/frame.c (frame_move_resize_step):
	fixed

	* fvwm/geometry.c (gravity_constrain_size):
	removed useless code

	* fvwm/update.c (apply_window_updates):
	* fvwm/add_window.c (AddWindow):
	* fvwm/move_resize.c (unmaximize_fvwm_window):
	(resize_window):
	do not write into frame_g. only frame.c should do this

	* libs/defaults.h (MIN_WINDOW_TITLEBUTTON_LENGTH):
	(MIN_WINDOW_TITLE_LENGTH):
	new default values
	* fvwm/frame.c (frame_setup_title_bar):
	(get_resize_decor_gravities_one_axis):
	(frame_setup_window_internal):
	(frame_move_resize_step):
	(frame_create_move_resize_args):
	rewrote frame_setup_title_bar function

	* fvwm/add_window.c (setup_frame_stacking):
	fixed title bar stacking order

	* fvwm/frame.c (frame_setup_title_bar):
	removed yesterday's 'fix'

	* fvwm/add_window.c (hide_screen):
	(setup_title_window):
	(setup_resize_handle_windows):
	(setup_button_windows):
	fixed visual and depth of decoration windows

2002-03-18  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/frame.c (frame_setup_title_bar):
	fixed title layout bug

	* fvwm/move_resize.c (MaximizeHeight):
	fixed bug in "grow" option of the Maximize command

	* fvwm/geometry.h:
	fixed broken prototype for get_title_font_size_and_offset

	* fvwm/geometry.c (get_title_font_size_and_offset):
	simplified code a bit

2002-03-18  olicha  <olivier.chapuis@free.fr>

	* fvwm/geometry.h:
	* fvwm/geometry.c (get_title_font_size_and_offset):
	* fvwm/add_window.c (setup_title_geometry):
	* fvwm/style.h:
	* fvwm/style.c (parse_and_set_window_style):
	(check_window_style_change):
	* fvwm/update.c (apply_window_updates):
	* fvwm/window_flags.h:
	* fvwm/fvwm.h:
	Reworte side title direction styles and use LeftTitleRotatedClockWise /
	LeftTitleRotatedCounterClockWise, RightTitleRotatedClockWise /
	RightTitleRotatedCounterClockWise

2002-03-18  Dominik Vogt  <dominik.vogt@gmx.de>

	* acconfig.h:
	* vms/config.h (FMiniIconsSupported):
	removed last traces of MINI_ICONS ifdef

	* fvwm/windowlist.c (CMD_WindowList):
	* fvwm/update.c (apply_window_updates):
	* fvwm/style.h:
	* fvwm/style.c (merge_styles):
	(parse_and_set_window_style):
	(check_window_style_change):
	* fvwm/screen.h:
	* fvwm/module_interface.c (SendMiniIcon):
	(BroadcastMiniIcon):
	(CMD_Send_WindowList):
	* fvwm/fvwm.h (FvwmWindow):
	* fvwm/ewmh_icons.c (ewmh_WMIcon):
	(EWMH_DoUpdateWmIcon):
	(ewmh_SetWmIconFromPixmap):
	(EWMH_DeleteWmIcon):
	(EWMH_SetIconFromWMIcon):
	* fvwm/builtins.c (ReadDecorFace):
	* fvwm/borders.c (DrawButton):
	(CMD_BorderStyle):
	(CMD_BorderStyle):
	* fvwm/add_window.c (setup_window_structure):
	(setup_mini_icon):
	(destroy_mini_icon):
	(change_mini_icon):
	(AddWindow):
	* acconfig.h (FMiniIconsSupported):
	replaced all MINI_ICONS ifdefs with FMiniIconsSupported to enable
	compiler checks

	* fvwm/screen.h:
	removed an FANCY_TITLEBARS ifdef

	* fvwm/borders.c (border_draw_one_part):
	(border_draw_border_parts):
	(border_draw_all_parts):
	(draw_clipped_decorations_with_geom):
	performance enhancement

2002-03-17  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/frame.c (frame_move_resize_step):
	force setting up the border when function is called with FRAME_MR_SETUP
	(frame_setup_window_internal):
	removed duplicate frame setup

	* fvwm/borders.c (border_get_parts_and_pos_to_draw):
	fixed logic bug
	(draw_clipped_decorations_with_geom):
	do not flush the X queue after drawing; let the caller do it

	* fvwm/frame.c (frame_get_sidebar_geometry):
	fixed layout of windows with a small height
	(frame_hide_changing_window_parts):
	fixed flickering

	* fvwm/borders.c:
	* fvwm/frame.c:
	made good progress with frame layout rewrite. I think it is already
	considerably faster.
	some general clean up

	* fvwm/add_window.c (setup_decor_window):
	function removed

	* fvwm/windowshade.c (CMD_WindowShade):
	* fvwm/stack.c (verify_stack_ring_consistency):
	(RaiseOrLowerWindow):
	* fvwm/move_resize.c (resize_move_window):
	(move_window_doit):
	(draw_move_resize_grid):
	* fvwm/icons.c (DrawIconWindow):
	* fvwm/icccm2.c (CloseICCCM2):
	(convertProperty):
	(HandleSelectionRequest):
	* fvwm/fvwm.c (main):
	(SaveDesktopState):
	* fvwm/focus.c (DoSetFocus):
	* fvwm/ewmh.c (EWMH_ManageKdeSysTray):
	* fvwm/events.c (HandlePropertyNotify):
	(HandleButtonPress):
	(HandleConfigureRequest):
	* fvwm/add_window.c (RestoreWithdrawnLocation):
	(Reborder):
	* fvwm/builtins.c (CMD_Delete):
	(CMD_Destroy):
	(CMD_Close):
	(CMD_FakeClick):
	* fvwm/menus.c (paint_menu):
	(DestroyMenu):
	* fvwm/misc.c (UngrabEm):
	(GrabEm):
	* fvwm/schedule.c (execute_obj_func):
	* fvwm/add_window.c (hide_screen):
	(destroy_window):
	use XFlush instead of XSync when the latter is not necessary

	* libs/fvwmrect.c (fvwmrect_rectangles_equal):
	new function

	* fvwm/add_window.c (adjust_fvwm_internal_windows):
	inform frame module if the window with the hide windows dies

	* fvwm/placement.c (PlaceWindow):
	(CMD_PlaceAgain):
	* fvwm/add_window.c (setup_window_attr):
	(setup_frame_attributes):
	(AddWindow):
	(RestoreWithdrawnLocation):
	(setup_window_placement):
	* fvwm/geometry.c (gravity_translate_to_northwest_geometry):
	(get_title_geometry):
	* fvwm/fvwm.c (InitVariables):
	* fvwm/frame.c (frame_setup_frame):
	* fvwm/colormaps.c (HandleColormapNotify):
	(InstallWindowColormaps):
	* fvwm/events.c (HandleConfigureRequest):
	(HandleUnmapNotify):
	* fvwm/fvwm.h (FvwmWindow):
	removed attr member of FvwmWindow and replaced by a structure defined
	ourselves that is much smaller

	* fvwm/add_window.c (hide_screen):
	don't use save_unders and backing_store for the window used in recapture

	* fvwm/frame.c (frame_init):
	* fvwm/fvwm.c (main):
	new function to initialise frame module

	* libs/fvwmrect.c (fvwmrect_subtract_rectangles):
	new function

2002-03-16  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/frame.c:
	clean up

	* fvwm/borders.h (enum):
	* fvwm/borders.c (draw_clipped_decorations_with_geom):
	(border_get_parts_and_pos_to_draw):
	* fvwm/fvwm.h (struct):
	some clean up
	fixed calculations of which border parts to draw

	* fvwm/fvwm2.1:
	corrected some typos
	* fvwm/frame.c:
	* fvwm/borders.c:
	handle marks work again

2002-03-16  Dan Espen  <dane@mk.telcordia.com>

	* AUTHORS: New author added.

2002-03-16  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/frame.c:
	* fvwm/borders.c:
	* fvwm/add_window.c (setup_frame_stacking):
	* fvwm/cursor.c (CMD_CursorStyle):
	* fvwm/events.c (HandleExpose):
	(HandleMapNotify):
	(HandleEnterNotify):
	(HandleLeaveNotify):
	(GetContext):
	* fvwm/geometry.c (get_title_button_geometry):
	* fvwm/virtual.c (map_window):
	* fvwm/add_window.c (setup_parent_window):
	(setup_resize_handle_cursors):
	(setup_resize_handle_windows):
	(resize_resize_handle_windows):
	(change_resize_handle_windows):
	some progress with new frame layout

	* fvwm/add_window.c (setup_visible_name):
	fixed off-by-one bug in setup_visible_name
	maximum window number can be set in defaults.h

2002-03-15  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/windowlist.h:
	* fvwm/virtual.h:
	* fvwm/update.h:
	* fvwm/style.h:
	* fvwm/read.h:
	* fvwm/placement.h:
	* fvwm/menus.h:
	* fvwm/move_resize.h:
	* fvwm/icons.h:
	* fvwm/geometry.h:
	* fvwm/frame.h:
	* fvwm/focus.h:
	* fvwm/events.h:
	* fvwm/borders.h:
	* fvwm/add_window.h:
	* fvwm/ewmh_names.c:
	* fvwm/ewmh_icons.c:
	* fvwm/ewmh_events.c:
	* fvwm/ewmh.c:
	* fvwm/frame.c:
	* fvwm/menucmd.c:
	* fvwm/schedule.c:
	* fvwm/geometry.c:
	* fvwm/gnome.c:
	* fvwm/windowlist.c:
	* fvwm/cursor.c:
	* fvwm/update.c:
	* fvwm/bindings.c:
	* fvwm/colormaps.c:
	* fvwm/decorations.c:
	* fvwm/conditional.c:
	* fvwm/misc.c:
	* fvwm/read.c:
	* fvwm/placement.c:
	* fvwm/fvwm.c:
	* fvwm/virtual.c:
	* fvwm/session.c:
	* fvwm/functions.c:
	* fvwm/stack.c:
	* fvwm/icons.c:
	* fvwm/module_interface.c:
	* fvwm/style.c:
	* fvwm/add_window.c:
	* fvwm/events.c:
	* fvwm/builtins.c:
	* fvwm/move_resize.c:
	* fvwm/borders.c:
	* fvwm/menus.c:
	* fvwm/fvwm.h (FvwmWindow):
	moved all windows into a separate sub structure and wrote access macros
	renamed FvwmWindow argument to builtin commands to "fw"
	renamed tmp_win to fw everywhere

	* fvwm/borders.c (RedrawBorder):
	* fvwm/decorations.c (SelectDecor):
	* fvwm/add_window.c (setup_style_and_decor):
	(setup_resize_handle_cursors):
	* fvwm/window_flags.h:
	* fvwm/fvwm.h (struct):
	added new member has_handles and new macro HAS_HANDLES

	* fvwm/decorations.c (SelectDecor):
	fixed the NoHandles style

	* fvwm/decorations.c (SelectDecor):
	* fvwm/style.c (check_window_style_change):
	(parse_and_set_window_style):
	* fvwm/style.h:
	* fvwm/fvwm.h (struct):
	renamed has_no_handles to has_no_border

2002-03-15  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.h:
	* libs/Fft.c (is_utf8_encoding):
	Compilation fixes

	* libs/Flocale.h:
	s/COMPUND_TEXT/COMPOUND_TEXT

	* fvwm/fvwm2.1:
	Removed matrix xft specification doc as now it is use internally by
	fvwm

	* libs/Flocale.c (FlocaleRotateDrawString):
	(FlocaleUnloadFont):
	(FlocaleDrawString):
	(FlocaleTextWidth):
	* libs/Fft.h:
	* libs/Fft.c (FftGetRotatedFont):
	(FftGetFont):
	(FftDrawString):
	(FftTextWidth):
	* fvwm/borders.c (DrawMultiPixmapTitlebar):
	(RedrawTitle):
	* fvwm/geometry.c (get_title_font_size_and_offset):
	* fvwm/style.c (parse_and_set_window_style):
	(check_window_style_change):
	* fvwm/update.c (apply_window_updates):
	* fvwm/update.h:
	* fvwm/style.h:
	* fvwm/fvwm.h:
	* fvwm/window_flags.h:
	Implemented vertical text rendering, new style SideTitleTextDefault,
	SideTitleTextTopToBottom, SideTitleTextBottomToTop

2002-03-13  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/fvwm.h:
	removed inclusion of fvwmdebug.h

	* libs/gravity.c (ParseDirectionArgument):
	fixed direction parsing

	* fvwm/menus.c (get_menu_options):
	fixed a compiler warning

2002-03-12  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/bindings.c (ParseBinding):
	fixed compiler warning

	* fvwm/ewmh_events.c (EWMH_GetIconGeometry):
	* fvwm/ewmh.h:
	fixed compilation w/ --disable-ewmh

	* fvwm/windowlist.c (CMD_WindowList):
	fixed parsing of conditions versus position of window list broken with
	a recent "fix"

2002-03-11  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Fft.h:
	* libs/Fft.c (FftTextWidth):
	(is_utf8_encoding):
	(FftGetFontWidths):
	(FftDrawString):
	removed the HAVE_XFT_UTF8 ifdefs and fixed not setting FftUtf8Support
	if HAVE_XFT was not set.

	* fvwm/events.h (XEVMASK_DECORW):
	select EnterNotify and LeaveNotify on frame instead of decor_w

	* fvwm/add_window.c (setup_title_window):
	(setup_button_windows):
	(setup_resize_handle_windows):
	frame window is the new parent of the title, button and handle windows
	(setup_frame_stacking):
	new stacking order of decoration windows

	* fvwm/menuitem.c (menuitem_paint):
	* fvwm/events.c (HandleExpose):
	xft fixes

	* fvwm/move_resize.c (unmaximize_fvwm_window):
	don't force to redraw the frame

	* libs/gravity.c (gravity_get_offsets):
	(gravity_move):
	(gravity_resize):
	functions moved to gravity.c

2002-03-10  olicha  <olivier.chapuis@free.fr>

	* acconfig.h (HAVE_XFT_UTF8):
	* configure.in:
	* libs/Fft.c (is_utf8_encoding):
	(FftGetFontWidths):
	(FftDrawString):
	(FftTextWidth):
	Detected if Xft can handle utf8 string

	* libs/Fft.h:
	* fvwm/menuitem.c (menuitem_paint):
	* fvwm/events.c (HandleExpose):
	Fixed Xft related compilation failure and warning

2002-03-10  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/virtual.c:
	* fvwm/update.c:
	* fvwm/move_resize.c:
	* fvwm/icons.c:
	* fvwm/focus.c:
	* fvwm/events.c:
	* fvwm/builtins.c:
	* fvwm/add_window.c:
	* fvwm/frame.c (frame_setup_window):
	(frame_force_setup_window):
	(frame_setup_shape):
	SetupFrame renamed to frame_setup_window
	ForceSetupFrame renamed to frame_force_setup_window
	SetShape renamed to frame_setup_shape

	* fvwm/windowshade.c:
	moved most code to frame.c

	* fvwm/frame.c (SetShape):
	(SetupTitleBar):
	(set_decor_gravity):
	(ForceSetupFrame):
	(SetupFrame):
	functions moved to new file

	(SetupTitleBar):
	(frame_setup_title_bar):
	renamed function

	* libs/Parse.h:
	direction code moved to gravity.[ch]

	* fvwm/windowshade.c (CMD_WindowShade):
	* fvwm/geometry.c (get_shaded_geometry):

	* libs/FScreen.c (FScreenInit):
	(FScreenUpdateEmulationMapState):
	changed Xinerame emulation layout

	* fvwm/fvwm2.1:
	Corrected the description of the XineramaPrimaryScreen command that was
	essentially lying.

2002-03-09  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menus.c (menu_tear_off):
	(unlink_item_from_menu):
	(menu_strip_tear_off_title):
	use the text from a title item as the tear off menu title if the menu
	begins with a title; skip separators and tear off bars at the front of
	the menu

	* **/*.[ch]:
	implemented titleatleft and titleatright styles; titles are not drawn
	vertically yet

	* fvwm/style.c (check_window_style_change):
	* fvwm/update.c (apply_window_updates):
	* fvwm/ewmh_names.c (EWMH_WMIconName):
	(EWMH_WMName):
	(charset_to_utf8):
	* fvwm/ewmh.c (ksmserver_workarround):
	* fvwm/update.c (apply_window_updates):
	* fvwm/conditional.c (MatchesConditionMask):
	* fvwm/fvwm.c (main):
	* fvwm/session.c (SaveWindowStates):
	(matchWin):
	(MatchWinToSM):
	* fvwm/functions.c (expand):
	* fvwm/stack.c (dump_stack_ring):
	(verify_stack_ring_consistency):
	* fvwm/module_interface.c (BroadcastWindowIconNames):
	(CMD_Send_WindowList):
	* fvwm/add_window.c (free_window_names):
	(free_window_names):
	* fvwm/events.c (HandlePropertyNotify):
	* fvwm/builtins.c (CMD_Wait):
	* fvwm/style.c (CMD_DestroyStyle):
	(lookup_style):
	Adapted to changes of Flocale.h

	* acconfig.h:
	removed COMPUND_TEXT ifdef

	* configure.in:
	mutibyte defaults to on

	* acconfig.h:
	* libs/Flocale.c:
	* libs/Flocale.h:
	* fvwm/fvwm.h (FvwmWindow):
	cleaned up Flocale stuff for better information hiding

	* libs/Flocale.c (get_FlocaleFontSet):
	(get_FlocaleFont):
	added a new font strucht member min_char_offset for vertical text

	* libs/Flocale.c (get_FlocaleFontSet):
	fixed a bug in descent calculation

	* fvwm/fvwm.h (FvwmWindow):
	removed title_g

	* fvwm/borders.c (RedrawButtons):
	(SetupTitleBar):
	(RedrawBorder):
	(SetupFrame):
	(RedrawTitle):
	(DrawMultiPixmapTitlebar):
	don't use title_g or boundary_width

	* libs/Flocale.c (FlocaleTextWidth):
	* libs/Flocale.c (FlocaleDrawString):
	added interface for vertical strings
	* libs/Flocale.h (FlocaleWinString):
	added flags structure w/ is_vertical_string flag

	* fvwm/borders.c (RedrawTitle):
	(DrawMultiPixmapTitlebar):
	* fvwm/screen.h (ScreenInfo):
	* fvwm/icons.c (DrawIconWindow):
	* fvwm/move_resize.c (DisplayPosition):
	(DisplaySize):
	* fvwm/screen.h (ScreenInfo):
	removed ScratchStr and TitleStr; *please* don't use global variables
	without need

	* fvwm/move_resize.c (ParseOneResizeArgument):
	(GetResizeArguments):
	(GetResizeMoveArguments):
	(resize_window):
	(resize_move_window):
	* fvwm/module_interface.c (CONFIGARGS):
	(OLDCONFIGARGS):
	(CONFIGARGSNEW):
	* fvwm/placement.c (PlaceWindow):
	* fvwm/add_window.c (setup_title_window):
	(setup_button_windows):
	(setup_parent_window):
	(resize_resize_handle_windows):
	(change_resize_handle_windows):
	(AddWindow):
	* fvwm/geometry.c (get_window_borders):
	(gravity_get_naked_geometry):
	(gravity_add_decoration):
	(constrain_size):
	don't use title_g.width and title_g.height anymore

	* libs/defaults.h (EXTRA_TITLE_FONT_WIDTH):
	new macro

	* fvwm/borders.c (SetupTitleBar):
	* fvwm/add_window.c (setup_title_window):
	don't use title_g.x and title_g.y anymore
	(setup_title_geometry):
	new function

	* fvwm/fvwm.h (FvwmWindow):
	replaced title_g by title_length and title_thickness
	renamed title_text_y to title_text_offset

	* fvwm/add_window.c (setup_style_and_decor):
	(setup_parent_window):
	* fvwm/decorations.c (SelectDecor):
	* fvwm/placement.c (PlaceWindow):
	* fvwm/windowlist.c (CMD_WindowList):
	* fvwm/events.c (SendConfigureNotify):
	(HandlePropertyNotify):
	(HandleMapNotify):
	* fvwm/move_resize.c (DisplaySize):
	(ParseOneResizeArgument):
	(GetResizeArguments):
	(GetResizeMoveArguments):
	(resize_window):
	(resize_move_window):
	* fvwm/geometry.c (gravity_get_naked_geometry):
	(gravity_add_decoration):
	(constrain_size):
	don't use boundary_width anymore

	* fvwm/borders.c (SetupTitleBar):
	made static

	* fvwm/fvwmdebug.c:
	removed outdated file that was never used

	* fvwm/move_resize.c (move_window_doit):
	fixed GNOME and EWMH hints when unsticking a window

	* fvwm/virtual.c (CMD_MoveToDesk):
	unstick windows when MoveToDesk is used

	* fvwm/builtins.c:
	* fvwm/windowshade.c (CMD_WindowShade):
	(CMD_WindowShadeAnimate):
	functions moved to windowshade.c

	* fvwm/window_flags.h:
	* fvwm/menus.c (pop_menu_up):
	* fvwm/builtins.c (CMD_WindowShade):
	* fvwm/move_resize.c (resize_window):
	* fvwm/icons.c (AutoPlaceIcon):
	* fvwm/borders.c (SetupFrame):
	don't use HAS_BOTTOM_TITLE any more
	(ButtonPosition):
	function removed

	* fvwm/geometry.c (get_title_font_width_and_offset):
	* fvwm/geometry.c (set_window_border_size):
	* fvwm/geometry.c (is_window_border_minimal):
	* fvwm/geometry.c (get_window_borders_no_title):
	* fvwm/geometry.c (get_shaded_client_window_pos):
	* fvwm/geometry.c (get_icon_corner):
	* fvwm/geometry.c (get_title_gravity):
	* fvwm/geometry.c (get_title_geometry):
	* fvwm/borders.c (get_button_number):
	new functions

	* fvwm/borders.c (SetupFrame):
	(SetShape):
	* fvwm/events.c (HandleShapeNotify):
	* fvwm/borders.c (SetupTitleBar):
	* fvwm/update.c (apply_window_updates):
	* fvwm/add_window.c (setup_window_font):
	removed title_top_height

	* libs/defaults.h (WINDOW_FREAKED_OUT_SIZE):
	renamed

	* fvwm/events.c (SendConfigureNotify):
	* fvwm/events.c (HandleConfigureRequest):
	preparations for W/E titles
	don't use title_top_height any more

	* fvwm/ewmh_events.c (ewmh_WMStateShaded):
	use title_dir flags

	* fvwm/geometry.c (get_window_borders):
	* fvwm/style.c (parse_and_set_window_style):
	(check_window_style_change):
	* fvwm/style.h (SCSET_TITLE_DIR):
	* fvwm/window_flags.h (GET_TITLE_DIR):
	* fvwm/fvwm.h (struct):
	replaced has_bottom_title flag with title_dir that can be DIR_N, DIR_S,
	DIR_W or DIR_E

	* libs/Parse.c (ParseDirectionArgument):
	* libs/Parse.h:
	use new type direction_type

2002-03-06  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/ewmh.c (EWMH_SetFrameStrut):
	use function from geometry.c to get the border size

	* fvwm/geometry.c (get_shaded_geometry):
	added code for shading in all directions

2002-03-07  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/bindings.c (ParseBinding): Handle key_string lengths up to 30.

2002-03-07  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.c (FInitLocale):
	* fvwm/fvwm.c (main):
	Set the locale using "" as locale argument

2002-03-07  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/fvwm2.1:
	fixed some typos and indentation of several new variable entries

2002-03-06  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/functions.h (enum):
	* fvwm/functions.c (func_config):
	* fvwm/commands.h:
	* fvwm/conditional.c (CMD_ThisWindow):
	renamed command "This" to "ThisWindow"

	* fvwm/conditional.c (Circulate):
	"Current" no longer selects a random window when no window is focused

	* fvwm/icccm2.c (SetupICCCM2):
	removed debug fprintf

	* fvwm/functions.c (expand_extended_var):
	implemented new extended variables pointer.x, pointer.x, pointer.wx,
	pointer.wy, pointer.cx and pointer.cy.

	* libs/Parse.c (ParseDirectionArgument):
	allow N, S, W, E, NW, SW, SE, NE for direction arguments

	* fvwm/builtins.c (CMD_WindowShade):
	fixes for animated shading w/ titleatbottom+north and titleattop+south

2002-03-06  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/move_resize.c (moveLoop):
	(resize_window):
	* fvwm/virtual.c (HandlePaging):
	moving/resizing windows opaque is much faster

2002-03-05  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/add_window.c (resize_resize_handle_windows):
	(change_resize_handle_windows):
	(setup_window_font):
	fixed changing the handlewidth style

	* fvwm/update.c (apply_window_updates):
	* fvwm/geometry.c (update_absolute_geometry):
	* fvwm/builtins.c (CMD_WindowShade):
	* fvwm/ewmh_events.c (ewmh_WMStateShaded):
	* fvwm/conditional.c (CreateConditionMask):
	* fvwm/geometry.c (get_shaded_geometry):
	* fvwm/session.c (MatchWinToSM):
	* fvwm/add_window.c (setup_window_structure):
	(AddWindow):
	* fvwm/window_flags.h (SHADED_DIR):
	* fvwm/fvwm.h (struct):
	implemented new WindowShade options "North" and "South" to allow shading
	a window in either direction, regardless of if the title is at the top
	or bottom.

	* libs/Module.c (module_expand_action):
	new convenience function for modules

2002-03-03  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm2.1: Fixes to the font section.

2002-03-03  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/conditional.c (CMD_WindowId):
	set the correct context window for unmanaged windows

	* fvwm/icons.c (DrawIconWindow):
	raise the icon title even if it's too small to be expanded

	* fvwm/conditional.c (CMD_Cond):
	Fixed it the right way this time
	(CMD_Any):
	same fix for the 'Any' command
	(circulate_cmd):
	(CMD_Prev):
	(CMD_Next):
	(CMD_None):
	(CMD_Any):
	(CMD_Current):
	unified circulating functions into a single one
	(CMD_Pick):
	Pick allows to pick functions that have CirculateSkip set
	fixed a memory leak
	(select_cmd):
	(CMD_This):
	(CMD_Pick):
	(CMD_PointerWindow):
	unified selecting functions into a single one
	(CMD_PointerKey):
	(CMD_All):
	Allow user to override the default CirculateHit of these functions

	* fvwm/conditional.c (CMD_Cond):
	Fixed a problem w/ the window selection

	* fvwm/menus.h:
	* fvwm/menus.c:
	* fvwm/menudim.h:
	* fvwm/menudim.c:
	* fvwm/menustyle.h:
	* fvwm/menustyle.c:
	* fvwm/menucmd.c:
	* fvwm/menuitem.c:
	* fvwm/menuitem.h:
	moved some of the menu code into separate files
	more work on tear off menus; windowlist can now be torn off without a
	memory leak

	* fvwm/template.c:
	* fvwm/template.h:
	added templates for new source files

	* libs/Picture.c (fvwmlib_clone_color):
	new function

	* fvwm/menus.c (make_menu):
	(update_menu):
	removed unused parameter from make_menu()

	* fvwm/fvwm2.1 (Example):
	corrected statement about CaptureHonorsStartsOnPage being the default

2002-03-03  Mikhael Goikhman  <migo@homemail.com>

	* INSTALL.fvwm:
	* Makefile.am:
	* configure.in:
	added and documented --disable-bidi and --disable-perllib

2002-03-01  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/geometry.c (get_window_borders):
	fixed calculation of $[cw.y] and $[cw.height]

	* fvwm/move_resize.c (resize_move_window):
	windows are mo longer hilighted after ResizeMove or ResizeMoveMaximize

2002-03-01  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/move_resize.c (resize_move_window):

2002-02-28  Dominik Vogt  <dominik.vogt@gmx.de>

	* configure.in:
	re-added with-xinerama-emulation option that was removed recently

2002-02-28  Mikhael Goikhman  <migo@homemail.com>

	* INSTALL.fvwm:
	* NEWS:
	* fvwm/fvwm2.1:
	several corrections and rewording

2002-02-28  olicha  <olivier.chapuis@free.fr>

	* fvwm/fvwm2.1:
	New section FONT NAMES AND FONT LOADING

	* INSTALL.fvwm:
	* NEWS:
	Document --enable-xft

	* libs/Fft.c (get_FlocaleXftFont):
	Used the xft font height in the place of ascent+descent

	* fvwm/icons.c (DrawIconWindow):
	Fixed the fg colors of the icon title

2002-02-27  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/conditional.c (CMD_CondCase):
	fixed CondCase command
	(CMD_Cond):
	fixed numeric return codes

	* fvwm/add_window.c (CMD_Recapture):
	fixed focus loss w/ SloppyFocus and MouseFocus after RecaptureWindow

	* acinclude.m4 (smr_CHECK_LIB):
	disabled a destructing gnome_prefix logic again

	* fvwm/events.c (GetContext):
	* libs/Bindings.c (win_contexts):
	* libs/fvwmlib.h:
	new contexts for individual parts of the window border

2002-02-26  Mikhael Goikhman  <migo@homemail.com>

	* acinclude.m4:
	disabled a destructing gnome_prefix logic

	* configure.in:
	replaced fribidi detection mechanism, now fribidi-config is used

2002-02-26  olicha  <olivier.chapuis@free.fr>

	* acconfig.h (HAVE_XFT):
	* acinclude.m4:
	* configure.in:
	* libs/Fft.c (new file):
	* libs/Flocale.c (FlocaleLoadFont):
	(FlocaleUnloadFont):
	(FlocaleDrawString):
	(FlocaleTextWidth):
	(get_FlocaleFontSet):
	(get_FlocaleFont):
	(get_FlocaleFontOrFontSet):
	* libs/Flocale.h:
	* fvwm/Makefile.am:
	Added anti-alised font rendering using Xft. This is off by default.
	A font can now be given as a ";" separated list of either ","
	separated list of XFLD font name or Xft font name with "xft:" as
	prefix, e.g.:
          xft:Verdana:Regular:size=12:rgba=rgb;-adobe-*-medium-r-*--12-*,fixed
	See Flocale.h for details

	* fvwm/events.c (HandleExpose):
	* fvwm/menus.c (paint_item):
	Always clear the text area before drawing text with an Xft font

2002-02-26  Dominik Vogt  <dominik.vogt@gmx.de>

	* acinclude.m4 (smr_CHECK_LIB):
	fixed a bug with variable expansion and autoconf cache values

2002-02-24  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menus.c (seek_submenu_instance):
	(FindPopup):
	* fvwm/fvwm.c (InitVariables):
	some general menu clean up

	* fvwm/move_resize.c (AnimatedMoveAnyWindow):
	* fvwm/move_resize.h (resize_geometry_window):
	* fvwm/menus.c (animated_move_back):
	(pop_menu_up):
	(ParentalMenuRePaint):
	Removed the global variables for parental relativity.  Please *do not*
	use globals in menus.c or anywhere else.  I'm trying to remove most
	globals in the long run.

	* libs/Graphics.c (do_relieve_rectangle):
	removed debug code

	* fvwm/menus.c (MenuInteraction):
	fixed tearing off menus by selecting a tear off item with the keyboard

	* fvwm/menus.c (MenuInteraction):
	fixed menus not popping down sometimes

	* fvwm/functions.c (CMD_TearMenuOff):
	* fvwm/menus.c (AddToMenu):
	(MenuInteraction):
	(warp_pointer_to_item):
	(get_selectable_item_index):
	(get_selectable_item_from_index):
	(get_selectable_item_from_section):
	(menuShortcuts):
	(paint_item):
	(draw_tear_off_bar):
	* fvwm/menus.h (MI_IS_TEAR_OFF_BAR):
	New command "TearMenuOff" in menus.  In a normal item, this tears off
	the menu when selected.  If the item has no title, it is drawn as a
	dashed line too.  Pressing button 2 over a title tears out the menu too.
	some clean up

	* fvwm/menus.c (make_menu_window):
	fixed problem w/ mapping menus, performance enhancement

	* fvwm/builtins.c (CMD_Destroy):
	(CMD_Close):
	fixed core dump

	* fvwm/functions.c (execute_function):
	(expand_extended_var):
	(expand):
	new variable cond.rc that returns the last return code of a conditinal
	command

2002-02-23  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/conditional.c (CMD_Cond):
	(CMD_CondCase):
	(CMD_Break):
	* fvwm/commands.h:
	* fvwm/functions.h:
	* fvwm/functions.c:
	new conditional commands Cond, CondCase and Break

	* fvwm/ewmh_events.c (ewmh_WMStateSticky):
	(ewmh_WMStateShaded):
	(ewmh_WMState):
	(ewmh_MoveResize):
	(ewmh_WMStateHidden):
	(ewmh_WMDesktop):
	(ewmh_CloseWindow):
	(ewmh_ActiveWindow):
	(ewmh_DesktopGeometry):
	* fvwm/gnome.c (GNOME_HandlePropRequest):
	* fvwm/windowlist.c (CMD_WindowList):
	* fvwm/update.c (apply_window_updates):
	* fvwm/conditional.c (CMD_Pick):
	(CMD_Prev):
	(CMD_Next):
	(CMD_None):
	(CMD_Any):
	(CMD_Current):
	(CMD_PointerWindow):
	(CMD_This):
	(CMD_All):
	(CMD_Direction):
	(CMD_WindowId):
	* fvwm/read.c (run_command_stream):
	* fvwm/fvwm.c (Done):
	(SetRCDefaults):
	(StartupStuff):
	(main):
	* fvwm/module_interface.c (ExecuteModuleCommand):
	* fvwm/move_resize.c (handle_stick):
	* fvwm/add_window.c (AddWindow):
	* fvwm/events.c (HandleKeyPress):
	(HandleButtonPress):
	(HandleClientMessage):
	(HandleButtonRelease):
	(HandlePropertyNotify):
	* fvwm/builtins.c (CMD_DestroyDecor):
	(AddToDecor):
	(CMD_StrokeFunc):
	* fvwm/functions.h (func_type):
	* fvwm/functions.c (old_execute_function):
	(execute_function):
	(execute_complex_function):

	* fvwm/fvwm.h (fvwm_cond_func_rc):
	inplemented return codes OK, NO_MATCH and ERROR for conditional commands

	* fvwm/ConfigFvwmDefaults:
	set some default styles for tear off menu windows

	* fvwm/menus.c (menuShortcuts):
	ignore actions that would normally close a menu if it's a tear off menu
	<Backspace> creates a tear off menu
	<Escape> closes a tear off menu

	* fvwm/builtins.c (CMD_Delete):
	(CMD_Destroy):
	(CMD_Close):
	* fvwm/menus.c (DestroyMenu):
	(make_menu_window):
	(MenuInteraction):
	* fvwm/menus.h (MenuRootDynamic):
	Each menu window is created with a unique display to prevent fvwm from
	being killed when a tear off menu is destroyed.  Of course this is
	inefficient, but still better than writing a menu module.

2002-02-23  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	autogenerate perllib/FVWM/Module/Makefile

2002-02-23  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/move_resize.c (moveLoop):
	fixed a problem with keyboard movement vs. EdgeResistance

2002-02-22  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c:
	fixed problem with root bindings and xfishtank

	* fvwm/windowlist.c (CMD_WindowList):
	applied patch by to Darren Marshall to fix placement of window list on
	wrong xinerama screen

	* libs/Parse.c (GetSuffixedIntegerArguments):
	integer arguments that must not have a suffix but have one are ignored

	* fvwm/icons.c (DeIconify):
	(Iconify):
	applied patch by Markus Schwarzenberg to fix a rare problem with the
	is_map_pending flag, iconified icons and restart

2002-02-22  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/commands.h:
	* fvwm/conditional.c (CMD_This):
	* fvwm/functions.c:
	* fvwm/functions.h:
	* fvwm/fvwm2.1:
	* NEWS:
	added new conditional command This

2002-02-21  Mikhael Goikhman  <migo@homemail.com>

	* acconfig.h:
	* configure.in:
	added fribidi library detection

2002-02-12  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.h (FlocaleFont):
	* libs/Flocale.c (get_FlocaleFont):
	(get_FlocaleFontSet):
	Compute the ascent and descent of the FlocaleFont structure directly
	from the XFontSetExtents data in the case of a fontset
	Added max_char_width to the FlocaleFont structure

	* libs/Makefile.am (libfvwm_a_SOURCES):
	* libs/GetFont.c:
	Removed libs/GetFont.c

	* fvwm/menus.c (FreeMenuStyle):
	(UpdateMenuStyle):
	(NewMenuStyle):
	(CMD_CopyMenuStyle):
	* fvwm/menus.h (MenuLook):
	Fixed default font handling font by using a new MenuLook flags
	USING_DEFAULT_FONT

	* fvwm/menus.c (UpdateMenuStyle):
	Fixed default font update

	* fvwm/fvwm.c (SetRCDefaults):
	(InitVariables):
	Load the real default font FALLBACK_FONT or MB_FALLBACK_FONT at
	fvwm initialization

2002-02-11  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	added FvwmPerl/* file generation

2002-02-11  olicha  <olivier.chapuis@free.fr>

	* INSTALL.fvwm:
	* NEWS:
	Multibyte news. Document --disable-compound-text and --disable-ewmh.

	* libs/Flocale.h:
	Added more documentation and change the MB_FALLBACK_FONT to
	"-*-fixed-medium-r-semicondensed-*-13-*,-*-fixed-medium-r-normal-*-14-*,
	-*-medium-r-normal-*-16-*" (with XFree) this should gives something
	more consistent with the none multibyte case.

2002-02-10  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh.c (EWMH_RestoreInitialStates):
	(EWMH_ExitStuff):
	* fvwm/events.c (HandleUnmapNotify):
	(HandleReparentNotify):
	* fvwm/ewmh_events.c (ewmh_WMStateShaded):
	(ewmh_WMStateSticky):
	(ewmh_WMStateHidden):
	Restore various ewmh initial states when a window is  unmapped or
	reparented

2002-02-10  Mikhael Goikhman  <migo@homemail.com>

	* Makefile.am:
	* configure.in:
	added support for new perllib directory

2002-02-09  olicha  <olivier.chapuis@free.fr>

	* libs/fvwmlib.h:
	* libs/Flocale.{c,h}:
	* acconfig.h:
	* configure.in:
	Rename I18N_MB to MULTIBYTE
	Added --disable-compound-text (COMPOUND_TEXT), so this is on by default

	* libs/Flocale.{c,h} (*):
	New Font and Text API. A cache is used for fonts information. Font
	loading is more powerfull as both font or fontset can be loaded.
	See Flocale.h for details, more comments will be added soon.
	Fortunately, it seems that there are no more memory problems with
	--enable-multibyte!
	If COMPOUND_TEXT, then non XA_STRING text properties are converted
	with XmbTextPropertyToTextList

	* fvwm/events.c (HandlePropertyNotify):
	* fvwm/misc.c (NewFontAndColor):
	* fvwm/icons.h:
	* fvwm/misc.h:
	* fvwm/menus.c (FreeMenuStyle):
	(NewMenuStyle):
	(CMD_CopyMenuStyle):
	(draw_underline):
	(calculate_item_sizes):
	(size_menu_horizontally):
	(paint_item):
	* fvwm/builtins.c (CMD_DefaultFont):
	(ApplyDefaultFontAndColors):
	* fvwm/add_window.c (destroy_icon_font):
	(setup_icon_font):
	(destroy_window_font):
	(setup_window_font):
	(free_window_names):
	(setup_window_name):
	(setup_icon):
	* fvwm/fvwm.h (FvwmWindow):
	* fvwm/move_resize.c (DisplayPosition):
	(resize_geometry_window):
	(DisplaySize):
	* fvwm/fvwm.c (InitVariables):
	* fvwm/icons.c (DrawIconWindow):
	(setup_icon_title_size):
	* fvwm/borders.c (RedrawTitle):
	(DrawMultiPixmapTitlebar):
	* fvwm/screen.h (ScreenInfo):
	Use the new Text and Font API

2002-02-07  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/module_interface.c (PositiveWrite):
	fixed core dump when a module died in the select of PositiveWrite()

	* fvwm/module_interface.c (initModules):
	(ClosePipes):
	(do_execute_module):
	(KillModule):
	(KillModuleByName):
	(CMD_SendToModule):
	(PositiveWrite):
	* fvwm/modconf.c (ModuleConfig):
	removed WITHOUT_KILLMODULE_ALIAS_SUPPORT ifdef; always off now

	* fvwm/icons.c (GetXPMFile):
	suppress unnecessary error message for xmb icons

	* fvwm/misc.c (fvwm_msg):
	* fvwm/misc.h (enum):
	added new fvwm_msg type "OLD" for deprecated commands

2002-02-07  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	generate fvwmbug, not fvwmbug.sh; prepare LOCAL_BUGADDR for it

	* INSTALL.fvwm:
	New section "Bug Reports".

2002-02-06  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/update.c (apply_window_updates):
	fixed propagation of window border and title colours to the modules

2002-02-05  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menus.c (do_menu):
	fixed leaving tear off menus when something is selected with the mouse

2002-02-03  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleEnterNotify):
	* fvwm/menus.c:
	more work on tear off menus

2002-02-02  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.h (XEVMASK_TEAR_OFF_MENU):
	* fvwm/menus.c (menu_enter_tear_off_menu):
	(find_entry):
	(menuShortcuts):
	(MenuInteraction):
	(pop_menu_up):
	properly calculate pointer position in tear off menus
	(MenuInteraction):
	fixed active wait w/ poopup/popdown delays

	* fvwm/windowlist.c (CMD_WindowList):
	don't initialise some variables twice

2002-01-31  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/add_window.c (CaptureOneWindow):
	properly recapture tear off menus

	(IS_MESSAGE_IN_MASK):
	(is_message_selected):
	(PositiveWrite):
	(PositiveWrite):
	* fvwm/schedule.c (deschedule):
	(squeue_execute):
	* fvwm/events.c (My_XNextEvent):
	* libs/queue.h:
	* fvwm/module_interface.c (ClosePipes):
	(CMD_ModuleSynchronous):
	(KillModule):
	performance enhancements; made macros out of simple functions

	* fvwm/builtins.c (CMD_WindowShade):
	don't redraw the decorations if window was not shaded or unshaded

	* fvwm/schedule.c (deschedule_obj_func):
	(execute_obj_func):
	fixed core dump when a scheduled command deschedules itself

2002-01-31  olicha  <olivier.chapuis@free.fr>

	* NEWS:
	FvwmButtons news

2002-01-31  Mikhael Goikhman  <migo@homemail.com>

	* NEWS:
	* fvwm/move.c (moveLoop):
	while moving if Mod1 (Alt/Meta) is pressed ignore snap attraction

	* fvwm/session.c (get_version_string):
	switch from static to date-based version string

	* configure.in:
	remove --enable-kanji compatibility option

	* fvwm/schedule.h:
	* libs/queue.h:
	fix warnings, gcc compains on having something after #endif

2002-01-31  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/builtins.c (CMD_Delete):
	(CMD_Close):
	(CMD_Destroy):
	don't crash fvwm when trying to close a tear off menu

	* fvwm/decorations.c (is_function_allowed):
	* fvwm/menus.c (menu_expose):
	(do_menu):
	* fvwm/events.c (HandleReparentNotify):
	(HandleUnmapNotify):
	* fvwm/add_window.c (AddWindow):
	(AddWindow):
	* fvwm/fvwm.h (struct):
	* fvwm/add_window.c (CaptureAllWindows):
	(CaptureOneWindow):
	* fvwm/events.h (flush_property_notify):
	* fvwm/events.c (HandleMapRequestKeepRaised):
	started work on tear off menus

	* fvwm/fvwm.c (main):
	* fvwm/events.c (CMD_Sync):
	(CMD_Synchronize):
	* fvwm/commands.h (CMD_Synchronize):
	* fvwm/functions.h (enum):
	* fvwm/functions.c (func_config):
	new commands XSync and XSynchronize for debugging

	* fvwm/conditional.c (CreateConditionMask):
	(MatchesConditionMask):
	* fvwm/builtins.c (CMD_State):
	* fvwm/fvwm.h (struct):
	* fvwm/functions.h:
	* fvwm/commands.h:
	* fvwm/functions.c (func_config):
	new command "State"
	new condition "State"

	* libs/queue.c:
	fixed core dump

2002-01-30  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/module_interface.c (AddToMessageQueue):
	(initModules):
	(DeleteMessageQueueBuff):
	(FlushMessageQueue):
	* fvwm/events.c (My_XNextEvent):
	* fvwm/module_interface.c (AddToCommandQueue):
	(ExecuteCommandQueue):
	use code from queue.c

	* fvwm/schedule.c:
	* fvwm/queue.c:
	* fvwm/queue.h:
	* fvwm/events.c (My_XNextEvent):
	"Schedule 0" commands are executed before event handling
	moved some of the chedule code into a new queue library

2002-01-30  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.c (FInitLocale): Fixed a miss print in an error msg

2002-01-30  olicha  <olivier.chapuis@free.fr>

	* libs/Flocale.c:
	* libs/Flocale.h:
	* libs/Makefile.am:
	* fvwm/fvwm.c (main):
	New libs files Flocale.{c,h} with a function to set the locale as
	the Xlib prog man says to do it. Use it in fvwm.c. There is also a
	function to get the charset (from ewmh_name.c) and which setlocale if
	this has not been done with the above function. This function is also
	call at fvwm2 init

	* fvwm/ewmh_names.c (charset_to_utf8):
	(utf8_to_charset):
	Use the Fcharset variable and remove get_charset

	* fvwm/ewmh_names.c (EWMH_SetVisibleName):
	A minor fix

	* libs/GetFont.c (GetFontSetOrFixed):
	Free the missing charset list as suggested by Alexander Kotelnikov.
	Report problems with missing charset only 5 times. Remove the
	STRICTLY_FIXED code

2002-01-30  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	a patch to config.status to generate scripts executable, may be handy;
	added generation of utils/fvwm24_convert

2002-01-30  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/schedule.c:
	* fvwm/functions.c (expand_extended_var):
	implemented $[schedule.last] and $[schedule.next] variables
	implemented new command "Deschedule"

	* fvwm/misc.c (get_server_time):
	fixed MouseFocus

2002-01-29  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/misc.c (get_server_time):
	* fvwm/events.c (My_XNextEvent):
	* fvwm/icccm2.c (SetupICCCM2):
	* fvwm/functions.h:
	* fvwm/commands.h:
	* fvwm/functions.c (func_config):
	* fvwm/schedule.c:
	implemented new command "Schedule"

	* fvwm/builtins.c (CMD_Exec):
	applied job control patch by Alexander Kotelnikov using the portable
	version of setpgrp()

	* libs/setpgrp.c (fvwm_setpgrp):
	* libs/setpgrp.h (fvwm_setpgrp):
	* libs/Makefile.am:
	* configure.in:
	added checks for setpgrp and setpgid

2002-01-29  olicha  <olivier.chapuis@free.fr>

	* acinclude.m4:
	Better test for iconv second argumeny

	* configure.in:
	Use gnu libiconv in priority against the system iconv

2002-01-29  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/stack.c (RaiseOrLowerWindow):
	(restack_windows):
	(collect_transients_recursive):
	* fvwm/icons.c (get_visible_icon_window_count):
	fixed stack ring corruption with icons that have either no picture or
	no title

2002-01-28  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh_names.c (charset_to_utf8):
	(utf8_to_charset):
	(EWMH_SetVisibleName):
	(get_charset):
	Better message errors in get_charset, use UTF-8 in the place of UTF8,
	set the ewmh visible (icon) name only if the fvwm visible name is
	different from the ICCCM (icon) window name, limit the number of
	conversions error messages to 10

2002-01-28  olicha  <olivier.chapuis@free.fr>

	* fvwm/functions.c (func_config):
	* fvwm/commands.h:
	* fvwm/builtins.c (CMD_PropertyChange):
	New undocumented command PropertyChange to send MX_PROPERTY_CHANGE
	messages

	* fvwm/module_interface.h:
	* fvwm/module_interface.c (BroadcastPropertyChange):
	* libs/Module.h (MX_PROPERTY_CHANGE):
	New module message MX_PROPERTY_CHANGE for all propose messages.

	* fvwm/events.c (HandlePropertyNotify):
	* libs/defaults.h:
	Send a MX_PROPERTY_CHANGE message with MX_PROPERTY_CHANGE_BACKGROUND
	as argument when fvwm2 detects that the root background change
 	Removed the ROOT_BG_CHANGE_STRING stuff

2002-01-27  Dominik Vogt  <dominik.vogt@gmx.de>

	* NEWS, configure.in:
	changed version to 2.5.1

	* fvwm/misc.c (get_pointer_fvwm_window):
	* fvwm/commands.h:
	* fvwm/functions.c (func_config):
	* fvwm/conditional.c (CreateConditionMask):
	(MatchesConditionMask):
	(CMD_PointerWindow):
	(CreateConditionMask):
	(CMD_Any):
	* fvwm/fvwm.h (WindowConditionMask):
	new conditions focused, !focused, haspointer, !haspointer
	new command PointerWindow that works like Current but on the window that
	currently contains the pointer
	new command Any which works like None but inverts the condition
	fixed parsing of conditions with more than one comma

	* fvwm/module_interface.h:
	* fvwm/module_interface.c (do_execute_module):
	(initModules):
	* libs/Module.h (MAX_XMSG_MASK):
	fixed default message mask for modules

	* fvwm/update.c (flush_window_updates):
	* fvwm/virtual.c (UnmapDesk):
	(MapDesk):
	(do_move_window_to_desk):
	* fvwm/icons.c (DeIconify):
	(DeIconify):
	* fvwm/events.c (HandlePropertyNotify):
	(HandleMapRequestKeepRaised):
	(HandleMapNotify):
	(HandleButtonPress):
	(HandleEnterNotify):
	(HandleLeaveNotify):
	* fvwm/focus.c (DoSetFocus):
	(MoveFocus):
	(SetFocusWindow):
	(ReturnFocusWindow):
	(DeleteFocus):
	(ForceDeleteFocus):
	(FocusOn):
	(restore_focus_after_unmap):
	Fixed a race condition with M_FOCUS_CHANGE events and window updates by
	suppressing the M_FOCUS_CHANGE message if the focus does not change in
	the flush_window_updates() function.

2002-01-24  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/placement.c (PlaceWindow):
	minor performance enhancement

2002-01-23  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/defaults.h:
	* fvwm/menus.c (MenuInteraction):
	(pointer_in_active_item_area):
	(pointer_in_passive_item_area):
	new menu style PopupActiveArea

2002-01-22  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/move_resize.c (CMD_ResizeMaximize):
	(CMD_ResizeMoveMaximize):
	fixed ResizeMaximize and ResizeMoveMaximize on pages other than 0 0

2002-01-21  olicha  <olivier.chapuis@free.fr>

	* fvwm/fvwm2.1:
	s/Penalities/Penalties/g

2002-01-19  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleLeaveNotify):
	(HandleEnterNotify):
	* fvwm/modconf.c (ModuleConfig):
	* fvwm/update.c (apply_window_updates):
	* fvwm/module_interface.c (BroadcastWindowIconNames):
	(CMD_Send_WindowList):
	(initModules):
	(do_execute_module):
	(PositiveWrite):
	(CMD_set_nograb_mask):
	(CMD_set_sync_mask):
	(CMD_set_mask):
	(set_mseggage_mask):
	(is_message_in_mask):
	(is_message_selected):
	* libs/Module.h:
	rewrote message interface to allow more than 32 messages with minimal
	changes in the existing interfaces.
	new module messages MX_ENTER_WINDOW and MX_LEAVE_WINDOW

	* fvwm/style.h:
	* fvwm/style.c (parse_and_set_window_style):
	* fvwm/fvwm.h (struct):
	* fvwm/events.c (HandleButtonPress):
	implemented new styles MouseFocusClickIgnoreMotion and
	MouseFocusClickIgnoreMotionOff

	* fvwm/focus.c (focus_grab_buttons):
	fixed button mask for > 5 buttons

2002-01-19  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh_icons.c (ewmh_SetWmIconFromPixmap):
	Save and restore the icon_pixmap_w and add comments

2002-01-19  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleEnterNotify):
	fixed EnterNotify events for icons

2002-01-18  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/*.c:
	* fvwm/stack.c (overlap_box):
	(overlap):
	* fvwm/icons.c (clear_icon):
	* fvwm/add_window.c (destroy_icon):
	* fvwm/fvwm.h (FvwmWindow):
	* fvwm/geometry.c (get_window_borders):
	(get_client_geometry):
	* libs/fvwmrect.h (struct):
	* fvwm/functions.c (expand_extended_var):
	implemented new extended variables cw.x, cw.y, cw.width, cw.height that
	return the geometry of the client window
	implemented new extended variables it.x, it.y, it.width, it.height that
	return the geometry of the icon title
	implemented new extended variables ip.x, ip.y, ip.width, ip.height that
	return the geometry of the icon picture
	implemented new extended variables i.x, i.y, i.width, i.height that
	return the geometry of the whole icon
	fixed $[w.height] when the window is shaded
	cleaned up icon geometry code

2002-01-17  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/commands.h:
	* fvwm/functions.c:
	* fvwm/functions.h:
	* fvwm/move_resize.c (unmaximize_fvwm_window):
	(maximize_fvwm_window):
	(CMD_Maximize):
	(CMD_ResizeMaximize):
	(CMD_Resize):
	(resize_window):
	(CMD_ResizeMove):
	(resize_move_window):
	(CMD_ResizeMoveMaximize):
	New command ResizeMaximize.  Works like Resize, but modifies the
	maximized size of the window, not the normal size.
	New command ResizeMoveMaximize that works similarly.
	(resize_move_window):
	fixed ResizeMove command

	* fvwm/functions.c (expand):
	fixed core dump when using something like $[$v] in a command

2002-01-17  olicha  <olivier.chapuis@free.fr>

	* libs/defaults.h (ROOT_BG_CHANGE_STRING):
	* fvwm/events.c (HandlePropertyNotify):
	* fvwm/fvwm.c (InternUsefulAtoms):
	* fvwm/extern.h:
	Send the ROOT_BG_CHANGE_STRING to modules when fvwm2 detects
	that the root background has changed. This uses the _XSETROOT_ID
	and XROOTPMAP_ID properties

	* fvwm/ewmh.c (atom_get):
	Be paranoid

2002-01-17  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/update.c (flush_window_updates):
	fixed unnecessary window style updates

	* fvwm/style.c (parse_and_set_window_style):
	* fvwm/add_window.c (RestoreWithdrawnLocation):
	(AddWindow):
	(setup_frame_attributes):
	* fvwm/fvwm.h (FvwmWindow):
	Fvwm does no longer disable backing store on all of its windows. This
	cause too many problems with some applications, e.g. rdist.  Introduced
	the new style BackingStoreWindowDefault that tells fvwm not to modify
	the backing store attribute on the client window - which now is the
	default.

2002-01-16  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/commands.h:
	* fvwm/functions.c (func_config):
	* libs/Module.c (SetMessageMask2):
	(SetNoGrabMask2):
	* libs/Module.h:

	* configure.in:
	fixed building with libstroke-0.5.1 on Solaris8

	* fvwm/stack.c (new_layer):
	* fvwm/borders.c (DrawButton):
	(RedrawButtons):
	(RedrawTitle):
	* fvwm/builtins.c (SetLayerButtonFlag):
	(do_button_style):
	* fvwm/screen.h (struct):
	Applied the layer button patch by Richard Curnow with a few
	modifications

	* fvwm/icons.c (GetIconBitmap):
	(GetIconWindow):
	Ignore client icons that have the wrong depth

	* fvwm/events.c (HandleEnterNotify):
	Tried to fix focusing problem w/ unclutter.

2002-01-15  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/functions.c (CheckActionType):
	remove debug code

	* fvwm/menus.c (paint_item):
	* fvwm/misc.c (is_function_allowed):
	* fvwm/move_resize.c (is_move_allowed):
	(is_resize_allowed):
	(is_maximize_allowed):
	* fvwm/decorations.c (check_if_function_allowed):
	combined all these functions into a new one
	use this function everywhere
	use the Fixed... styles to decide if a menu item is greyed or not

2002-01-10  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleExpose):
	eat up expose events even if the server claims that the expose count is
	zero; fixes a problem with many redraws of windows that are uncovered
	by shading a window above them

2002-01-10  olicha  <olivier.chapuis@free.fr>

	* fvwm/focus.c (DoSetFocus):
	* fvwm/move_resize.c (CMD_Maximize):
	(CMD_Maximize):
	(handle_stick):
	(CMD_ResizeMove):
	(CMD_Resize):
	* fvwm/icons.c (DeIconify):
	(DeIconify):
	(Iconify):
	* fvwm/gnome.c (GNOME_HandlePropRequest):
	* fvwm/ewmh_names.c (EWMH_WMName):
	* fvwm/events.c (HandleFocusIn):
	(HandlePropertyNotify):
	(HandleMapNotify):
	(HandleButtonPress):
	(HandleLeaveNotify):
	(HandleExpose):
	* fvwm/builtins.c (CMD_UpdateDecor):
	(CMD_WindowShade):
	* fvwm/borders.c (draw_clipped_decorations):
	(DrawDecorations):
	(RedrawDecorations):
	* fvwm/borders.h:
	Added a new argument to DrawDecoration similar to draw_window_parts,
	which indicate which part of the decor should be cleared. At present
	time only CLEAR_FRAME is taken in account and this is used in
	ShadeWindow to draw the decoration without flickering. This argument
	may be used in the future to reduce opaque resizing flickering

	* fvwm/builtins.c (CMD_WindowShade):
	Draw the decoration during unshading a window

	* fvwm/menus.c (ParentalMenuRePaint):
	Fixed transparent animated menu again

	* NEWS:
	Some update

2002-01-09  olicha  <olivier.chapuis@free.fr>

	* fvwm/style.c (CMD_Style):
	free all the elements of the ptmpstyle before freeing it

	* fvwm/menus.c (ParentalMenuRePaint):
	Fixed transparent animated menu with HilightBackOff

2002-01-09  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/style.c (merge_styles):
	fixed core dump w/ multiple use of the UseStyle style and HilightBack
	in the copied style

2002-01-07  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/modconf.c (send_ignore_modifiers):
	(send_move_threshold):
	(send_click_time):
	(send_colorsets):
	(send_color_limit):
	(send_image_path):
	(send_desktop_geometry):
	(CMD_Send_ConfigInfo):
	moved code into new functions

	* libs/defaults.h (DEFAULT_MODS_UNUSED):
	moved to defaults.h

	* fvwm/bindings.c (CMD_IgnoreModifiers):
	* fvwm/module_interface.c (broadcast_xinerama_state):
	* fvwm/modconf.c (send_ignore_modifiers):
	broadcast IgnoreModifiers to modules

	* fvwm/bindings.c (CMD_IgnoreModifiers):
	fixed IgnoreModifiers command without arguments
	* fvwm/fvwm2.1:
	corrected documentation of IgnoreModifiers command

2002-01-06  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/add_window.c:
	* fvwm/cursor.c:
	* fvwm/virtual.c:
	* fvwm/builtins.c:
	* fvwm/bindings.c:
	* fvwm/move_resize.c:
	* fvwm/events.c:
	* fvwm/stack.c:
	* fvwm/module_interface.c:
	* fvwm/focus.c:
	* fvwm/placement.c:
	* fvwm/menus.c:
	* fvwm/icons.c:
	* fvwm/fvwm.h (FvwmWindow):
	remnamed icon_w member to icon_title_w

2002-01-05  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/icons.c (RedoIconName):
	fixed sizing of icon title for icons without a pixmap
	(RedoIconName):
	(CreateIconWindow):
	(Iconify):
	(CreateIconWindow):
	rewrote icon title layout and moved the constants to defaults.h

	* fvwm/menus.c (menuShortcuts):
	(handle_emacs_bindings):
	implemented emacs style bindings in menus [ctrl-a/b/e/f/g/left/right]

2002-01-04  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm2.1: Language checks done.
	.IR command not in column 1 fixed.

2002-01-04  olicha  <olivier.chapuis@free.fr>

	* fvwm/move_resize.c (AnimatedMoveAnyWindow):
	(AnimatedMoveOfWindow):
	(AnimatedMoveFvwmWindow):
	(move_window_doit):
	* fvwm/menus.c (ParentalMenuRePaint):
	(animated_move_back):
	(pop_menu_up):
	Fixed transparent animated menu

2002-01-03  olicha  <olivier.chapuis@free.fr>

	* fvwm/move_resize.c (is_resize_allowed):
	(is_move_allowed):
	Do not check if moveing/resizeing is MWM allowed for a no user request
	This fix for example FvwmWinList with MwmFunctions & NoOverride

	* fvwm/move_resize.c (AnimatedMoveAnyWindow):
	* fvwm/move_resize.c (is_move_allowed):
	Allowed moving if tmp_win is null and check if move is allowed and
	not resize in AnimatedMoveAnyWindow. This fix animated menu

	* fvwm/ewmh.c (ewmh_AllowsMaximize):
	(ewmh_AllowsMove):
	(ewmh_AllowsResize):
	Check as a user request

	* fvwm/fvwm2.1:
        * fvwm/move_resize.c (CMD_Maximize):
	(MaximizeWidth):
	(MaximizeHeight):
	New global flags "layer" and "ewmiwa". layer causes the grow* methods
	to ignore the windows with a layer less or equal to the layer of
	the maximized window. ewmhiwa causes to ignore the ewmh working area.
	Reorder a bit the Maximize documentation

	* fvwm/fvwm2.1:
	* fvwm/functions.c (expand_extended_var):
	New variables $[desk.name<n>] to get the desktop names

2002-01-01  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/read.c (CMD_Read): Correct message on missing file when using
	Read with full path.

2002-01-01  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/defaults.h:
	* fvwm/misc.c (GrabEm):
	reduced number of grab attempts from 500 to 50 @ 10 ms = 0.5 seconds */

	* fvwm/events.c (HandleUnmapNotify):
	(HandleMapRequestKeepRaised):
	(check_map_request):
	fixed unmanaged window when window was mapped/unmapped/mapped too fast

	* fvwm/add_window.c (FetchWmProtocols):
	(setup_wm_hints):
	* fvwm/fvwm.h (FvwmWindow):
	* fvwm/events.c (HandleEnterNotify):
	(HandlePropertyNotify):
	* fvwm/focus.c (refresh_focus):
	(set_focus_model):
	fixed focus problems with netscape and ddd

2001-12-31  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Target.c (fvwmlib_keyboard_shortcuts):
	* libs/Pointer.c (GetLocationFromEventOrQuery):
	* fvwm/virtual.c (HandlePaging):
	* fvwm/move_resize.c (GetOnePositionArgument):
	(InteractiveMove):
	(AnimatedMoveAnyWindow):
	(moveLoop):
	(CMD_Resize):
	* fvwm/module_interface.c (ExecuteModuleCommand):
	* fvwm/menus.c (do_menu):
	(menuShortcuts):
	(MenuInteraction):
	(get_menu_options):
	* fvwm/functions.c (execute_complex_function):
	* fvwm/events.c (HandleClientMessage):
	(WaitForButtonsUp):
	* fvwm/conditional.c (CMD_Direction):
	* fvwm/builtins.c (CMD_CursorMove):
	(CMD_FakeClick):
	(CMD_StrokeFunc):
	handle return code of XQueryPointer everywhere; necessary for dual head

	* fvwm/misc.c (GrabEm):
	Pointer was warped to other screen with a dual head setup

2001-12-31  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh_events.c (ewmh_WMStateModal):
	Removed some code which try to raise ewmh modal window over
	its transientfor window; this seems not possible without a new style
	or a bad hack in stack.c

2001-12-30  Dan Espen  <dane@mk.telcordia.com>

	* libs/GetFont.c (GetFontSetOrFixed): Cleanup the message about the
	fallback to fixed font so it shows the right font for I18N.

2001-12-30  olicha  <olivier.chapuis@free.fr>

	* fvwm/window_flags.h:
	* fvwm/session.c (MatchWinToSM):
	(LoadWindowStates):
	(SaveWindowStates):
	(get_version_string):
	* fvwm/move_resize.c (CMD_Maximize):
	(handle_stick):
	* fvwm/icons.c (CMD_Iconify):
	* fvwm/ewmh.c (EWMH_SetWMState):
	(EWMH_WindowInit):
	(EWMH_ExitStuff):
	(EWMH_SetAllowedActions):
	(EWMH_WindowInit):
	* fvwm/ewmh.h:
	* fvwm/ewmh_intern.h:
	* fvwm/ewmh_events.c (ewmh_WMState*):
	* fvwm/builtins.c (CMD_WindowShade):
	* fvwm/stack.c (new_layer):
	* fvwm/update.c (apply_window_updates):
	* fvwm/update.h (struct):
	* fvwm/add_window.c (setup_window_structure):
	(setup_window_name):
	(setup_icon):
	* fvwm/style.c (check_window_style_change):
	The skip list and modal ewmh window states are now updated after
	an use/ignore ewmh state style changes. The other ewmh states are
	starting state only. All the initial ewmh states are keep in memory
	for FvwmIdent.

	* fvwm/ewmh.c (EWMH_Handle*):
	* fvwm/fvwm.h:
	Set the ewmh_window_type to an int (and not the corresponding atom)
	accordingly to the window type

	* fvwm/ewmh_events.c (ewmh_WMStateModal):
	ewmh modal transient windows have RaiseTransient and GrabFocusTransient
	style

	* fvwm/ewmh.c (EWMH_GetStyle):
	* fvwm/ewmh_events.c (ewmh_WMDesktop):
	Respect the _NET_WM_DESKTOP hints at window mapping as a StartsOnDesk
	hints

	* libs/vpacket.h (ConfigWinPacket):
	* fvwm/module_interface.c (CONFIGARGSNEW):
	(OLDCONFIGARGS):
	(CONFIGARGS):
	Added ewmh_hint_layer, ewmh_hint_desktop and ewmh_window_type to the
	cfgpacket for FvwmIdent

2001-12-20  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/move_resize.c (resize_geometry_window):
	fixed wrong size calculation of geometry window

2001-12-19  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh_names.c (convert_charsets):
	More precise error messages

	* fvwm/fvwm2.1:
	A few formatting fixes

2001-12-18  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/gnome.c (GNOME_SetHints):
	fixed window getting frozen into position upon a recapture or restart

2001-12-17  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm2.1: Fixup wording in EWMHIconicStateWorkaround.

2001-12-17  olicha  <olivier.chapuis@free.fr>

	* fvwm/fvwm2.1:
	Tried to clarify the EWMHIconicStateWorkaround BugOpts

	* fvwm/ewmh.c (delete_kst_item):
	(set_kde_sys_tray):
	(EWMH_IsKdeSysTrayWindow):
	(EWMH_ManageKdeSysTray):
	* fvwm/events.c (HandleReparentNotify):
	Fixed reparenting management of kde system tray windows and
	added some off debugging code

	* fvwm/virtual.c (CMD_DesktopName):
	Removed some debugging code

2001-12-16  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/fvwm.h (struct):
	* fvwm/window_flags.h (IS_FIXED_PPOS):
	* fvwm/style.h (SCSET_IS_FIXED_PPOS):
	* fvwm/style.c (parse_and_set_window_style):
	(check_window_style_change):
	implemented new styles FixedPPosition, FixedUSPosition, FixedSize,
	FixedUSSize, FixedPSize and Variable PPosition, ...

	* fvwm/events.c (HandleConfigureRequest):
	* fvwm/ewmh.c (ewmh_AllowsResize):
	(is_resize_allowed):
	(ewmh_AllowsMove):
	(ewmh_AllowsMove):
	* fvwm/gnome.c (GNOME_SetHints):
	(AnimatedMoveAnyWindow):
	(CMD_ResizeMove):
	use new functions
	* fvwm/move_resize.c (is_move_allowed):
	(is_resize_allowed):
	(is_maximize_allowed):
	new functions to clean up some code

2001-12-15  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm2.1: Doc fixups.

2001-12-15  olicha  <olivier.chapuis@free.fr>

	* fvwm/builtins (CMD_BugOpts):
	* fvwm/ewmh.c:
	* fvwm/ewmh_conf.c (EWMH_BugOpts):
	* fvwm/ewmh_events.c (ewmh_StateHidden):
	* fvwm/fvwm.c (InitVariables):
	* fvwm/fvwm2.1:
	* fvwm/icons.c (CMD_Iconify):
	* fvwm/screen.h:
	* fvwm/virtual.c (unmap_window):
	(map_window):
	Implemented the new _NET_WM_STATE_HIDDEN ewmh state that allows
	to fix the IconicState problems in vitrual.c. New BugOpts
	EWMHIconicStateWorkaround for supporting current KDE versions

	* fvwm/events.c (HandlePropertyNotify):
	* fvwm/ewmh.{c,h} (ewmh_AllowsYes):
	(ewmh_AllowsClose):
	(ewmh_AllowsMaximize):
	(ewmh_AllowsMove):
	(ewmh_AllowsResize):
	(EWMH_SetAllowedActions):
	(EWMH_WindowInit):
	* fvwm/style.c (check_window_style_change):
	* fvwm/update.{c,h} (apply_window_updates):
	Implemented _NET_WM_ALLOWED_ACTIONS from version 1.2 of the wm-spec

2001-12-13  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/borders.c (RedrawTitle):
	* libs/defaults.h (WINDOW_TITLE_OFFSET):
	fixed 'stick' lines with long titles

2001-12-11  olicha  <olivier.chapuis@free.fr>

	* NEWS:
	* fvwm/commands.h:
	* fvwm/ewmh.{c,h} (ewmh_SetWorkArea):
	(ewmh_ComputeAndSetWorkArea):
	(ewmh_HandleDynamicWorkArea):
	(EWMH_GetWorkAreaIntersection):
	(EWMH_GetStrutIntersection):
	(get_intersection):
	* fvwm/ewmh_name.c (EWMH_SetDeskNames):
	* fvwm/function.{c,h}:
	* fvwm/fvwm.c (InitVariables):
	* fvwm/fvwm2.1:
	* fvwm/modconf.c (send_desktop_names):
	(CMD_Send_ConfigInfo):
	* fvwm/placement.c (get_next_x):
	(get_next_y):
	* fvwm/screen.h:
	* fvwm/virtual.{c,h} (CMD_DesktopName):
	(GetDesktopName):
	New command "DesktopName desk name" to define desktops names for
	the FvwmPager, the WindowList and ewmh compliant pagers.
	Desktops information (desk, desk name, working areas) is stored in a new
	list sub structure of Scr, DesktopsInfo. The head of the list contains
	generic information for desks that are not in the list.

	* fvwm/windowlist.c (get_desk_title):
	(CMD_WindowList):
	* fvwm/fvwm2.1:
	* NEWS:
	New window list options NoDeskNum, NoCurrentDeskTitle, TitleForAllDesks,
	NoNumInDeskTitle. Document these options and also the NoGeometry and
	NoGeometryInfo options.

	* fvwm/ewmh.c:
	* fvwm/ewmh_names.c:
	* fvwm/ewmh_icons.c:
	Added some static declarations

	* fvwm/ewmh_names.c (EWMH_SetVisibleName):
	It seems that UTF8 names should not be terminated by a 0

	* fvwm/ewmh.c (EWMH_SetClientListStacking):
	Set the stacking list in the good orders

2001-12-10  Dominik Vogt  <dominik.vogt@gmx.de>

	* vms/config.h:
	* fvwm/functions.c:
	* fvwm/commands.h:
	* fvwm/builtins.c:
	* fvwm/borders.c:
	removed all MULTISTYLE ifdefs

	* fvwm/borders.c (RedrawTitle):
	fixed title drawing into relief

2001-12-08  olicha  <olivier.chapuis@free.fr>

	* fvwm/style.{c,h}:
	* fvwm/fvwm.h:
	* fvwm/update.{c,h}:
	* fvwm/window_flags.h:
	* fvwm/fvwm2.1:
	s/extended_window_name/indexed_window_name/i
	s/extended_icon_name/indexed_icon_name/i
	s/do_update_window_name/do_update_visible_window_name/
	s/do_update_icon_name/do_update_visible_icon_name/

	* fvwm/style.{c,h} (CMD_Style):
	(parse_and_set_window_style):
	Split CMD_Style into CMD_Style and parse_and_set_window_style

2001-12-06  olicha  <olivier.chapuis@free.fr>

	* fvwm/add_window.c (setup_window_name_count):
	(setup_icon_name_count):
	Better determination of the window and icon names index

	* fvwm/add_window.c (AddWindow):
	(setup_icon):
	* fvwm/events.c (HandlePropertyNotify):
	* fvwm/ewmh_names.c (EWMH_WMName):
	(EWMH_WMIconName):
	* fvwm/module_interface.{c,h} (BroadcastWindowIconNames):
	(CMD_Send_WindowList):
	(CMD_set_mask):
	(CMD_set_sync_mask):
	(CMD_set_nograb_mask):
	* fvwm/update.c (apply_window_updates):
	* libs/Module.h:
	New module messages type M_VISIBLE_NAME and M_VISIBLE_ICON_NAME
	which are send to modules with BroadcastWindowIconNames.
	The set mask cmds use unsigned long mask and not int mask!

2001-12-05  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/ewmh.h:
	* fvwm/ewmh.c:
	EWMH without iconv compile fix by Hippo

2001-12-05  olicha  <olivier.chapuis@free.fr>

	* fvwm/add_window.c:
	* fvwm/ewmh.{c,h} (*):
	* fvwm/ewmh_conf.c (EWMH_CMD_Styles):
	* fvwm/ewmh_events.c:
	* fvwm/fvwm.h:
	* fvwm/fvwm2.1:
	* fvwm/move_resize.c (CMD_Maximize):
	* fvwm/placement.c (test_fit):
	(PlaceWindow):
	* fvwm/session.c (SaveWindowStates):
	* fvwm/style.{c,h} (merge_styles):
	(check_window_style_change):
	* fvwm/update.{c,h} (apply_window_updates):
	* fvwm/window_flags.h:
	New ewmh styles:
	EWMHMaximizeIgnoreWorkingArea / EWMHMaximizeUseWorkingArea /
	EWMHMaximizeUseDynamicWorkingArea,
	EWMHPlacementIgnoreWorkingArea / EWMHPlacementUseWorkingArea
	EWMHPlacementUseDynamicWorkingArea,
	EWMHUseStackingOrderHints / EWMHIgnoreStackingOrderHints,
	EWMHIgnoreStateHints / EWMHUseStateHints,
	EWMHIgnoreStrutHints / EWMHUseStrutHints

	* fvwm/ConfigFvwmDefaults:
	Use EWMHPlacementUseDynamicWorkingArea, EWMHMaximizeUseDynamicWorkingArea
	as default placement styles

	* NEWS:
	* fvwm/add_window.{c,h} (setup_placement_penalty):
	(setup_placement_penalty):
	(AddWindow):
	* fvwm/fvwm.h:
	* fvwm/placement.{c,h} (get_next_x):
	(get_next_y):
	(test_fit):
	* fvwm/style.{c,h} (CMD_Style):
	(check_window_style_change):
	* fvwm/update.{c,h} (apply_window_updates):
	* fvwm/window_flags.h:
	* libs/default.h:
	New styles PlacementOverlapPenalties and PlacementOverlapPercentPenalties

	* NEWS:
	* fvwm/add_window.{c,h} (setup_window_name_count):
	(setup_icon_name_count):
	(setup_visible_name):
	(setup_window_name):
	(free_window_names):
	(setup_icon):
	* fvwm/borders.c (DrawMultiPixmapTitlebar):
	(RedrawTitle):
	* fvwm/events.c (HandlePropertyNotify):
	* fvwm/ewmh_names.c (EWMH_*):
	* fvwm/fvwm.h:
	* fvwm/icons.c (CreateIconWindow):
	(DrawIconWindow):
	(RedoIconName):
	(AutoPlaceIcon):
	(Iconify):
	* fvwm/session.c (MatchWinToSM):
	* fvwm/style.{c,h} (CMD_Style):
	(check_window_style_change):
	* fvwm/update.{c,h} (apply_window_updates):
	* fvwm/window_flags.h:
	New styles ExtendedWindowName / SimpleWindowName and
	ExtendedIconName / SimpleIconName. TODO: the modules implementation

	* fvwm/builtins.c (ReadMultiPixmapDecor):
	A -Wall fix

	* configure.in:
	Fixed gcc test

	* session.c (get_version_string):
	now is 2.5-3

	* fvwm/stack.c (new_layer):
	(CMD_Layer):
	Fixed ewmh wm state

	* fvwm/ewmh_icons.c (ewmh_SetWmIconFromPixmap):
	Fixed creation of the ewmh icon in the case of the window is iconified

2001-11-28  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/placement.c (PlaceWindow):
	fixed manual placement on Xinerama screens other than the one with the
	top left corner of the total screen

2001-11-27  olicha  <olivier.chapuis@free.fr>

	* configure.in:
	* acinclude.m4:
	* acconfig.h:
	* fvwm/ewmh_name.c
	Check for the second argument of iconv

	* configure.in:
	Added -Wall to CFLAGS if cc is gcc

2001-11-26  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	* acconfig.h:
	s/extanded/extended/

2001-11-26  olicha  <olivier.chapuis@free.fr>

	* fvwm/Makefile.am:
	Fixed (?) iconv_LIBS

2001-11-26  olicha  <olivier.chapuis@free.fr>

	* fvwm/functions.c (expand):
	Fixed n, c, r expansion

2001-11-25  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm2.1: Clean up ewmh stuff.

2001-11-24  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh_internal.h:
	* fvwM/ewmh.c:
	Removed a non standard macro

2001-11-24  olicha  <olivier.chapuis@free.fr>

	* fvwm/fvwm2.1:
	Documented the previous ewmh style in a new Style subsection

	* fvwm/functions.c (expand):
	Clean up, removed 5 tmp_win and IS_EWMH_DESKTOP

2001-11-24  olicha  <olivier.chapuis@free.fr>

	* fvwm/add_window (setup_icon):
	(setup_window_structure):
	* fvwm/events.c (HandlePropertyNotify):
	* fvwm/ewmh.h:
	* fvwm/ewmh_conf.c (EWMH_CMD_Style):
	* fvwm/ewmh_icons.c (ewmh_WMIcon):
	(EWMH_DoUpdateWmIcon):
	(ewmh_SetWmIconFromPixmap):
	(EWMH_DeleteWmIcon):
	(EWMH_SetIconFromWMIcon):
	* fvwm/ewmh_intern.h:
	* fvwm/fvwm.h:
	* fvwm/icons.c (GetIcon):
	* fvwm/session.c (get_version_string):
	* fvwm/style.{c,h} (CMD_Style):
	(check_window_style_change)
	* fvwm/update.{c,h} (apply_window_updates):
	* fvwm/window_flags.h:
	New style EWMHMiniIconOverride / EWMHNoMiniIconOverride,
	EWMHDonateMiniIcon / EWMHDontDonateMiniIcon,
	EWMHDonateIcon / EWMHDontDonateIcon,
	Some ewmh icon code simplification.
	Ewmh icons priority: just after icon window.

	* fvwm/ewmh.{c,h} (EWMH_ExitStuff):
	* fvwm/session.c (SaveWindowStates):
	(LoadWindowStates):
	(MatchWinToSM):
	* fvwm/fvwm.c (Done):
	Delete the ewmh icons we set ourself. Some ewmh session states do not
	need to be saved/restored anymore

2001-11-23  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh_names.c (convert_charsets):
	Fixed infinite loop

2001-11-23  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/ewmh_names.c (convert_charsets):
	-Wall fix: 2nd parameter of iconv is char **, not const char ** as the
	man page states on Linux
	replaced goto with a loop

2001-11-22  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh_icons.c (EWMH_SetWmIconFromPixmap):
	a -Wall fix

	* fvwm/ewmh_events.c:
	Fixed some styles update

	* fvwm/ewmh_conf.c:
	* fvwm/function.{c,h} (func_config):
	* fvwm/ewmh.{c,h}:
	* fvwm/ewmh_events.c:
	* fvwm/ewmh_intern.h:
	* fvwm/Makefile.am:
	* fvwm/fvwm2.1:
	New file for ewmh styles and commands. New commands EWMHBaseStrut and
	EWMHNumberOfDesktops. More documentation in ewmh man page section.

	* fvwm/add_window.c:
	* fvwm/bindings.c:
	* fvwm/events.c:
	* fvwm/functions.c:
	* fvwm/ewmh.c (EWMH_Init):
	* fvwm/fvwm.h:
	* fvwm/fvwm.c (InitVariables):
	* fvwm/placement.c
	* fvwm/sceen.h:
	* fvwm/session.c:
	* fvwm/styles.c:
	* fvwm/update.{c,h}:
	* fvwm/window_flags.c:
	* libs/Bindings.c:
	* libs/Picture.{c,h}:
	* libs/fvwmlib.h:
	* configure.in:
	* acconfig.h:
	Remove all the HAVE_EWMH ifdef but the two in virtual.c (which
	are maybe problematic) and those in the ewmh* files to allow
	to disbale the ewmh code: with --disable-ewmh all the ewmh code
	should be dummy. --enable-ewmh is now the default.

2001-11-20  olicha  <olivier.chapuis@free.fr>

	* fvwm/icons.c (GetIcon):
	* fvwm/add_window.c (setup_icon):
	Fixed icons order choice and other minor bugs

	* fvwm/ewmh_icons.c (EWMH_SetWmIconFromPixmap):
	Fixed a core dump if there is no MiniIcon

2001-11-18  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh.{c,h} (add_kst_item):
	(ewmh_AddToKdeSysTray):
	(EWMH_IsKdeSysTrayWindow):
	(EWMH_ManageKdeSysTray):
	(EWMH_WindowInit):
	fvwm/ewmh_intern.h:
	* fvwm/events.c (HandleDestroyNotify):
	(HandleMapRequest):
	(HandleUnmapNotify):
	Fixed the KDE system tray implementation

2001-11-16  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh.h:
	* fvwm/ewmh.c:
	fixed EWMH_WindowDestroyed and EWMH_DestroyWindow macros

2001-11-15  olicha  <olivier.chapuis@free.fr>

	* fvwm/ewmh.{c,h} (EWMH_DestroyWindow):
	(EWMH_WindowDestroyed):
	* fvwm/events.c (HandleReparentNotify):
	(HandleDestroyNotify):
	(HandleUnmapNotify):
	* fvwm/add_window.c (destroy_window):
	Fixed the ewmh windows lists

2001-11-15  olicha  <olivier.chapuis@free.fr>

	* fvwm/Makefile.am:
	* fvwm/ewmh.{c,h}:
	* fvwm/ewmh_intern.h:
	* fvwm/ewmh_events.c:
	* fvwm/ewmh_icons.c:
	* fvwm/ewmh_names.c:
	* fvwm/fvwm2.1:
	* NEWS:
	New files to achieve the extended WM hints support, off by
	default. This code is ifdefed a la gnome.c.
	This is work in progess (need to do so that every things are
	configurable).

	* configure.in:
	* acconfig.h (HAVE_EWMH, HAVE_ICONV, USE_LIBICONV, HAVE_CODSET):
	New configure option --enable-ewmh. Added tests for iconv and
	nl_langinfo for UTF8 conversions.

	* fvwm/add_window.c (AddWindow):
	(CaptureOneWindow):
	(destroy_window):
	(setup_window_name):
	(setup_icon):
	EWMH_SetWMState, EWMH_SetWMDesktop, EWMH_SetFrameStrut,
	EWMH_WindowDestroyed, EWMH_WMName, EWMH_SetVisibleName,
	SET_HAS_EWMH_ICON, EWMH_WMIconName

	* fvwm/add_window.c (setup_window_structure):
	* fvwm/fvwm.h (FvwmWindow):
	(window_flags):
	* fvwm/window_flags.h:
	* fvwm/session.c (get_version_string):
	(SaveWindowStates):
	(LoadWindowStates):
	Added some entries in FvwmWindow and some flags (more will be
	added). Some of these states need to be saved at restart and
	at recapture. This code is ifdefed, may be it should not: I was
	forced to ifdef the version string in get_version_string.

	* libs/Bindings.c (win_contexts):
	* libs/fvwmlib.h:
	* fvwm/events.c (GetContext):
	* fvwm/bindings.c (ParseBinding):
	(activate_binding):
	* fvwm/functions.c (expand_extended_var):
	(expand):
	(execute_function):
	(DeferExecution):
	* fvwm/screen.h (Scr):
	new context C_EWMH_DESKTOP named "D" for an ewmh desktop
	(kdesktop or Nautilus desktop). This context is something between
	C_ROOT and C_WINDOW. Added Scr.EwmhDesktop.

	* fvwm/bindings.c (activate_binding):
	Fixed immediate application of mouse/stroke bindings

	* fvwm/borders.h
	* fvwm/borders.c (RedrawDecorations):
	* fvwm/update.c (apply_window_updates):
	New function  RedrawDecorations taken from apply_window_updates
	and called in ewmh_icons.c and update.c

	* fvwm/bultins.c (CMD_WindowShade):
	EWMH_SetWMState

	* fvwm/events.c (HandleFocusIn):
	(HandlePropertyNotify):
	(HandleClientMessage):
	(HandleMapRequestKeepRaised):
	(HandleUnmapNotify):
	EWMH_SetActiveWindow. Test for utf8 window and icon name, set the ewmh
	icon state. EWMH_ProcessPropertyNotify, EWMH_ProcessClientMessage,
	EWMH_SetClientList

	* fvwm/icons.{c,h} (GetIcon):
	(CreateIconWindow):
	(ChangeIconPixmap):
	* fvwm/events.c (HandlePropertyNotify):
	New function GetIcon taken from CreateIconWindow which choose
	the icon, there is a new case for EWMH icons. New function
	ChangeIconPixmap taken from events.c.
	The two new functions are called from ewmh_icon.c (and icons.c).

	* fvwm/move_resize.c (handle_stick):
	(CMD_Maximize):
	(handle_stick):
	EWMH_SetWMState, EWMH_GetWorkAreaIntersection, EWMH_SetWMDesktop

	* libs/Picture.h:
	* libs/Picture.c (LoadPictureFromPixmap):
	(CachePictureFromPixmap):
	New functions for loading a picture from a pixmap. Nothing is cached
	but this simplify the MiniIcon code.

	* fvwm/placement.c (PlaceWindow):
	EWMH_GetWorkAreaIntersection

	* fvwm/screen.h (Scr):
	Added the working area, the dynamic working area and the ewmh
	Desktop window.

	* fvwm/stack.c (restack_windows):
	(CMD_Layer):
	EWMH_SetClientListStacking, EWMH_SetWMState

	* fvwm/style.c (check_window_style_change):
	* fvwm/update.{c,h} (apply_window_updates):
	Added do_update_list_skip to the update_win flags for EWMH_SetWMState.
	This code is ifdefed.

	* fvwm/style.c (lookup_style):
	EWMH_GetStyle

	* fvwm/virctual.c (goto_desk):
	(CMD_GotoDeskAndPage):
	(do_move_window_to_desk):
	EWMH_SetCurrentDesk, EWMH_SetWMDesktop

2001-11-10  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/update.c (apply_window_updates):
	* fvwm/gnome.c (GNOME_GetStyle):
	* fvwm/style.c (lookup_style):
	(check_window_style_change):
	* fvwm/add_window.c (setup_style_and_decor):
	fixed GnomeIgnoreHints style for some of the gnome hints

	* fvwm/fvwm.c (StartupStuff):
	Tried to fix font size problem

	* fvwm/placement.c (PlaceWindow):
	suppress an X error

	* fvwm/move_resize.c (moveLoop):
	* libs/Target.c (fvwmlib_keyboard_shortcuts):
	* fvwm/misc.c (Keyboard_shortcuts):
	modified keyboard shortcut functions so that it is possible to move
	windows with the keyboard even if the border is hit.  does not work
	very nicely with paging

	* libs/Target.c (fvwmlib_keyboard_shortcuts):
	performance enhancement

	* fvwm/events.c (HandleButtonPress):
	fixed (?) some problem with passing the raise click in ctf to the app

	* fvwm/add_window.c (Reborder):
	* fvwm/virtual.c (MoveViewport):
	(MapDesk):
	(UnmapDesk):
	* fvwm/session.c (SaveWindowStates):
	* fvwm/fvwmdebug.c (DB_WI_WINDOWS):
	don't access stack_next and stack_prev directly but use the access
	functions from stack.h

	* fvwm/stack.c (remove_window_from_stack_ring):
	(add_window_to_stack_ring_after):
	safety patch

	* fvwm/add_window.c (adjust_fvwm_internal_windows):
	(destroy_window):
	when a window becomes scheduled for destruction, remove all traces of it
	from the fvwm internal variable so its not accessed accidentally when
	its fields are no longer valid

2001-11-05  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/borders.c:
	fixed compilation of I18N_MB

2001-10-30  Mikhael Goikhman  <migo@homemail.com>

	* AUTHORS:
	* NEWS:
	* acconfig.h:
	* configure.in:
	* fvwm/borders.c:
	* fvwm/builtins.c:
	* fvwm/fvwm2.1:
	* fvwm/screen.h:
	exclude the TitleStyle MultiPixmap feature (only) before forking
	...
	and restore it after that

	* NEWS:
	* configure.in:
	change version string to 2.5.0

	* NEWS:
	added a missing entry for the stable release 2.4.0 (03-Jul-2001);
	added a link to the stable version 2.4.4 (not released yet)

2001-10-30  Mikhael Goikhman  <migo@homemail.com>

	* NEWS:
	* configure.in:
	change version string to 2.4.4 before forking

	* make_fvwmdist.sh:
	strip end of line from date (adjust for a new length)

2001-10-29  olicha  <olivier.chapuis@free.fr>

	* fvwm/screen.h (DecorFaceStyle):
	Fixed the "lenght" of face_type if FANCY_TITLEBARS is defined,
	so that Solid colors work again

2001-10-28  olicha  <olivier.chapuis@free.fr>

	* fvwm/module_interface.c (skipModuleAliasToken):
	Allows '/' as alias character

	* NEWS
	Script news

2001-10-27  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	* acconfig.h:
	* NEWS:
	added --disable-multipixmap-titles for the Suzanne's patch,
	the default is enable

	* fvwm/fvwm2.1:
	some formatting fixes in TitleStyle entry

2001-10-27  Suzanne Britton  <tril@igs.net>

	* config.h.in: Added FANCY_TITLEBARS option, off by default

	* fvwm/fvwm2.1:
	Added info on TitleStyle MultiPixmap

	* fvwm/screen.h:
	[All changes #ifdeffed FANCY_TITLEBARS]
	Added TITLE_PADDING define for fancy titlebar rendering
	Added tb_pixmap_enum
	Added MultiPixmap to DecorFaceType enum
	Added Picture **multi_pixmaps and short multi_stretch_flags
	to DecorFace structure

	* fvwm/borders.c:
	[All changes #ifdeffed FANCY_TITLEBARS except the fix to RedrawButtons]
	(DrawButton): Handle UseTitleStyle where TitleStyle is MultiPixmap
	(RenderIntoWindow): [new]
	(DrawMultiPixmapTitlebar): [new]
	(RedrawButtons): Pass the left1right0 parameter properly to DrawButton,
	instead of always sending 1
	(RedrawTitle):
	Call DrawFancyTitlebar for MultiPixmap style
	Skip DrawString calls for MultiPixmap style (title is drawn inside
	DrawMultiPixmapTitlebar)

	* fvwm/builtins.c:
	[All changes #ifdeffed FANCY_TITLEBARS]
	(FreeDecorFace): Free up multi_pixmaps array for a MultiPixmap decor
	(ReadDecorFace): Call ReadMultiPixmapDecor for a MultiPixmap TitleStyle
	(ReadMultiPixmapDecor): [new]

2001-10-26  Dan Espen  <dane@mk.telcordia.com>

	* NEWS: FvwmForm: Customize pointers, support ISO_Tab key,
 	buttons can activate on press or release, special pointer during grab,
	arrow key command recall.

2001-10-24  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/bindings.c (ParseBinding):
	* fvwm/bindings.h:
	* fvwm/fvwm2.1:
	binding commands now do not print error messages with Silent

	* fvwm/ConfigFvwmDefaults:
	* NEWS:
	don't use ReverseOrder in the default Alt-Tab like it was in 2.4.0;
	use Silent before Key Help

	* fvwm/add_window.c:
	changed the broken size hints message to notify the owner

	* docs/fvwm.lsm.in:
	small changes

2001-10-19  olicha  <olivier.chapuis@free.fr>

	* NEWS:
	Some FvwmScript news

2001-10-16  olicha  <olivier.chapuis@free.fr>

	* NEWS:
	Some FvwmScript news

2001-10-15  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/bindings.c (activate_binding):
	* libs/Bindings.c (GrabWindowKeyOrButton):
	activate mouse/stroke bindings immediately

	* fvwm/events.c (HandleButtonPress):
	it is possible to bind actions to the 'ClickToFocus' click

2001-10-14  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/virtual.c (HandlePaging):
	allow paging during move/resize when pressing keys

	* libs/XResource.c (MergeCmdLineResources):
	possible core dump fix

	* fvwm/add_window.c (setup_window_placement):
	fixed core dump

	* libs/Bindings.c (AddBinding):
	another attempt at cleaning up bindings with "Shift"

2001-10-13  olicha  <olivier.chapuis@free.fr>

	* NEWS
	FvwmScript news

2001-10-10  Mikhael Goikhman  <migo@homemail.com>

	* move_resize.c:
	* fvwm/fvwm2.1:
	OpaqueMoveSize now accepts "unlimited" or negative argument.

2001-10-09  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/fvwm2.1:
	added missing "!"

2001-10-08  Dan Espen  <dane@mk.telcordia.com>

	* libs/Makefile.am (libfvwm_a_SOURCES): Add new file.

	* libs/fvwmlib.h:
	* libs/Cursor.c: Create new libs function fvwmCursorNameToIndex.

	* fvwm/cursor.c: Extract cursor validation routine to become a libs
	routine.

2001-10-08  Dominik Vogt  <dominik.vogt@gmx.de>

	* NEWS, configure.in:
	changed version to 2.5.0

2001-10-08  olicha  <olivier.chapuis@free.fr>

	* fvwm/borders.c (RedrawTitle):
	Fixed drawing of leftJustified stippled title and suppress warnings
	in RelieveRectangle w/ RightJustified stippled title

2001-10-05  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/virtual.c (CMD_XineramaSlsSize):
	fixed ABR

2001-10-03  olicha  <olivier.chapuis@free.fr>

	* fvwm/style.c (CMD_Style):
	* fvwm/fvwm2.1
	Added the possibility to add an Xinerama screen to the 4 numerics
	Iconbox format

2001-10-03  olicha  <olivier.chapuis@free.fr>

	* fvwm/icons.c (AutoPlaceIcon):
	Fixed a core dump with @c and fixed icon placement if the icon should
	not be on the current page

2001-10-02  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/icons.c (AutoPlaceIcon):
	* libs/FScreen.c (FScreenParseScreenBit):
	added 'w' screen specifier for icon boxes

	* fvwm/icons.c (AutoPlaceIcon):
	fixed placement of icons in icon boxes on different screen

	* fvwm/menus.c (get_menu_options):
	reduced code duplication

2001-10-02  olicha  <olivier.chapuis@free.fr>

	* fvwm/menus.c (get_menu_options):
	fixed Xinerama placement of menu with empty but not null position hints

2001-10-02  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/borders.c (RedrawTitle):
	* libs/defaults.h (WINDOW_TITLE_STICKY_GAP):
	suppress a warning in RelieveRectangle w/ small sticky windows

2001-09-30  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menus.c (get_menu_options):
	A 'rectangle' context rectangle for menus honours the '@screen' bit

	* fvwm/move_resize.c (DisplayPosition):
	coordinates of a window are show in relation to the screen, not the page

	* libs/FScreen.c (FScreenTranslateCoordinates):
	* fvwm/placement.c (PlaceWindow):
	* fvwm/add_window.c (setup_window_placement):
	Applied patches by Sidik Isani that adds the "fvwmscreen" X resource;
	rewrote the library functionality to better match the rest of the
	interface

	* fvwm/builtins.c (DestroyFvwmDecor):
	removed useless code

	* fvwm/icons.c (DrawIconWindow):
	fixed race condition w/ expanding/collapsing icon titles

	* fvwm/windowlist.c (CMD_WindowList):
	fixed Xinerama placement of window list when called without options

2001-09-19  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/FScreen.c (FScreenSLSOnOff):
	fixed core dump when calling XineramaSls before XineramaSlsSize

	* configure.in:
	changed to 2.4.3

	* libs/FShape.h (FHaveShapeExtension):
	set macro to 1 when compiling w/ shape extension

2001-09-17  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Bindings.c (AddBinding):
	* fvwm/bindings.c (ParseBinding):
	print a warning if a key with the given name does not exist
	if there is an upper and a lower case version of the same key name,
	always bind to the lower case version; this is problematic if the upper
	case version is tied to a key without a modifier and the lower case
	version is tied to the same key, but with a modifier (or both are tied
	to different keys). I hope this good enough.

	* libs/Bindings.c (FreeBindingList):
	(MatchBindingExactly):
	(CollectBindingList):
	fixed some problems overriding keys
	reduced duplication of logic

2001-09-16  Dominik Vogt  <dominik.vogt@gmx.de>

	* NEWS, configure.in:
	changed version to 2.5.0

2001-09-16  Dominik Vogt  <dominik.vogt@gmx.de>

	* configure.in:
	changed version to 2.4.2

2001-09-16  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Colorset.c:
	(SetWindowBackground):
	(SetRectangleBackground):
	* fvwm/builtins.c (CMD_WindowShade):
	* fvwm/add_window.c:
	(setup_style_and_decor):
	* fvwm/icons.c:
	(CreateIconWindow):
	(GetXPMFile):
	(GetIconWindow):
	(GetIconBitmap):
	* fvwm/events.c:
	(HandleConfigureRequest):
	(HandleShapeNotify):
	(InitEventHandlerJumpTable):
	* fvwm/borders.c (struct):
	(SetupFrame):
	(SetShape):
	* fvwm/decorations.c (SelectDecor):
	* fvwm/fvwm.c:
	(main):
	(setVersionInfo):
	* fvwm/externs.h:
	* fvwm/fvwm.h (FvwmWindow):
	* libs/FShape.h:
	* libs/FShape.c:
	moved shape support to library; its no longer necessary to
	'#ifdef SHAPE' any code

	* fvwm/borders.c (RedrawButtons):
	(RedrawTitle):
	fixed top border hilight drawing of title buttons

	* libs/Graphics.c (do_relieve_rectangle):
	(RelieveRectangle):
	(RelieveRectangle2):
	allow alternate shading for title buttons

2001-09-15  Dominik Vogt  <dominik.vogt@gmx.de>

	**/*.1:
	Applied man page patch by Dmitry Yu. Bolkhovityanov:
	Add a formal description of how fvwm maintains module's configs
	Change manpages of individual modules to refer to fvwm2(1) for
	details about specifying configuration

	* fvwm/add_window.c (setup_window_placement):
	desk and page can now really be given as X resources a la
	  xterm.desk: 1

	* libs/XResource.c (GetResourceString):
	resource -> lower case, class -> upper case
	changed signature

	* configure.in:
	changed version to 2.5.0

	* Makefile.am (distcheck2):
	build distcheck before dist2; save a few seconds if the build fails

	* libs/alloca.c:
	* libs/ClientMsg.c:
	* libs/envvar.c:
	* libs/Event.c:
	* libs/fvwmrect.c:
	* libs/gethostname.c:
	* libs/Grab.c:
	* libs/Pointer.c:
	* libs/safemalloc.c:
	* libs/strcasecmp.c:
	* libs/strdup.c:
	* libs/strerror.c:
	* libs/strncasecmp.c:
	* libs/usleep.c:
	* libs/wild.c:
	* libs/WinMagic.c:
	* libs/XError.c:
	* libs/Graphics.c:
	include config.h

	* configure.in:
	changed version to 2.4.1 again

2001-09-14  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Bindings.c (FvwmStringToKeysym):
	try both cases of the first letter of a key name

	* fvwm/ConfigFvwmDefaults:
	* fvwm/windowlist.c (winCompareReverse):
	(CMD_WindowList):
	new WindowList option ReverseOrder; use the new option in the default
	Alt-Tab binding. This makes it possible to hit Alt-Tab repeatedly to
	cycle through the whole window list. The old behaviour only toggled
	between two windows. Also, a simple Alt-Tab can be used to switch to
	the next window instead of Alt-Tab-Tab.

	* libs/FScreen.c (FScreenInit):
	fixed a Xinerama crash

	* configure.in:
	print a verbose error message and exit if X11 headers and libraries
	are not found

2001-09-13  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/fvwm.c (main):
	* libs/FShape.c:
	* libs/FShape.h:
	new library for X shape encapsulation

	* fvwm/builtins.c (CMD_WindowShade):
	* fvwm/borders.c (SetupFrame):
	fixed shading of windows without title and border
	fixed shading of shaped windows; fixes bug #732

	* fvwm/builtins.c (CMD_SetEnv):
	calling SetEnv without a value is the same as UnsetEnv

2001-09-10  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/events.c (HandleReparentNotify):
	fixed vanishing windows in rapid map/unmap cycles; bug #770

	* fvwm/add_window.c (hide_screen):
	fixed possible BadWindow error

2001-09-09  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/virtual.c (MoveViewport):
	(goto_desk):
	(CMD_GotoDeskAndPage):
	(CMD_GotoPage):
	GotoDeskAndPage records its own history of last visited desk/page

	* libs/FScreen.c (FScreenInit):
	fixed a memory allocation bug pointed out by Giuseppe Della Ricca

2001-09-05  olicha  <olivier.chapuis@free.fr>

	* fvwm/session.c (MatchWinToSM):
	* fvwm/add_window.c (setup_window_structure):
	* fvwm/move_resize.c (moveLoop):
	Fixed PlacedByButton3 condition

2001-09-05  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/FScreen.c:
	* fvwm/functions.c (func_config):
	* fvwm/module_interface.c (broadcast_xinerama_state):
	* fvwm/virtual.c (CMD_Xinerama):
	(CMD_XineramaPrimaryScreen):
	(CMD_XineramaSls):
	(CMD_XineramaSlsSize):
	added sls support
	split Xinerama command into Xinerama, XineramaPrimaryScreen,
	XineramaSls and XineramaSlsSize
	restructured parts of the FScreen code

	* fvwm/functions.c (func_config):
	new commands XineramaPrimaryScreen, XineramaSls and XineramaSlsSize

	* libs/Graphics.c (RelieveRectangle):
	allow calling the function with w == 0 or h == 0 without a message

	* fvwm/window_flags.h (SET_STYLE_DELETED):
	* fvwm/style.c (CMD_DestroyStyle):
	(check_window_style_change):
	* fvwm/fvwm.h (window_style):
	update windows when a style is deleted

	* configure.in:
	fixed xpm detection problem caused by wrong library order

2001-09-05  olicha  <olivier.chapuis@free.fr>

	* NEWS: PlacedByFvwm

2001-09-04  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm2.1 (PlacedByFvwm): Grammar.

2001-09-04  olicha  <olivier.chapuis@free.fr>

	* fvwm/fvwm.h:
	* fvwm/windows_flags.h:
	* fvwm/placement.c (PlaceWindow):
	* fvwm/add_window.c (setup_window_structure):
	* fvwm/conditional.c (CreateConditionMask):
	* fvwm/session.c (get_version_string):
	(MatchWinToSM):
	* fvwm/fvwm2.1:
	Added a new windows_flags is_placed_by_fvwm and a new condition
	PlacedByFvwm

2001-09-03  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/focus.c (focus_grab_buttons):
	(MoveFocus):
	disabled xt/double click patch for now

2001-09-01  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Graphics.c (RelieveRectangle):
	print a warning if one of the dimensions is <= 0

	* fvwm/placement.c (PlaceWindow):
	take care of windows that have both, PPosition and USPosition set
	take care of transient windows that have neither PPosition nor
	USPosition set

2001-09-01  olicha  <olivier.chapuis@free.fr>

	* libs/FScreen.c (FScreenInit):
	Fixed the position of the xinerama emulation delimiters

2001-08-31  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/fvwm2.1:
	Xinerama introduction

	* fvwm/icons.c (AutoPlaceIcon):
	try to place icons of screen with the window center, and if that fails
	on any screen

	* libs/FScreen.c (FScreenGetScrRect):
	performance improvement for non-xinerama systems

	* fvwm/update.c (apply_window_updates):
	(flush_window_updates):
	update icon boxes and icon position when xinerama layout changes

	* fvwm/icons.c (AutoPlaceIcon):
	limit placement of icons using no icon box to screen boundaries
	adapt icon boxes to xinerama layout whenever used

	* fvwm/placement.c (PlaceWindow):
	* fvwm/style.c (CMD_Style):
	(check_window_style_change):
	* fvwm/style.h (SUSE_NO_USPOSITION):
	(SUSE_NO_TRANSIENT_PPOSITION):
	(SUSE_NO_TRANSIENT_USPOSITION):
	* fvwm/fvwm.h (struct):
	implemented new styles NoUSPosition/UseUSPosition,
	NoTransientPPosition/UseTransientPPosition,
	NoTransientUSPosition/UseTransientUSPosition.
	These work exactly like NoPPosition/UsePPosition.
	Transient windows ignore the window position if neither the PPosition
	nor the USPosition hint is set.

2001-08-28  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/focus.c (restore_focus_after_unmap):
	fixed a bug transfering the focus when a window was iconified

2001-08-26  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/conditional.c (MatchesConditionMask):
	* fvwm/move_resize.c (position_geometry_window):
	* fvwm/placement.c (PlaceWindow):
	* fvwm/menus.c (pop_menu_up):
	* fvwm/move_resize.c (move_window_doit):
	* fvwm/icons.c (do_all_iconboxes):
	* fvwm/placement.c (PlaceWindow):
	* fvwm/menus.c (update_menu):
	adapted to new FScreen... signatures

	* libs/FScreen.c (FScreenClipToScreen):
	(FScreenGetScrCenterCenter):
	(FScreenCenterCurrent):
	(FScreenCenterPrimary):
	(FScreenGetCurrent00):
	(FScreenGetGlobalScrRect):
	(FScreenGetPrimaryScrRect):
	(FScreenGetScrRect):
	(FScreenIsRectangleOnScreen):
	unified all the FSCreen... functions using a common signature, removed
	most old functions

	* fvwm/style.c (CMD_Style):
	init icon box screen

	* fvwm/move_resize.c (move_window_doit):
	(CMD_Maximize):
	* libs/Makefile.am:
	* libs/XineramaSupport.c:
	* libs/XineramaSupport.h:
	* libs/FScreen.c:
	exported and renamed screen defines

	* libs/FScreen.h:
	renamed files

	* fvwm/virtual.c:
	* fvwm/style.c:
	* fvwm/placement.c:
	* fvwm/move_resize.c:
	* fvwm/module_interface.c:
	* fvwm/modconf.c:
	* fvwm/menus.c:
	* fvwm/icons.c:
	* fvwm/fvwm.c:
	* fvwm/conditional.c:
	* libs/XineramaSupport.c:
	renamed all XineramaSupport...() functions to FScreen...()

	* fvwm/style.c (CMD_Style):
	-Wall fix

2001-08-25  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/style.c (CMD_Style):
	* fvwm/fvwm.h (icon_boxes_struct): Add screen to iconbox struct when
	using geometry spec.

2001-08-25  Mikhael Goikhman  <migo@homemail.com>

	* libs/Strings.{c,h}:
	new function QuoteString() to add and escape single quotes to strings

	* fvwm/menus.c (MenuInteraction):
	quote both missing function name and menu name for
	MissingSubmenuFunction

	* fvwm/functions.c (expand):
	use QuoteString()

2001-08-25  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/style.c (CMD_Style): Fix up iconboxes using negative geom specs.

2001-08-25  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/cursor.c (CMD_CursorStyle):
	* fvwm/icons.c (GetXPMFile):
	* libs/Colorset.c (SetWindowBackground):
	-Wall fixes

	* libs/Bindings.c (AddBinding):
	tired to help with problem binding keys that have a keycode with no
	modifiers and another keycode with some modifiers pressed, e.g.
	kc 95 = F11, kc 67 = F1, kc 67 + shift = F11, which caused pressing
	F1 generating the actioon bound to F11 sometimes

	* fvwm/focus.c (focus_grab_buttons):
	-Wall fix

2001-08-23  Dan Espen  <dane@mk.telcordia.com>

	* libs/Bindings.c (MatchBinding): Unify XDisplayKeycodes avoidance.

2001-08-20  Bob Woodside  <proteus@pcnet.com>

	* fvwm/focus.c (MoveFocus, focus_grab_buttons): Fixed passive button
        grab synchronization so apps using XtTranslations to catch double-
        clicks don't get confused by extraneous Leave/EnterNotify events.
        This fixes the "xfm/moxfm don't see double-clicks" problem.

2001-08-20  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/icons.c (AutoPlaceIcon): Fix bug.

2001-08-19  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/icons.c (AutoPlaceIcon): Apply screen dimensions as icon is
	placed.

	* fvwm/style.c (CMD_Style): Don't apply screen dimensions to iconbox
	until later when the window is actually placed.

	* fvwm/fvwm.h (icon_boxes_struct):  Save  sign  for later  screen
 	position calculation.

2001-08-19  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/update.c (flush_window_updates):
	* fvwm/screen.h (ScreenInfo):
	* fvwm/virtual.c (CMD_Xinerama):

	* fvwm/move_resize.c (CMD_Maximize):
	* fvwm/placement.c (PlaceWindow):
	* libs/XineramaSupport.c (XineramaSupportGetNumberedScrRect):
	renamed function

	* fvwm/fvwm2.1:
	describe new maximize options

	* fvwm/move_resize.c (MaximizeWidth):
	(MaximizeHeight):
	(CMD_Maximize):
	applied Dmitry's Xinerama patch for Maximize command
	replaced "global" and "absolute" with "screen" which is more flexible

2001-08-16  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/Parse.c (SkipQuote):
	fixed a bug in handling of caller specified quote pairs

	* fvwm/move_resize.c (CMD_Maximize):
	keep window on correct page when viewport does not start on a page
	boundary

	* libs/XError.c (error_name):
	(request_name):
	fixed core dump in error handling

2001-08-15  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	* acinclude.m4:
	* INSTALL:
	* INSTALL.fvwm:
	renamed --disable-gnome to --disable-gnome-hints;
	documented configure options --with-gnome*;
	small improvements in documentation;
	use underscore in version instead of dash that causes rpm problems

2001-08-14  Mikhael Goikhman  <migo@homemail.com>

	* libs/Makefile.am:
	added fvwmrect.h to dist

2001-08-14  Dan Espen  <dane@mk.telcordia.com>

	* libs/XineramaSupport.c: Disable debug printing.

2001-08-13  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/defaults.h (DEFAULT_MENU_STYLE):
	reset colour sets in default menu style too

2001-08-13  Mikhael Goikhman  <migo@homemail.com>

	* builtins.c:
	* events.c:
	completed the libstroke-0.5 compatibility fix

2001-08-10  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/move_resize.c (draw_move_resize_grid):
	fixed drawing of resize grid when invoked from button or key press

	* fvwm/placement.c (PlaceWindow):
	rewrote a condition to improve readability
	fixed StartsOn... w/ SkipMapping

2001-08-09  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/session.c (MatchWinToSM):
	(LoadWindowStates):
	(SaveWindowStates):
	* fvwm/move_resize.c (CMD_Resize):
	* fvwm/events.c (HandlePropertyNotify):
	(HandleConfigureRequest):
	* fvwm/move_resize.c (CMD_ResizeMove):
	(CMD_Maximize):
	(CMD_Resize):
	* fvwm/update.c (apply_window_updates):
	* fvwm/add_window.c (AddWindow):
	* fvwm/geometry.c (constrain_size):
	(gravity_constrain_size):
	the Resize command honors the window gravity
	changing the size increment of maximized windows no longer shrinks the
	window

	* fvwm/icons.c:
	keep expanded icon titles on screen

2001-08-08  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/icons.c (do_all_iconboxes):
	default icon box fills the primary screen

	* libs/XineramaSupport.c (XineramaSupportParseScreenBit):
	fixed default_screen argument

	* fvwm/style.c (merge_styles):
	* fvwm/fvwm.h (window_style):
	* fvwm/style.h (SSET_START_SCREEN):
	* fvwm/add_window.c (setup_window_placement):
	* fvwm/placement.c (PlaceWindow):
	(CMD_PlaceAgain):
	implemented StartsOnScreen style

	* fvwm/placement.c (PlaceWindow):
	(test_fit):
	(get_next_x):
	(get_next_y):
	(CleverPlacement):
	(SmartPlacement):
	Place new windows on xinerama screens

	* libs/XineramaSupport.c (XineramaSupportParseGeometryWithScreen):
	fixed core dump in debug output

2001-08-07  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/placement.c:
	removed unused variable

2001-08-07  olicha  <olivier.chapuis@free.fr>

	* NEWS:
	FvwmIconBox, FvwmTaskBar and FvwmWinList support aliases

2001-08-06  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/virtual.c (CMD_Xinerama):
	replaced XineramaEnable and ...Disable with XineramaCommand

	* libs/XineramaSupport.c (XineramaSupportParseScreenBit):
	(XineramaSupportGetScreenArgument):
	new functions

	* fvwm/functions.c (func_config):
	* fvwm/move_resize.c (move_window_doit):
	(CMD_Move):
	(CMD_AnimatedMove):
	(CMD_MoveToPage):
	(CMD_MoveToScreen):
	(handle_stick):
	added new command MoveToScreen

2001-08-05  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/fvwmrect.c:
	* libs/fvwmrect.h:
	new library files

	* libs/XineramaSupport.c (XineramaSupportParseGeometry):
	fixed parsing of negative geometries
	(XineramaSupportParseGeometryWithScreen):
	made global
	(XineramaSupportGetNumberedScreenRect):
	new function

	* sample.fvwmrc/system.fvwm2rc:
	* sample.fvwmrc/new-features:
	* sample.fvwmrc/system.fvwm2rc-sample-95:
	* sample.fvwmrc/system.fvwm2rc-sample-2:
	* sample.fvwmrc/system.fvwm2rc-sample-1:
	* fvwm/fvwm2.1:
	updated for new condition

	* fvwm/conditional.c (CreateConditionMask):
	(MatchesConditionMask):
	* fvwm/fvwm.h (WindowConditionMask):
	implemented new condition AcceptsFocus to cope with applications like
	xclock that have circulatehit but don't take focus

2001-08-02  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/XineramaSupport.c (XineramaSupportParseGeometry):
	handle Xinerama screens

	* fvwm/style.c (CMD_Style):
	* fvwm/menus.c (get_menu_options):
	cope with Xinerama like geometries with screen info

	* fvwm/virtual.c (CMD_XineramaEnable):
	XineramaEnable optionally takes the number of the primary screen as its
	argument

	* fvwm/events.c (GetContext):
	reindented code

	* fvwm/virtual.c (HandlePaging):
	* fvwm/events.c (HandleButtonPress):
	* fvwm/events.h (XEVMASK_PANFW):
	fixed button and key event handling over pan frames; fixes bug #752

	* fvwm/menus.c (get_menu_options):
	fixed Xinerama placement of menus without options

2001-08-01  Mikhael Goikhman  <migo@homemail.com>

	* NEWS:
	* fvwm/borders.c:
	* fvwm/builtins.c:
	* fvwm/fvwm.c:
	* fvwm/screen.h:
	Color enhancements in button vectors: @2 is bg color, @3 is fg color.
	In addition to the existing: @0 is shadow color, @1 is hilight color.

	* fvwm/fvwm2.1:
	Added the formal description of Vector that was absent.

2001-08-01  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/fvwm2.1:
	some man page corrections

2001-07-30  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/move_resize.c (handle_stick):
	also redraw buttons when a window becomes sticky/slippery to make sure
	that MWMDecorStick buttons are updated too; fixes bug #749

2001-07-30  Mikhael Goikhman  <migo@homemail.com>

	* NEWS:
	documented previous changes

	* configure.in:
	improved output spacing

	* fvwm/fvwm2.1:
	minor typo

2001-07-29  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/XineramaSupport.c (XineramaSupportConfigureModule):
	* fvwm/modconf.c (send_xinerama_state):
	* fvwm/module_interface.c (broadcast_xinerama_state):
	* libs/defaults.h:
	revised module support for Xinerama

	* libs/XineramaSupport.c (XineramaSupportParseGeometryWithScreen):
	(XineramaSupportParseGeometry):
	(XineramaSupportGetGeometry):
	make interface compatible with XineramaSupportParseGeometry().
	(XineramaSupportGetPrimaryScreen):
	new function

	* fvwm/stack.c (raise_over_unmanaged):
	fixed restacking of windows with RaiseOverUnmanaged - windows were
	raised in reverse order so that the top window became the bottom
	window of the ones that were raised
	also, ignore Scr.NoFocusWin and all InputOnly windows for raising since
	these are invisible

2001-07-28  Dominik Vogt  <dominik.vogt@gmx.de>

	* sample.fvwmrc/system.fvwm2rc-sample-95:
	fixed syntax of BugOpts command

	* fvwm/ConfigFvwmDefaults:
	resize window when clicking on the sides of the window by default
	instead of moving it

	* fvwm/events.c (HandleEnterNotify):
	do not delete MouseFocus when pointer moves from one particular sub
	window of a frame to another one.  Helps with xv/xmms vs unclutter
	interaction and also with MouseFocus vs. Open Look applications

	* fvwm/move_resize.c (DoSnapAttract):
	* libs/XineramaSupport.c (XineramaSupportGetResistanceRect):
	fixed snapping to Xinerama screen edges
	(XineramaSupportIsEnabled):
	return False is the X server provides only a single screen

	* fvwm/fvwm2.1:
	Added descriptions of conditions CurrentDesk, CurrentPage,
	CurrentScreen, CurrentGlobalPage, CurrentPageAnyDesk and
	CurrentGlobalPageAnyDesk

	* fvwm/fvwm.h (rectangle):
	(position):
	typedefs moved to libs/fvwmlib.h

	* fvwm/conditional.c (MatchesConditionMask):
	* fvwm/fvwm.h (WindowConditionMask):
	* fvwm/conditional.c:
	introduced new conditions CurrentGlobalPage and CurrentGlobalPageAnyDesk
	for Xinerama support

	* fvwm/modconf.c (CMD_Send_ConfigInfo):
	(send_xinerama_state):
	* fvwm/module_interface.c (broadcast_xinerama_state):
	* libs/XineramaSupport.c (XineramaSUpportIsEnabled):
	* libs/defaults.h (DEFAULT_XINERAMA_DISABLED):
	communicate xinerama state at module startup

2001-07-27  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/XineramaSupport.c:
	next Xinerama patch

2001-07-25  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/move_resize.c (moveLoop):
	windows were lost off screen w/ non opaque interactive move when motion
	was aborted with Escape on a different page that it was started

	* fvwm/move_resize.c (position_geometry_window):
	(DisplayPosition):
	(DisplaySize):
	(InteractiveMove):
	(CMD_Resize):
	(moveLoop):
	(CMD_Resize):
	(DoResize):
	* libs/XineramaSupport.c (GetMouseXY):
	(XineramaSupportCenterCurrent):
	(XineramaSupportGetCurrent00):
	(XineramaSupportGetCurrentScrRect):
	allow to pass in an event with the pointer position
	minimize number of XQueryPointer calls in interactive move/resize

	* libs/defaults.h:
	* fvwm/move_resize.c (resize_geometry_window):
	(DisplayPosition):
	(DisplaySize):
	border width of geometry window moved to defaults.h
	moved strings for size window formatting to defaults.h
	reworked calculations of geometry window dimensions

	* fvwm/move_resize.c (resize_geometry_window):
	(position_geometry_window):
	(DisplaySize):
	(InteractiveMove):
	(CMD_Resize):
	* fvwm/builtins.c (ApplyDefaultFontAndColors):
	* fvwm/fvwm.c (main):
	funtions ResizeSizeWindow and PositionSizeWindow renamed to
	resize_geometry_window and position_geometry_window

	* fvwm/fvwm.c (main):
	fixed resizing geometry window before creating it

	* fvwm/move_resize.c (switch_move_resize_grid):
	(MoveOutline):
	* fvwm/virtual.c (HandlePaging):
	renamed MoveOutline to draw_move_resize_grid and made static
	new function switch_move_resize_grid for external calls
	delete grid before moving the geometry window to get rid of arifacts of
	the grid

2001-07-24  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/XineramaSupport.c (XineramaSupportInit):
	make the blank area in Xinerama emulation usable again

2001-07-23  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menus.c (update_menu):
	(pop_menu_up):
	(make_menu):
	(calculate_item_sizes):
	(size_menu_horizontally):
	(size_menu_vertically):
	menus are resized to fit their Xinerama screen every time they are
	popped up and the screen size has changed

2001-07-23  olicha  <olivier.chapuis@free.fr>

	* libs/XineramaSupport.c (XineramaSupportInit):
	Draw the xinerama simulation screens with orr windows

2001-07-23  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/windowlist.c (CMD_WindowList):
	fixed windowlist placement w/ Xinerama

2001-07-22  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/menus.c (pop_menu_up):
	fixed calculations that force a menu on screen w/ Xinerama

	* fvwm/move_resize.c (DoSnapAttract):
	removed some code that slipped in with xinerama patch and broke
	vertical SnapAttraction

	* fvwm/virtual.c (CMD_EdgeResistance):
	removed debug code

	* libs/XineramaSupport.c (XineramaSupportClipToScreen):
	take reference position src_x/src_y to determine screen

	* fvwm/windowlist.c (CMD_WindowList):
	* fvwm/menus.c (get_menu_options):
	(get_popup_options):
	(MenuInteraction):
	(pop_menu_up):
	handle Xinerama screens for positioning menus w/ posthints

	* fvwm/menus.c (get_menu_options):
	renamed function
	fix for icon/window context rectangle when window is in wrong state

2001-07-22  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	s/XINERAMA/HAVE_XINERAMA/, now #ifdef'd xinerama code is finally ever
	compiled in; fixed linking by adding -lXinerama; small corrections

2001-07-22  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm2.1: Remove some test code, fix remaining .IP commands.

2001-07-22  Dominik Vogt  <dominik.vogt@gmx.de>

	* libs/XineramaSupport.c (XineramaSupportInit):
	added xinerama emulation for developers

	* fvwm/virtual.c (CMD_XineramaEnable):
	(CMD_XineramaDisable):
	* fvwm/module_interface.c (BroadcastConfigInfoString):
	added function to communicate Xinerama on/off to modules

	* fvwm/module_interface.c:
	include time.h to fix warning
	* libs/XineramaSupport.c:
	* fvwm/fvwm.c (setVersionInfo):
	* fvwm/Makefile.am:
	* configure.in:
	* acconfig.h:
	cleanded up xinerama detection
	added shape detection

2001-07-21  Dominik Vogt  <dominik.vogt@gmx.de>

	* fvwm/fvwm2.1:
	Added Xinerama introduction

	* fvwm/fvwm.c (setVersionInfo):
	print xinerama support

	* fvwm/conditional.c (CreateConditionMask):
	added CirculateHitShaded option for conditional commands that was
	described in the man page but not implemented

	* fvwm/fvwm.h (WindowConditionMask):
	removed unused flags

	* fvwm/conditional.c (MatchesConditionMask):
	fixed CirculateHitIcon option in conditional commands

	* fvwm/fvwm2.1:
	reformatted man page source to improve readability
	fixed some source formatting bugs

	* libs/XineramaSupport.c (GetMouseXY):
	don't poll the pointer if there is only one screen or if xinerama is
	turned off

	* fvwm/fvwm2.1:
	* fvwm/fvwm.c (main):
	removed -noxinerama option

	* fvwm/fvwm.c (main):
	size window is positioned and sized in move_resize.c

	* libs/XineramaSupport.c:
	reindented file

	* configure.in:
	print Xinerama support in configure summary

	* **/*:
	applied Xinerama patch by Dmitry Yu. Bolkhovityanov

2001-07-17  Mikhael Goikhman  <migo@homemail.com>

	* acconfig.h:
	* acinclude.m4:
	* configure.in:
	implemented a new convenient autoconf macro mg_DEFINE_IF_NOT;
	define missing macros needed for old AIX keysymdef and old stroke.h

	* fvwm/bindings.c:
	* fvwm/menus.c:
	remove the previous compilation fixes, now handled by configure

2001-07-15  Dan Espen  <dane@mk.telcordia.com>

	* fvwm/fvwm2.1: Remove .BI with more than 6 args.

2001-07-15  Mikhael Goikhman  <migo@homemail.com>

	* bindings.c:
	use libstroke-0.5 constant names while still supporting 0.3/0.4

	* menus.c:
	compiling fix for old AIX, which does not define XK_Page_Up/Down

	* module_interface.c:
	minor compiling fix for some proprietary preprocessors

2001-07-10  Mikhael Goikhman  <migo@homemail.com>

	* fvwm/fvwm2.1:
	use more compatible and structured syntax in SYNOPSIS

2001-07-06  Mikhael Goikhman  <migo@homemail.com>

	* acinclude.m4:
	Replaced forgotten instances of IMLIB_{CFLAGS,LIBS} to GDK_IMLIB_*.
	This fixes "make FvwmGtk" on systems with bogus imlib-config.

2001-07-05  Mikhael Goikhman  <migo@homemail.com>

	* configure.in:
	changed version to 2.4.1

	* acinclude.m4:
	small fix that should solve the problem with running autoconf
	(autoreconf is ok) from autoconf-2.50;
	applied a patch that adds gtk include dirs to gnome include dirs

2001-07-03  Dominik Vogt  <dominik.vogt@gmx.de>

	* NEWS, configure.in:
	changed version to 2.4.0.1

	* *: fvwm 2.4 has been released :-))
