
# $Id: Makefile.am,v 1.5 2007/05/12 14:48:08 scott Exp $

docdir=@FVWM_DOCDIR@/modules
XSLTPROC=@XSLTPROC@

XSL_FILE=$(srcdir)/../fvwm.xsl
XSL_MAN_FILE=$(srcdir)/../fvwm-man.xsl


MODULES=FvwmAnimate FvwmAuto FvwmBacker FvwmBanner FvwmButtons FvwmCommand FvwmConsole FvwmCpp FvwmDebug FvwmDragWell FvwmEvent FvwmForm FvwmGtk FvwmIconBox FvwmIconMan FvwmIdent FvwmM4 FvwmPager FvwmPerl FvwmProxy FvwmRearrange FvwmSave FvwmSaveDesk FvwmScript FvwmScroll FvwmTabs FvwmTaskBar FvwmTheme FvwmWharf FvwmWindowMenu FvwmWinList
HTML_FILES=$(patsubst %,%.html,$(MODULES))
XML_FILES=todo.xml
EXTRA_DIST=modules.html $(XML_FILES)

if FVWM_BUILD_HTMLDOC
doc_DATA=$(HTML_FILES) modules.html
all: $(HTML_FILES)
endif


QUIET=@
clean:
	rm -f $(HTML_FILES)

FvwmTabs.html: $(srcdir)/FvwmTabs.xml ../fvwm.ent
	$(QUIET) echo "Generating $@"
	$(QUIET) $(XSLTPROC) --path .. --xinclude --stringparam html.stylesheet "../style.css" --stringparam section.autolabel 1 -o $@ $(XSL_FILE) $<

FvwmTabs.1: $(srcdir)/FvwmTabs.xml $(XSL_MAN_FILE)
	$(QUIET) echo "Generating $@ man page"
	$(QUIET) $(XSLTPROC) --path .. --xinclude $(XSL_MAN_FILE) $(srcdir)/FvwmTabs.xml




# All HTML output is generated from XML files.
# %.html : $(srcdir)/%.xml
%.html: $(srcdir)/todo.xml
	$(QUIET) echo "Generating $@"
	$(QUIET) $(XSLTPROC) --path .. --xinclude --stringparam html.stylesheet "../style.css" -o $@ $(XSL_FILE) $<
